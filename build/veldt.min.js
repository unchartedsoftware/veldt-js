!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).veldt=t()}}(function(){return function i(a,u,s){function l(e,t){if(!u[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var o=u[e]={exports:{}};a[e][0].call(o.exports,function(t){return l(a[e][1][t]||t)},o,o.exports,i,a,u,s)}return u[e].exports}for(var c="function"==typeof require&&require,t=0;t<s.length;t++)l(s[t]);return l}({1:[function(t,e,n){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l=Object.create||function(t){function e(){}return e.prototype=t,new e},a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n},i=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=l(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((e.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var o,u=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),o=0===c.x}catch(t){o=!1}function f(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var o,i,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=l(null),t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=f(t))&&0<o&&a.length>o){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,"object"===("undefined"==typeof console?"undefined":s(console))&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=i[e]=n,++t._eventsCount;return t}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function y(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=i.call(p,r);return o.listener=n,r.wrapFn=o}function d(t,e,n){var r=t._events;if(!r)return[];var o=r[e];return o?"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):m(o,o.length):[]}function v(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}o?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');u=t}}):r.defaultMaxListeners=u,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return f(this)},r.prototype.emit=function(t,e,n,r){var o,i,a,u,s,l,c="error"===t;if(l=this._events)c=c&&null==l.error;else if(!c)return!1;if(c){if(1<arguments.length&&(o=e),o instanceof Error)throw o;var f=new Error('Unhandled "error" event. ('+o+")");throw f.context=o,f}if(!(i=l[t]))return!1;var h="function"==typeof i;switch(a=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var r=t.length,o=m(t,r),i=0;i<r;++i)o[i].call(n)}(i,h,this);break;case 2:!function(t,e,n,r){if(e)t.call(n,r);else for(var o=t.length,i=m(t,o),a=0;a<o;++a)i[a].call(n,r)}(i,h,this,e);break;case 3:!function(t,e,n,r,o){if(e)t.call(n,r,o);else for(var i=t.length,a=m(t,i),u=0;u<i;++u)a[u].call(n,r,o)}(i,h,this,e,n);break;case 4:!function(t,e,n,r,o,i){if(e)t.call(n,r,o,i);else for(var a=t.length,u=m(t,a),s=0;s<a;++s)u[s].call(n,r,o,i)}(i,h,this,e,n,r);break;default:for(u=new Array(a-1),s=1;s<a;s++)u[s-1]=arguments[s];!function(t,e,n,r){if(e)t.apply(n,r);else for(var o=t.length,i=m(t,o),a=0;a<o;++a)i[a].apply(n,r)}(i,h,this,u)}return!0},r.prototype.on=r.prototype.addListener=function(t,e){return h(this,t,e,!1)},r.prototype.prependListener=function(t,e){return h(this,t,e,!0)},r.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,y(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,y(this,t,e)),this},r.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=l(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),r.removeListener&&this.emit("removeListener",t,a||e)}return this},r.prototype.removeAllListeners=function(t){var e,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=l(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=l(null):delete n[t]),this;if(0===arguments.length){var o,i=a(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=l(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):v.call(t,e)},r.prototype.listenerCount=v,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],2:[function(t,e,n){"use strict";function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,o;r="undefined"!=typeof window?window:void 0,o=function(O,t){function d(t){return null!=t&&t===t.window}var e=[],S=O.document,r=Object.getPrototypeOf,u=e.slice,v=e.concat,s=e.push,o=e.indexOf,n={},i=n.toString,m=n.hasOwnProperty,a=m.toString,l=a.call(Object),b={},g=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},c={type:!0,src:!0,nonce:!0,noModule:!0};function _(t,e,n){var r,o,i=(n=n||S).createElement("script");if(i.text=t,e)for(r in c)(o=e[r]||e.getAttribute&&e.getAttribute(r))&&i.setAttribute(r,o);n.head.appendChild(i).parentNode.removeChild(i)}function x(t){return null==t?t+"":"object"===un(t)||"function"==typeof t?n[i.call(t)]||"object":un(t)}var T=function t(e,n){return new t.fn.init(e,n)},f=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function h(t){var e=!!t&&"length"in t&&t.length,n=x(t);return!g(t)&&!d(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}T.fn=T.prototype={jquery:"3.4.1",constructor:T,length:0,toArray:function(){return u.call(this)},get:function(t){return null==t?u.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=T.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return T.each(this,t)},map:function(n){return this.pushStack(T.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:e.sort,splice:e.splice},T.extend=T.fn.extend=function(){var t,e,n,r,o,i,a=arguments[0]||{},u=1,s=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[u]||{},u++),"object"===un(a)||g(a)||(a={}),u===s&&(a=this,u--);u<s;u++)if(null!=(t=arguments[u]))for(e in t)r=t[e],"__proto__"!==e&&a!==r&&(l&&r&&(T.isPlainObject(r)||(o=Array.isArray(r)))?(n=a[e],i=o&&!Array.isArray(n)?[]:o||T.isPlainObject(n)?n:{},o=!1,a[e]=T.extend(l,i,r)):void 0!==r&&(a[e]=r));return a},T.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==i.call(t))&&(!(e=r(t))||"function"==typeof(n=m.call(e,"constructor")&&e.constructor)&&a.call(n)===l)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){_(t,{nonce:e&&e.nonce})},each:function(t,e){var n,r=0;if(h(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(f,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(h(Object(t))?T.merge(n,"string"==typeof t?[t]:t):s.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:o.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,o=t.length;r<n;r++)t[o++]=e[r];return t.length=o,t},grep:function(t,e,n){for(var r=[],o=0,i=t.length,a=!n;o<i;o++)!e(t[o],o)!=a&&r.push(t[o]);return r},map:function(t,e,n){var r,o,i=0,a=[];if(h(t))for(r=t.length;i<r;i++)null!=(o=e(t[i],i,n))&&a.push(o);else for(i in t)null!=(o=e(t[i],i,n))&&a.push(o);return v.apply([],a)},guid:1,support:b}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=e[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){n["[object "+e+"]"]=e.toLowerCase()});var p=function(n){function f(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)}function o(){w()}var t,p,_,i,a,y,h,d,x,s,l,w,O,u,S,v,c,m,b,T="sizzle"+1*new Date,g=n.document,E=0,r=0,P=st(),j=st(),k=st(),C=st(),A=function(t,e){return t===e&&(l=!0),0},R={}.hasOwnProperty,e=[],M=e.pop,L=e.push,D=e.push,I=e.slice,F=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",B="\\["+N+"*("+U+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+N+"*\\]",q=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",W=new RegExp(N+"+","g"),H=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),V=new RegExp("^"+N+"*,"+N+"*"),G=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),Z=new RegExp(N+"|>"),X=new RegExp(q),Y=new RegExp("^"+U+"$"),K={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+z+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},$=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,tt=/^[^{]+\{\s*\[native \w/,et=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,nt=/[+~]/,rt=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),ot=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},at=_t(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{D.apply(e=I.call(g.childNodes),g.childNodes),e[g.childNodes.length].nodeType}catch(t){D={apply:e.length?function(t,e){L.apply(t,I.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function ut(e,t,n,r){var o,i,a,u,s,l,c,f=t&&t.ownerDocument,h=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return n;if(!r&&((t?t.ownerDocument||t:g)!==O&&w(t),t=t||O,S)){if(11!==h&&(s=et.exec(e)))if(o=s[1]){if(9===h){if(!(a=t.getElementById(o)))return n;if(a.id===o)return n.push(a),n}else if(f&&(a=f.getElementById(o))&&b(t,a)&&a.id===o)return n.push(a),n}else{if(s[2])return D.apply(n,t.getElementsByTagName(e)),n;if((o=s[3])&&p.getElementsByClassName&&t.getElementsByClassName)return D.apply(n,t.getElementsByClassName(o)),n}if(p.qsa&&!C[e+" "]&&(!v||!v.test(e))&&(1!==h||"object"!==t.nodeName.toLowerCase())){if(c=e,f=t,1===h&&Z.test(e)){for((u=t.getAttribute("id"))?u=u.replace(ot,it):t.setAttribute("id",u=T),i=(l=y(e)).length;i--;)l[i]="#"+u+" "+gt(l[i]);c=l.join(","),f=nt.test(e)&&mt(t.parentNode)||t}try{return D.apply(n,f.querySelectorAll(c)),n}catch(t){C(e,!0)}finally{u===T&&t.removeAttribute("id")}}}return d(e.replace(H,"$1"),t,n,r)}function st(){var r=[];return function t(e,n){return r.push(e+" ")>_.cacheLength&&delete t[r.shift()],t[e+" "]=n}}function lt(t){return t[T]=!0,t}function ct(t){var e=O.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ft(t,e){for(var n=t.split("|"),r=n.length;r--;)_.attrHandle[n[r]]=e}function ht(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function pt(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function yt(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function dt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&at(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function vt(a){return lt(function(i){return i=+i,lt(function(t,e){for(var n,r=a([],t.length,i),o=r.length;o--;)t[n=r[o]]&&(t[n]=!(e[n]=t[n]))})})}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in p=ut.support={},a=ut.isXML=function(t){var e=t.namespaceURI,n=(t.ownerDocument||t).documentElement;return!$.test(e||n&&n.nodeName||"HTML")},w=ut.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:g;return r!==O&&9===r.nodeType&&r.documentElement&&(u=(O=r).documentElement,S=!a(O),g!==O&&(n=O.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",o,!1):n.attachEvent&&n.attachEvent("onunload",o)),p.attributes=ct(function(t){return t.className="i",!t.getAttribute("className")}),p.getElementsByTagName=ct(function(t){return t.appendChild(O.createComment("")),!t.getElementsByTagName("*").length}),p.getElementsByClassName=tt.test(O.getElementsByClassName),p.getById=ct(function(t){return u.appendChild(t).id=T,!O.getElementsByName||!O.getElementsByName(T).length}),p.getById?(_.filter.ID=function(t){var e=t.replace(rt,f);return function(t){return t.getAttribute("id")===e}},_.find.ID=function(t,e){if(void 0!==e.getElementById&&S){var n=e.getElementById(t);return n?[n]:[]}}):(_.filter.ID=function(t){var n=t.replace(rt,f);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}},_.find.ID=function(t,e){if(void 0!==e.getElementById&&S){var n,r,o,i=e.getElementById(t);if(i){if((n=i.getAttributeNode("id"))&&n.value===t)return[i];for(o=e.getElementsByName(t),r=0;i=o[r++];)if((n=i.getAttributeNode("id"))&&n.value===t)return[i]}return[]}}),_.find.TAG=p.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):p.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],o=0,i=e.getElementsByTagName(t);if("*"!==t)return i;for(;n=i[o++];)1===n.nodeType&&r.push(n);return r},_.find.CLASS=p.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&S)return e.getElementsByClassName(t)},c=[],v=[],(p.qsa=tt.test(O.querySelectorAll))&&(ct(function(t){u.appendChild(t).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+N+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+N+"*(?:value|"+z+")"),t.querySelectorAll("[id~="+T+"-]").length||v.push("~="),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+T+"+*").length||v.push(".#.+[+~]")}),ct(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=O.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+N+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),u.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")})),(p.matchesSelector=tt.test(m=u.matches||u.webkitMatchesSelector||u.mozMatchesSelector||u.oMatchesSelector||u.msMatchesSelector))&&ct(function(t){p.disconnectedMatch=m.call(t,"*"),m.call(t,"[s!='']:x"),c.push("!=",q)}),v=v.length&&new RegExp(v.join("|")),c=c.length&&new RegExp(c.join("|")),e=tt.test(u.compareDocumentPosition),b=e||tt.test(u.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return l=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!p.sortDetached&&e.compareDocumentPosition(t)===n?t===O||t.ownerDocument===g&&b(g,t)?-1:e===O||e.ownerDocument===g&&b(g,e)?1:s?F(s,t)-F(s,e):0:4&n?-1:1)}:function(t,e){if(t===e)return l=!0,0;var n,r=0,o=t.parentNode,i=e.parentNode,a=[t],u=[e];if(!o||!i)return t===O?-1:e===O?1:o?-1:i?1:s?F(s,t)-F(s,e):0;if(o===i)return ht(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;a[r]===u[r];)r++;return r?ht(a[r],u[r]):a[r]===g?-1:u[r]===g?1:0}),O},ut.matches=function(t,e){return ut(t,null,null,e)},ut.matchesSelector=function(t,e){if((t.ownerDocument||t)!==O&&w(t),p.matchesSelector&&S&&!C[e+" "]&&(!c||!c.test(e))&&(!v||!v.test(e)))try{var n=m.call(t,e);if(n||p.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){C(e,!0)}return 0<ut(e,O,null,[t]).length},ut.contains=function(t,e){return(t.ownerDocument||t)!==O&&w(t),b(t,e)},ut.attr=function(t,e){(t.ownerDocument||t)!==O&&w(t);var n=_.attrHandle[e.toLowerCase()],r=n&&R.call(_.attrHandle,e.toLowerCase())?n(t,e,!S):void 0;return void 0!==r?r:p.attributes||!S?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},ut.escape=function(t){return(t+"").replace(ot,it)},ut.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ut.uniqueSort=function(t){var e,n=[],r=0,o=0;if(l=!p.detectDuplicates,s=!p.sortStable&&t.slice(0),t.sort(A),l){for(;e=t[o++];)e===t[o]&&(r=n.push(o));for(;r--;)t.splice(n[r],1)}return s=null,t},i=ut.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(_=ut.selectors={cacheLength:50,createPseudo:lt,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(rt,f),t[3]=(t[3]||t[4]||t[5]||"").replace(rt,f),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ut.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ut.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&X.test(n)&&(e=y(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(rt,f).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=P[t+" "];return e||(e=new RegExp("(^|"+N+")"+t+"("+N+"|$)"))&&P(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,r,o){return function(t){var e=ut.attr(t,n);return null==e?"!="===r:!r||(e+="","="===r?e===o:"!="===r?e!==o:"^="===r?o&&0===e.indexOf(o):"*="===r?o&&-1<e.indexOf(o):"$="===r?o&&e.slice(-o.length)===o:"~="===r?-1<(" "+e.replace(W," ")+" ").indexOf(o):"|="===r&&(e===o||e.slice(0,o.length+1)===o+"-"))}},CHILD:function(y,t,e,d,v){var m="nth"!==y.slice(0,3),b="last"!==y.slice(-4),g="of-type"===t;return 1===d&&0===v?function(t){return!!t.parentNode}:function(t,e,n){var r,o,i,a,u,s,l=m!=b?"nextSibling":"previousSibling",c=t.parentNode,f=g&&t.nodeName.toLowerCase(),h=!n&&!g,p=!1;if(c){if(m){for(;l;){for(a=t;a=a[l];)if(g?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;s=l="only"===y&&!s&&"nextSibling"}return!0}if(s=[b?c.firstChild:c.lastChild],b&&h){for(p=(u=(r=(o=(i=(a=c)[T]||(a[T]={}))[a.uniqueID]||(i[a.uniqueID]={}))[y]||[])[0]===E&&r[1])&&r[2],a=u&&c.childNodes[u];a=++u&&a&&a[l]||(p=u=0)||s.pop();)if(1===a.nodeType&&++p&&a===t){o[y]=[E,u,p];break}}else if(h&&(p=u=(r=(o=(i=(a=t)[T]||(a[T]={}))[a.uniqueID]||(i[a.uniqueID]={}))[y]||[])[0]===E&&r[1]),!1===p)for(;(a=++u&&a&&a[l]||(p=u=0)||s.pop())&&((g?a.nodeName.toLowerCase()!==f:1!==a.nodeType)||!++p||(h&&((o=(i=a[T]||(a[T]={}))[a.uniqueID]||(i[a.uniqueID]={}))[y]=[E,p]),a!==t)););return(p-=v)===d||p%d==0&&0<=p/d}}},PSEUDO:function(t,i){var e,a=_.pseudos[t]||_.setFilters[t.toLowerCase()]||ut.error("unsupported pseudo: "+t);return a[T]?a(i):1<a.length?(e=[t,t,"",i],_.setFilters.hasOwnProperty(t.toLowerCase())?lt(function(t,e){for(var n,r=a(t,i),o=r.length;o--;)t[n=F(t,r[o])]=!(e[n]=r[o])}):function(t){return a(t,0,e)}):a}},pseudos:{not:lt(function(t){var r=[],o=[],u=h(t.replace(H,"$1"));return u[T]?lt(function(t,e,n,r){for(var o,i=u(t,null,r,[]),a=t.length;a--;)(o=i[a])&&(t[a]=!(e[a]=o))}):function(t,e,n){return r[0]=t,u(r,null,n,o),r[0]=null,!o.pop()}}),has:lt(function(e){return function(t){return 0<ut(e,t).length}}),contains:lt(function(e){return e=e.replace(rt,f),function(t){return-1<(t.textContent||i(t)).indexOf(e)}}),lang:lt(function(n){return Y.test(n||"")||ut.error("unsupported lang: "+n),n=n.replace(rt,f).toLowerCase(),function(t){var e;do{if(e=S?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===u},focus:function(t){return t===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:dt(!1),disabled:dt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return J.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:vt(function(){return[0]}),last:vt(function(t,e){return[e-1]}),eq:vt(function(t,e,n){return[n<0?n+e:n]}),even:vt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:vt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:vt(function(t,e,n){for(var r=n<0?n+e:e<n?e:n;0<=--r;)t.push(r);return t}),gt:vt(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[t]=pt(t);for(t in{submit:!0,reset:!0})_.pseudos[t]=yt(t);function bt(){}function gt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function _t(u,t,e){var s=t.dir,l=t.next,c=l||s,f=e&&"parentNode"===c,h=r++;return t.first?function(t,e,n){for(;t=t[s];)if(1===t.nodeType||f)return u(t,e,n);return!1}:function(t,e,n){var r,o,i,a=[E,h];if(n){for(;t=t[s];)if((1===t.nodeType||f)&&u(t,e,n))return!0}else for(;t=t[s];)if(1===t.nodeType||f)if(o=(i=t[T]||(t[T]={}))[t.uniqueID]||(i[t.uniqueID]={}),l&&l===t.nodeName.toLowerCase())t=t[s]||t;else{if((r=o[c])&&r[0]===E&&r[1]===h)return a[2]=r[2];if((o[c]=a)[2]=u(t,e,n))return!0}return!1}}function xt(o){return 1<o.length?function(t,e,n){for(var r=o.length;r--;)if(!o[r](t,e,n))return!1;return!0}:o[0]}function wt(t,e,n,r,o){for(var i,a=[],u=0,s=t.length,l=null!=e;u<s;u++)(i=t[u])&&(n&&!n(i,r,o)||(a.push(i),l&&e.push(u)));return a}function Ot(p,y,d,v,m,t){return v&&!v[T]&&(v=Ot(v)),m&&!m[T]&&(m=Ot(m,t)),lt(function(t,e,n,r){var o,i,a,u=[],s=[],l=e.length,c=t||function(t,e,n){for(var r=0,o=e.length;r<o;r++)ut(t,e[r],n);return n}(y||"*",n.nodeType?[n]:n,[]),f=!p||!t&&y?c:wt(c,u,p,n,r),h=d?m||(t?p:l||v)?[]:e:f;if(d&&d(f,h,n,r),v)for(o=wt(h,s),v(o,[],n,r),i=o.length;i--;)(a=o[i])&&(h[s[i]]=!(f[s[i]]=a));if(t){if(m||p){if(m){for(o=[],i=h.length;i--;)(a=h[i])&&o.push(f[i]=a);m(null,h=[],o,r)}for(i=h.length;i--;)(a=h[i])&&-1<(o=m?F(t,a):u[i])&&(t[o]=!(e[o]=a))}}else h=wt(h===e?h.splice(l,h.length):h),m?m(null,e,h,r):D.apply(e,h)})}function St(t){for(var o,e,n,r=t.length,i=_.relative[t[0].type],a=i||_.relative[" "],u=i?1:0,s=_t(function(t){return t===o},a,!0),l=_t(function(t){return-1<F(o,t)},a,!0),c=[function(t,e,n){var r=!i&&(n||e!==x)||((o=e).nodeType?s(t,e,n):l(t,e,n));return o=null,r}];u<r;u++)if(e=_.relative[t[u].type])c=[_t(xt(c),e)];else{if((e=_.filter[t[u].type].apply(null,t[u].matches))[T]){for(n=++u;n<r&&!_.relative[t[n].type];n++);return Ot(1<u&&xt(c),1<u&&gt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(H,"$1"),e,u<n&&St(t.slice(u,n)),n<r&&St(t=t.slice(n)),n<r&&gt(t))}c.push(e)}return xt(c)}return bt.prototype=_.filters=_.pseudos,_.setFilters=new bt,y=ut.tokenize=function(t,e){var n,r,o,i,a,u,s,l=j[t+" "];if(l)return e?0:l.slice(0);for(a=t,u=[],s=_.preFilter;a;){for(i in n&&!(r=V.exec(a))||(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),n=!1,(r=G.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(H," ")}),a=a.slice(n.length)),_.filter)!(r=K[i].exec(a))||s[i]&&!(r=s[i](r))||(n=r.shift(),o.push({value:n,type:i,matches:r}),a=a.slice(n.length));if(!n)break}return e?a.length:a?ut.error(t):j(t,u).slice(0)},h=ut.compile=function(t,e){var n,r=[],o=[],i=k[t+" "];if(!i){for(n=(e=e||y(t)).length;n--;)(i=St(e[n]))[T]?r.push(i):o.push(i);(i=k(t,function(v,m){function t(t,e,n,r,o){var i,a,u,s=0,l="0",c=t&&[],f=[],h=x,p=t||g&&_.find.TAG("*",o),y=E+=null==h?1:Math.random()||.1,d=p.length;for(o&&(x=e===O||e||o);l!==d&&null!=(i=p[l]);l++){if(g&&i){for(a=0,e||i.ownerDocument===O||(w(i),n=!S);u=v[a++];)if(u(i,e||O,n)){r.push(i);break}o&&(E=y)}b&&((i=!u&&i)&&s--,t&&c.push(i))}if(s+=l,b&&l!==s){for(a=0;u=m[a++];)u(c,f,e,n);if(t){if(0<s)for(;l--;)c[l]||f[l]||(f[l]=M.call(r));f=wt(f)}D.apply(r,f),o&&!t&&0<f.length&&1<s+m.length&&ut.uniqueSort(r)}return o&&(E=y,x=h),c}var b=0<m.length,g=0<v.length;return b?lt(t):t}(o,r))).selector=t}return i},d=ut.select=function(t,e,n,r){var o,i,a,u,s,l="function"==typeof t&&t,c=!r&&y(t=l.selector||t);if(n=n||[],1===c.length){if(2<(i=c[0]=c[0].slice(0)).length&&"ID"===(a=i[0]).type&&9===e.nodeType&&S&&_.relative[i[1].type]){if(!(e=(_.find.ID(a.matches[0].replace(rt,f),e)||[])[0]))return n;l&&(e=e.parentNode),t=t.slice(i.shift().value.length)}for(o=K.needsContext.test(t)?0:i.length;o--&&(a=i[o],!_.relative[u=a.type]);)if((s=_.find[u])&&(r=s(a.matches[0].replace(rt,f),nt.test(i[0].type)&&mt(e.parentNode)||e))){if(i.splice(o,1),!(t=r.length&&gt(i)))return D.apply(n,r),n;break}}return(l||h(t,c))(r,e,!S,n,!e||nt.test(t)&&mt(e.parentNode)||e),n},p.sortStable=T.split("").sort(A).join("")===T,p.detectDuplicates=!!l,w(),p.sortDetached=ct(function(t){return 1&t.compareDocumentPosition(O.createElement("fieldset"))}),ct(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ft("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),p.attributes&&ct(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ft("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ct(function(t){return null==t.getAttribute("disabled")})||ft(z,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),ut}(O);T.find=p,T.expr=p.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=p.uniqueSort,T.text=p.getText,T.isXMLDoc=p.isXML,T.contains=p.contains,T.escapeSelector=p.escape;function y(t,e,n){for(var r=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&T(t).is(n))break;r.push(t)}return r}function w(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}var E=T.expr.match.needsContext;function P(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var j=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function k(t,n,r){return g(n)?T.grep(t,function(t,e){return!!n.call(t,e,t)!==r}):n.nodeType?T.grep(t,function(t){return t===n!==r}):"string"!=typeof n?T.grep(t,function(t){return-1<o.call(n,t)!==r}):T.filter(n,t,r)}T.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?T.find.matchesSelector(r,t)?[r]:[]:T.find.matches(t,T.grep(e,function(t){return 1===t.nodeType}))},T.fn.extend({find:function(t){var e,n,r=this.length,o=this;if("string"!=typeof t)return this.pushStack(T(t).filter(function(){for(e=0;e<r;e++)if(T.contains(o[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)T.find(t,o[e],n);return 1<r?T.uniqueSort(n):n},filter:function(t){return this.pushStack(k(this,t||[],!1))},not:function(t){return this.pushStack(k(this,t||[],!0))},is:function(t){return!!k(this,"string"==typeof t&&E.test(t)?T(t):t||[],!1).length}});var C,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(t,e,n){var r,o;if(!t)return this;if(n=n||C,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):g(t)?void 0!==n.ready?n.ready(t):t(T):T.makeArray(t,this);if(!(r="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:A.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:S,!0)),j.test(r[1])&&T.isPlainObject(e))for(r in e)g(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(o=S.getElementById(r[2]))&&(this[0]=o,this.length=1),this}).prototype=T.fn,C=T(S);var R=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function L(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(T.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,o=this.length,i=[],a="string"!=typeof t&&T(t);if(!E.test(t))for(;r<o;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&T.find.matchesSelector(n,t))){i.push(n);break}return this.pushStack(1<i.length?T.uniqueSort(i):i)},index:function(t){return t?"string"==typeof t?o.call(T(t),this[0]):o.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return y(t,"parentNode")},parentsUntil:function(t,e,n){return y(t,"parentNode",n)},next:function(t){return L(t,"nextSibling")},prev:function(t){return L(t,"previousSibling")},nextAll:function(t){return y(t,"nextSibling")},prevAll:function(t){return y(t,"previousSibling")},nextUntil:function(t,e,n){return y(t,"nextSibling",n)},prevUntil:function(t,e,n){return y(t,"previousSibling",n)},siblings:function(t){return w((t.parentNode||{}).firstChild,t)},children:function(t){return w(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(P(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},function(r,o){T.fn[r]=function(t,e){var n=T.map(this,o,t);return"Until"!==r.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=T.filter(e,n)),1<this.length&&(M[r]||T.uniqueSort(n),R.test(r)&&n.reverse()),this.pushStack(n)}});var D=/[^\x20\t\r\n\f]+/g;function I(t){return t}function F(t){throw t}function z(t,e,n,r){var o;try{t&&g(o=t.promise)?o.call(t).done(e).fail(n):t&&g(o=t.then)?o.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}T.Callbacks=function(r){r="string"==typeof r?function(t){var n={};return T.each(t.match(D)||[],function(t,e){n[e]=!0}),n}(r):T.extend({},r);function n(){for(i=i||r.once,e=o=!0;u.length;s=-1)for(t=u.shift();++s<a.length;)!1===a[s].apply(t[0],t[1])&&r.stopOnFalse&&(s=a.length,t=!1);r.memory||(t=!1),o=!1,i&&(a=t?[]:"")}var o,t,e,i,a=[],u=[],s=-1,l={add:function(){return a&&(t&&!o&&(s=a.length-1,u.push(t)),function n(t){T.each(t,function(t,e){g(e)?r.unique&&l.has(e)||a.push(e):e&&e.length&&"string"!==x(e)&&n(e)})}(arguments),t&&!o&&n()),this},remove:function(){return T.each(arguments,function(t,e){for(var n;-1<(n=T.inArray(e,a,n));)a.splice(n,1),n<=s&&s--}),this},has:function(t){return t?-1<T.inArray(t,a):0<a.length},empty:function(){return a=a&&[],this},disable:function(){return i=u=[],a=t="",this},disabled:function(){return!a},lock:function(){return i=u=[],t||o||(a=t=""),this},locked:function(){return!!i},fireWith:function(t,e){return i||(e=[t,(e=e||[]).slice?e.slice():e],u.push(e),o||n()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!e}};return l},T.extend({Deferred:function(t){var i=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],o="pending",a={state:function(){return o},always:function(){return u.done(arguments).fail(arguments),this},catch:function(t){return a.then(null,t)},pipe:function(){var o=arguments;return T.Deferred(function(r){T.each(i,function(t,e){var n=g(o[e[4]])&&o[e[4]];u[e[1]](function(){var t=n&&n.apply(this,arguments);t&&g(t.promise)?t.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[e[0]+"With"](this,n?[t]:arguments)})}),o=null}).promise()},then:function(e,n,r){var s=0;function l(o,i,a,u){return function(){function t(){var t,e;if(!(o<s)){if((t=a.apply(n,r))===i.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"===un(t)||"function"==typeof t)&&t.then,g(e)?u?e.call(t,l(s,i,I,u),l(s,i,F,u)):(s++,e.call(t,l(s,i,I,u),l(s,i,F,u),l(s,i,I,i.notifyWith))):(a!==I&&(n=void 0,r=[t]),(u||i.resolveWith)(n,r))}}var n=this,r=arguments,e=u?t:function(){try{t()}catch(t){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(t,e.stackTrace),s<=o+1&&(a!==F&&(n=void 0,r=[t]),i.rejectWith(n,r))}};o?e():(T.Deferred.getStackHook&&(e.stackTrace=T.Deferred.getStackHook()),O.setTimeout(e))}}return T.Deferred(function(t){i[0][3].add(l(0,t,g(r)?r:I,t.notifyWith)),i[1][3].add(l(0,t,g(e)?e:I)),i[2][3].add(l(0,t,g(n)?n:F))}).promise()},promise:function(t){return null!=t?T.extend(t,a):a}},u={};return T.each(i,function(t,e){var n=e[2],r=e[5];a[e[1]]=n.add,r&&n.add(function(){o=r},i[3-t][2].disable,i[3-t][3].disable,i[0][2].lock,i[0][3].lock),n.add(e[3].fire),u[e[0]]=function(){return u[e[0]+"With"](this===u?void 0:this,arguments),this},u[e[0]+"With"]=n.fireWith}),a.promise(u),t&&t.call(u,u),u},when:function(t){function e(e){return function(t){o[e]=this,i[e]=1<arguments.length?u.call(arguments):t,--n||a.resolveWith(o,i)}}var n=arguments.length,r=n,o=Array(r),i=u.call(arguments),a=T.Deferred();if(n<=1&&(z(t,a.done(e(r)).resolve,a.reject,!n),"pending"===a.state()||g(i[r]&&i[r].then)))return a.then();for(;r--;)z(i[r],e(r),a.reject);return a.promise()}});var N=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,e){O.console&&O.console.warn&&t&&N.test(t.name)&&O.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){O.setTimeout(function(){throw t})};var U=T.Deferred();function B(){S.removeEventListener("DOMContentLoaded",B),O.removeEventListener("load",B),T.ready()}T.fn.ready=function(t){return U.then(t).catch(function(t){T.readyException(t)}),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0)!==t&&0<--T.readyWait||U.resolveWith(S,[T])}}),T.ready.then=U.then,"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?O.setTimeout(T.ready):(S.addEventListener("DOMContentLoaded",B),O.addEventListener("load",B));function q(t,e,n,r,o,i,a){var u=0,s=t.length,l=null==n;if("object"===x(n))for(u in o=!0,n)q(t,e,u,n[u],!0,i,a);else if(void 0!==r&&(o=!0,g(r)||(a=!0),l&&(e=a?(e.call(t,r),null):(l=e,function(t,e,n){return l.call(T(t),n)})),e))for(;u<s;u++)e(t[u],n,a?r:r.call(t[u],u,e(t[u],n)));return o?t:l?e.call(t):s?e(t[0],n):i}var W=/^-ms-/,H=/-([a-z])/g;function V(t,e){return e.toUpperCase()}function G(t){return t.replace(W,"ms-").replace(H,V)}function Z(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function X(){this.expando=T.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Z(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,o=this.cache(t);if("string"==typeof e)o[G(e)]=n;else for(r in e)o[G(r)]=e[r];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][G(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(G):(e=G(e))in r?[e]:e.match(D)||[]).length;for(;n--;)delete r[e[n]]}void 0!==e&&!T.isEmptyObject(r)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var Y=new X,K=new X,$=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Q(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(J,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:$.test(t)?JSON.parse(t):t)}(n)}catch(t){}K.set(t,e,n)}else n=void 0;return n}T.extend({hasData:function(t){return K.hasData(t)||Y.hasData(t)},data:function(t,e,n){return K.access(t,e,n)},removeData:function(t,e){K.remove(t,e)},_data:function(t,e,n){return Y.access(t,e,n)},_removeData:function(t,e){Y.remove(t,e)}}),T.fn.extend({data:function(n,t){var e,r,o,i=this[0],a=i&&i.attributes;if(void 0!==n)return"object"===un(n)?this.each(function(){K.set(this,n)}):q(this,function(t){var e;if(i&&void 0===t)return void 0!==(e=K.get(i,n))?e:void 0!==(e=Q(i,n))?e:void 0;this.each(function(){K.set(this,n,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(o=K.get(i),1===i.nodeType&&!Y.get(i,"hasDataAttrs"))){for(e=a.length;e--;)a[e]&&0===(r=a[e].name).indexOf("data-")&&(r=G(r.slice(5)),Q(i,r,o[r]));Y.set(i,"hasDataAttrs",!0)}return o},removeData:function(t){return this.each(function(){K.remove(this,t)})}}),T.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=Y.get(t,e),n&&(!r||Array.isArray(n)?r=Y.access(t,e,T.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=T.queue(t,e),r=n.length,o=n.shift(),i=T._queueHooks(t,e);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===e&&n.unshift("inprogress"),delete i.stop,o.call(t,function(){T.dequeue(t,e)},i)),!r&&i&&i.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Y.get(t,n)||Y.access(t,n,{empty:T.Callbacks("once memory").add(function(){Y.remove(t,[e+"queue",n])})})}}),T.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?T.queue(this[0],e):void 0===n?this:this.each(function(){var t=T.queue(this,e,n);T._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&T.dequeue(this,e)})},dequeue:function(t){return this.each(function(){T.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function n(){--o||i.resolveWith(a,[a])}var r,o=1,i=T.Deferred(),a=this,u=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";u--;)(r=Y.get(a[u],t+"queueHooks"))&&r.empty&&(o++,r.empty.add(n));return n(),i.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],rt=S.documentElement,ot=function(t){return T.contains(t.ownerDocument,t)},it={composed:!0};rt.getRootNode&&(ot=function(t){return T.contains(t.ownerDocument,t)||t.getRootNode(it)===t.ownerDocument});function at(t,e,n,r){var o,i,a={};for(i in e)a[i]=t.style[i],t.style[i]=e[i];for(i in o=n.apply(t,r||[]),e)t.style[i]=a[i];return o}var ut=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&ot(t)&&"none"===T.css(t,"display")};function st(t,e,n,r){var o,i,a=20,u=r?function(){return r.cur()}:function(){return T.css(t,e,"")},s=u(),l=n&&n[3]||(T.cssNumber[e]?"":"px"),c=t.nodeType&&(T.cssNumber[e]||"px"!==l&&+s)&&et.exec(T.css(t,e));if(c&&c[3]!==l){for(s/=2,l=l||c[3],c=+s||1;a--;)T.style(t,e,c+l),(1-i)*(1-(i=u()/s||.5))<=0&&(a=0),c/=i;c*=2,T.style(t,e,c+l),n=n||[]}return n&&(c=+c||+s||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=o)),o}var lt={};function ct(t,e){for(var n,r,o,i,a,u,s,l=[],c=0,f=t.length;c<f;c++)(r=t[c]).style&&(n=r.style.display,e?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ut(r)&&(l[c]=(s=a=i=void 0,a=(o=r).ownerDocument,u=o.nodeName,(s=lt[u])||(i=a.body.appendChild(a.createElement(u)),s=T.css(i,"display"),i.parentNode.removeChild(i),"none"===s&&(s="block"),lt[u]=s)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(t[c].style.display=l[c]);return t}T.fn.extend({show:function(){return ct(this,!0)},hide:function(){return ct(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){ut(this)?T(this).show():T(this).hide()})}});var ft=/^(?:checkbox|radio)$/i,ht=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,pt=/^$|^module$|\/(?:java|ecma)script/i,yt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function dt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&P(t,e)?T.merge([t],n):n}function vt(t,e){for(var n=0,r=t.length;n<r;n++)Y.set(t[n],"globalEval",!e||Y.get(e[n],"globalEval"))}yt.optgroup=yt.option,yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td;var mt,bt,gt=/<|&#?\w+;/;function _t(t,e,n,r,o){for(var i,a,u,s,l,c,f=e.createDocumentFragment(),h=[],p=0,y=t.length;p<y;p++)if((i=t[p])||0===i)if("object"===x(i))T.merge(h,i.nodeType?[i]:i);else if(gt.test(i)){for(a=a||f.appendChild(e.createElement("div")),u=(ht.exec(i)||["",""])[1].toLowerCase(),s=yt[u]||yt._default,a.innerHTML=s[1]+T.htmlPrefilter(i)+s[2],c=s[0];c--;)a=a.lastChild;T.merge(h,a.childNodes),(a=f.firstChild).textContent=""}else h.push(e.createTextNode(i));for(f.textContent="",p=0;i=h[p++];)if(r&&-1<T.inArray(i,r))o&&o.push(i);else if(l=ot(i),a=dt(f.appendChild(i),"script"),l&&vt(a),n)for(c=0;i=a[c++];)pt.test(i.type||"")&&n.push(i);return f}mt=S.createDocumentFragment().appendChild(S.createElement("div")),(bt=S.createElement("input")).setAttribute("type","radio"),bt.setAttribute("checked","checked"),bt.setAttribute("name","t"),mt.appendChild(bt),b.checkClone=mt.cloneNode(!0).cloneNode(!0).lastChild.checked,mt.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!mt.cloneNode(!0).lastChild.defaultValue;var xt=/^key/,wt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ot=/^([^.]*)(?:\.(.+)|)/;function St(){return!0}function Tt(){return!1}function Et(t,e){return t===function(){try{return S.activeElement}catch(t){}}()==("focus"===e)}function Pt(t,e,n,r,o,i){var a,u;if("object"===un(e)){for(u in"string"!=typeof n&&(r=r||n,n=void 0),e)Pt(t,u,n,r,e[u],i);return t}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"==typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),!1===o)o=Tt;else if(!o)return t;return 1===i&&(a=o,(o=function(t){return T().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=T.guid++)),t.each(function(){T.event.add(this,e,o,r,n)})}function jt(t,o,i){i?(Y.set(t,o,!1),T.event.add(t,o,{namespace:!1,handler:function(t){var e,n,r=Y.get(this,o);if(1&t.isTrigger&&this[o]){if(r.length)(T.event.special[o]||{}).delegateType&&t.stopPropagation();else if(r=u.call(arguments),Y.set(this,o,r),e=i(this,o),this[o](),r!==(n=Y.get(this,o))||e?Y.set(this,o,!1):n={},r!==n)return t.stopImmediatePropagation(),t.preventDefault(),n.value}else r.length&&(Y.set(this,o,{value:T.event.trigger(T.extend(r[0],T.Event.prototype),r.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Y.get(t,o)&&T.event.add(t,o,St)}T.event={global:{},add:function(e,t,n,r,o){var i,a,u,s,l,c,f,h,p,y,d,v=Y.get(e);if(v)for(n.handler&&(n=(i=n).handler,o=i.selector),o&&T.find.matchesSelector(rt,o),n.guid||(n.guid=T.guid++),(s=v.events)||(s=v.events={}),(a=v.handle)||(a=v.handle=function(t){return void 0!==T&&T.event.triggered!==t.type?T.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(D)||[""]).length;l--;)p=d=(u=Ot.exec(t[l])||[])[1],y=(u[2]||"").split(".").sort(),p&&(f=T.event.special[p]||{},p=(o?f.delegateType:f.bindType)||p,f=T.event.special[p]||{},c=T.extend({type:p,origType:d,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&T.expr.match.needsContext.test(o),namespace:y.join(".")},i),(h=s[p])||((h=s[p]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,y,a)||e.addEventListener&&e.addEventListener(p,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,c):h.push(c),T.event.global[p]=!0)},remove:function(t,e,n,r,o){var i,a,u,s,l,c,f,h,p,y,d,v=Y.hasData(t)&&Y.get(t);if(v&&(s=v.events)){for(l=(e=(e||"").match(D)||[""]).length;l--;)if(p=d=(u=Ot.exec(e[l])||[])[1],y=(u[2]||"").split(".").sort(),p){for(f=T.event.special[p]||{},h=s[p=(r?f.delegateType:f.bindType)||p]||[],u=u[2]&&new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=h.length;i--;)c=h[i],!o&&d!==c.origType||n&&n.guid!==c.guid||u&&!u.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(h.splice(i,1),c.selector&&h.delegateCount--,f.remove&&f.remove.call(t,c));a&&!h.length&&(f.teardown&&!1!==f.teardown.call(t,y,v.handle)||T.removeEvent(t,p,v.handle),delete s[p])}else for(p in s)T.event.remove(t,p+e[l],n,r,!0);T.isEmptyObject(s)&&Y.remove(t,"handle events")}},dispatch:function(t){var e,n,r,o,i,a,u=T.event.fix(t),s=new Array(arguments.length),l=(Y.get(this,"events")||{})[u.type]||[],c=T.event.special[u.type]||{};for(s[0]=u,e=1;e<arguments.length;e++)s[e]=arguments[e];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(a=T.event.handlers.call(this,u,l),e=0;(o=a[e++])&&!u.isPropagationStopped();)for(u.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==i.namespace&&!u.rnamespace.test(i.namespace)||(u.handleObj=i,u.data=i.data,void 0!==(r=((T.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,o,i,a,u=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&!("click"===t.type&&1<=t.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(i=[],a={},n=0;n<s;n++)void 0===a[o=(r=e[n]).selector+" "]&&(a[o]=r.needsContext?-1<T(o,this).index(l):T.find(o,this,null,[l]).length),a[o]&&i.push(r);i.length&&u.push({elem:l,handlers:i})}return l=this,s<e.length&&u.push({elem:l,handlers:e.slice(s)}),u},addProp:function(e,t){Object.defineProperty(T.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ft.test(e.type)&&e.click&&P(e,"input")&&jt(e,"click",St),!1},trigger:function(t){var e=this||t;return ft.test(e.type)&&e.click&&P(e,"input")&&jt(e,"click"),!0},_default:function(t){var e=t.target;return ft.test(e.type)&&e.click&&P(e,"input")&&Y.get(e,"click")||P(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?St:Tt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Tt,isPropagationStopped:Tt,isImmediatePropagationStopped:Tt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=St,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=St,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=St,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&xt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&wt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},function(t,e){T.event.special[t]={setup:function(){return jt(this,t,Et),!1},trigger:function(){return jt(this,t),!0},delegateType:e}}),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){T.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,n=t.relatedTarget,r=t.handleObj;return n&&(n===this||T.contains(this,n))||(t.type=r.origType,e=r.handler.apply(this,arguments),t.type=o),e}}}),T.fn.extend({on:function(t,e,n,r){return Pt(this,t,e,n,r)},one:function(t,e,n,r){return Pt(this,t,e,n,r,1)},off:function(t,e,n){var r,o;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,T(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!==un(t))return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Tt),this.each(function(){T.event.remove(this,t,n,e)});for(o in t)this.off(o,e,t[o]);return this}});var kt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ct=/<script|<style|<link/i,At=/checked\s*(?:[^=]|=\s*.checked.)/i,Rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Mt(t,e){return P(t,"table")&&P(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Dt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function It(t,e){var n,r,o,i,a,u,s,l;if(1===e.nodeType){if(Y.hasData(t)&&(i=Y.access(t),a=Y.set(e,i),l=i.events))for(o in delete a.handle,a.events={},l)for(n=0,r=l[o].length;n<r;n++)T.event.add(e,o,l[o][n]);K.hasData(t)&&(u=K.access(t),s=T.extend({},u),K.set(e,s))}}function Ft(n,r,o,i){r=v.apply([],r);var t,e,a,u,s,l,c=0,f=n.length,h=f-1,p=r[0],y=g(p);if(y||1<f&&"string"==typeof p&&!b.checkClone&&At.test(p))return n.each(function(t){var e=n.eq(t);y&&(r[0]=p.call(this,t,e.html())),Ft(e,r,o,i)});if(f&&(e=(t=_t(r,n[0].ownerDocument,!1,n,i)).firstChild,1===t.childNodes.length&&(t=e),e||i)){for(u=(a=T.map(dt(t,"script"),Lt)).length;c<f;c++)s=t,c!==h&&(s=T.clone(s,!0,!0),u&&T.merge(a,dt(s,"script"))),o.call(n[c],s,c);if(u)for(l=a[a.length-1].ownerDocument,T.map(a,Dt),c=0;c<u;c++)s=a[c],pt.test(s.type||"")&&!Y.access(s,"globalEval")&&T.contains(l,s)&&(s.src&&"module"!==(s.type||"").toLowerCase()?T._evalUrl&&!s.noModule&&T._evalUrl(s.src,{nonce:s.nonce||s.getAttribute("nonce")}):_(s.textContent.replace(Rt,""),s,l))}return n}function zt(t,e,n){for(var r,o=e?T.filter(e,t):t,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||T.cleanData(dt(r)),r.parentNode&&(n&&ot(r)&&vt(dt(r,"script")),r.parentNode.removeChild(r));return t}T.extend({htmlPrefilter:function(t){return t.replace(kt,"<$1></$2>")},clone:function(t,e,n){var r,o,i,a,u,s,l,c=t.cloneNode(!0),f=ot(t);if(!(b.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(a=dt(c),r=0,o=(i=dt(t)).length;r<o;r++)u=i[r],s=a[r],void 0,"input"===(l=s.nodeName.toLowerCase())&&ft.test(u.type)?s.checked=u.checked:"input"!==l&&"textarea"!==l||(s.defaultValue=u.defaultValue);if(e)if(n)for(i=i||dt(t),a=a||dt(c),r=0,o=i.length;r<o;r++)It(i[r],a[r]);else It(t,c);return 0<(a=dt(c,"script")).length&&vt(a,!f&&dt(t,"script")),c},cleanData:function(t){for(var e,n,r,o=T.event.special,i=0;void 0!==(n=t[i]);i++)if(Z(n)){if(e=n[Y.expando]){if(e.events)for(r in e.events)o[r]?T.event.remove(n,r):T.removeEvent(n,r,e.handle);n[Y.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),T.fn.extend({detach:function(t){return zt(this,t,!0)},remove:function(t){return zt(this,t)},text:function(t){return q(this,function(t){return void 0===t?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Ft(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Mt(this,t).appendChild(t)})},prepend:function(){return Ft(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Mt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Ft(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Ft(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(dt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return T.clone(this,t,e)})},html:function(t){return q(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ct.test(t)&&!yt[(ht.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(T.cleanData(dt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return Ft(this,arguments,function(t){var e=this.parentNode;T.inArray(this,n)<0&&(T.cleanData(dt(this)),e&&e.replaceChild(t,this))},n)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){T.fn[t]=function(t){for(var e,n=[],r=T(t),o=r.length-1,i=0;i<=o;i++)e=i===o?this:this.clone(!0),T(r[i])[a](e),s.apply(n,e.get());return this.pushStack(n)}});var Nt,Ut,Bt,qt,Wt,Ht,Vt,Gt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=O),e.getComputedStyle(t)},Xt=new RegExp(nt.join("|"),"i");function Yt(){if(Vt){Ht.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Vt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",rt.appendChild(Ht).appendChild(Vt);var t=O.getComputedStyle(Vt);Nt="1%"!==t.top,Wt=12===Kt(t.marginLeft),Vt.style.right="60%",qt=36===Kt(t.right),Ut=36===Kt(t.width),Vt.style.position="absolute",Bt=12===Kt(Vt.offsetWidth/3),rt.removeChild(Ht),Vt=null}}function Kt(t){return Math.round(parseFloat(t))}function $t(t,e,n){var r,o,i,a,u=t.style;return(n=n||Zt(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||ot(t)||(a=T.style(t,e)),!b.pixelBoxStyles()&&Gt.test(a)&&Xt.test(e)&&(r=u.width,o=u.minWidth,i=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=o,u.maxWidth=i)),void 0!==a?a+"":a}function Jt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}Ht=S.createElement("div"),(Vt=S.createElement("div")).style&&(Vt.style.backgroundClip="content-box",Vt.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===Vt.style.backgroundClip,T.extend(b,{boxSizingReliable:function(){return Yt(),Ut},pixelBoxStyles:function(){return Yt(),qt},pixelPosition:function(){return Yt(),Nt},reliableMarginLeft:function(){return Yt(),Wt},scrollboxSize:function(){return Yt(),Bt}}));var Qt=["Webkit","Moz","ms"],te=S.createElement("div").style,ee={};function ne(t){var e=T.cssProps[t]||ee[t];return e||(t in te?t:ee[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Qt.length;n--;)if((t=Qt[n]+e)in te)return t}(t)||t)}var re=/^(none|table(?!-c[ea]).+)/,oe=/^--/,ie={position:"absolute",visibility:"hidden",display:"block"},ae={letterSpacing:"0",fontWeight:"400"};function ue(t,e,n){var r=et.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function se(t,e,n,r,o,i){var a="width"===e?1:0,u=0,s=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(s+=T.css(t,n+nt[a],!0,o)),r?("content"===n&&(s-=T.css(t,"padding"+nt[a],!0,o)),"margin"!==n&&(s-=T.css(t,"border"+nt[a]+"Width",!0,o))):(s+=T.css(t,"padding"+nt[a],!0,o),"padding"!==n?s+=T.css(t,"border"+nt[a]+"Width",!0,o):u+=T.css(t,"border"+nt[a]+"Width",!0,o));return!r&&0<=i&&(s+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-i-s-u-.5))||0),s}function le(t,e,n){var r=Zt(t),o=(!b.boxSizingReliable()||n)&&"border-box"===T.css(t,"boxSizing",!1,r),i=o,a=$t(t,e,r),u="offset"+e[0].toUpperCase()+e.slice(1);if(Gt.test(a)){if(!n)return a;a="auto"}return(!b.boxSizingReliable()&&o||"auto"===a||!parseFloat(a)&&"inline"===T.css(t,"display",!1,r))&&t.getClientRects().length&&(o="border-box"===T.css(t,"boxSizing",!1,r),(i=u in t)&&(a=t[u])),(a=parseFloat(a)||0)+se(t,e,n||(o?"border":"content"),i,r,a)+"px"}function ce(t,e,n,r,o){return new ce.prototype.init(t,e,n,r,o)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=$t(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,i,a,u=G(e),s=oe.test(e),l=t.style;if(s||(e=ne(u)),a=T.cssHooks[e]||T.cssHooks[u],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(t,!1,r))?o:l[e];"string"===(i=un(n))&&(o=et.exec(n))&&o[1]&&(n=st(t,e,o),i="number"),null!=n&&n==n&&("number"!==i||s||(n+=o&&o[3]||(T.cssNumber[u]?"":"px")),b.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(s?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,r){var o,i,a,u=G(e);return oe.test(e)||(e=ne(u)),(a=T.cssHooks[e]||T.cssHooks[u])&&"get"in a&&(o=a.get(t,!0,n)),void 0===o&&(o=$t(t,e,r)),"normal"===o&&e in ae&&(o=ae[e]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o}}),T.each(["height","width"],function(t,s){T.cssHooks[s]={get:function(t,e,n){if(e)return!re.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?le(t,s,n):at(t,ie,function(){return le(t,s,n)})},set:function(t,e,n){var r,o=Zt(t),i=!b.scrollboxSize()&&"absolute"===o.position,a=(i||n)&&"border-box"===T.css(t,"boxSizing",!1,o),u=n?se(t,s,n,a,o):0;return a&&i&&(u-=Math.ceil(t["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(o[s])-se(t,s,"border",!1,o)-.5)),u&&(r=et.exec(e))&&"px"!==(r[3]||"px")&&(t.style[s]=e,e=T.css(t,s)),ue(0,e,u)}}}),T.cssHooks.marginLeft=Jt(b.reliableMarginLeft,function(t,e){if(e)return(parseFloat($t(t,"marginLeft"))||t.getBoundingClientRect().left-at(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(o,i){T.cssHooks[o+i]={expand:function(t){for(var e=0,n={},r="string"==typeof t?t.split(" "):[t];e<4;e++)n[o+nt[e]+i]=r[e]||r[e-2]||r[0];return n}},"margin"!==o&&(T.cssHooks[o+i].set=ue)}),T.fn.extend({css:function(t,e){return q(this,function(t,e,n){var r,o,i={},a=0;if(Array.isArray(e)){for(r=Zt(t),o=e.length;a<o;a++)i[e[a]]=T.css(t,e[a],!1,r);return i}return void 0!==n?T.style(t,e,n):T.css(t,e)},t,e,1<arguments.length)}}),((T.Tween=ce).prototype={constructor:ce,init:function(t,e,n,r,o,i){this.elem=t,this.prop=n,this.easing=o||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=i||(T.cssNumber[n]?"":"px")},cur:function(){var t=ce.propHooks[this.prop];return t&&t.get?t.get(this):ce.propHooks._default.get(this)},run:function(t){var e,n=ce.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ce.propHooks._default.set(this),this}}).init.prototype=ce.prototype,(ce.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=T.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||!T.cssHooks[t.prop]&&null==t.elem.style[ne(t.prop)]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ce.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},T.fx=ce.prototype.init,T.fx.step={};var fe,he,pe,ye,de=/^(?:toggle|show|hide)$/,ve=/queueHooks$/;function me(){he&&(!1===S.hidden&&O.requestAnimationFrame?O.requestAnimationFrame(me):O.setTimeout(me,T.fx.interval),T.fx.tick())}function be(){return O.setTimeout(function(){fe=void 0}),fe=Date.now()}function ge(t,e){var n,r=0,o={height:t};for(e=e?1:0;r<4;r+=2-e)o["margin"+(n=nt[r])]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function _e(t,e,n){for(var r,o=(xe.tweeners[e]||[]).concat(xe.tweeners["*"]),i=0,a=o.length;i<a;i++)if(r=o[i].call(n,e,t))return r}function xe(i,t,e){var n,a,r=0,o=xe.prefilters.length,u=T.Deferred().always(function(){delete s.elem}),s=function(){if(a)return!1;for(var t=fe||be(),e=Math.max(0,l.startTime+l.duration-t),n=1-(e/l.duration||0),r=0,o=l.tweens.length;r<o;r++)l.tweens[r].run(n);return u.notifyWith(i,[l,n,e]),n<1&&o?e:(o||u.notifyWith(i,[l,1,0]),u.resolveWith(i,[l]),!1)},l=u.promise({elem:i,props:T.extend({},t),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},e),originalProperties:t,originalOptions:e,startTime:fe||be(),duration:e.duration,tweens:[],createTween:function(t,e){var n=T.Tween(i,l.opts,t,e,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){var e=0,n=t?l.tweens.length:0;if(a)return this;for(a=!0;e<n;e++)l.tweens[e].run(1);return t?(u.notifyWith(i,[l,1,0]),u.resolveWith(i,[l,t])):u.rejectWith(i,[l,t]),this}}),c=l.props;for(!function(t,e){var n,r,o,i,a;for(n in t)if(o=e[r=G(n)],i=t[n],Array.isArray(i)&&(o=i[1],i=t[n]=i[0]),n!==r&&(t[r]=i,delete t[n]),(a=T.cssHooks[r])&&"expand"in a)for(n in i=a.expand(i),delete t[r],i)n in t||(t[n]=i[n],e[n]=o);else e[r]=o}(c,l.opts.specialEasing);r<o;r++)if(n=xe.prefilters[r].call(l,i,c,l.opts))return g(n.stop)&&(T._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return T.map(c,_e,l),g(l.opts.start)&&l.opts.start.call(i,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),T.fx.timer(T.extend(s,{elem:i,anim:l,queue:l.opts.queue})),l}T.Animation=T.extend(xe,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return st(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){for(var n,r=0,o=(t=g(t)?(e=t,["*"]):t.match(D)).length;r<o;r++)n=t[r],xe.tweeners[n]=xe.tweeners[n]||[],xe.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,o,i,a,u,s,l,c,f="width"in e||"height"in e,h=this,p={},y=t.style,d=t.nodeType&&ut(t),v=Y.get(t,"fxshow");for(r in n.queue||(null==(a=T._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,T.queue(t,"fx").length||a.empty.fire()})})),e)if(o=e[r],de.test(o)){if(delete e[r],i=i||"toggle"===o,o===(d?"hide":"show")){if("show"!==o||!v||void 0===v[r])continue;d=!0}p[r]=v&&v[r]||T.style(t,r)}if((s=!T.isEmptyObject(e))||!T.isEmptyObject(p))for(r in f&&1===t.nodeType&&(n.overflow=[y.overflow,y.overflowX,y.overflowY],null==(l=v&&v.display)&&(l=Y.get(t,"display")),"none"===(c=T.css(t,"display"))&&(l?c=l:(ct([t],!0),l=t.style.display||l,c=T.css(t,"display"),ct([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===T.css(t,"float")&&(s||(h.done(function(){y.display=l}),null==l&&(c=y.display,l="none"===c?"":c)),y.display="inline-block")),n.overflow&&(y.overflow="hidden",h.always(function(){y.overflow=n.overflow[0],y.overflowX=n.overflow[1],y.overflowY=n.overflow[2]})),s=!1,p)s||(v?"hidden"in v&&(d=v.hidden):v=Y.access(t,"fxshow",{display:l}),i&&(v.hidden=!d),d&&ct([t],!0),h.done(function(){for(r in d||ct([t]),Y.remove(t,"fxshow"),p)T.style(t,r,p[r])})),s=_e(d?v[r]:0,r,h),r in v||(v[r]=s.start,d&&(s.end=s.start,s.start=0))}],prefilter:function(t,e){e?xe.prefilters.unshift(t):xe.prefilters.push(t)}}),T.speed=function(t,e,n){var r=t&&"object"===un(t)?T.extend({},t):{complete:n||!n&&e||g(t)&&t,duration:t,easing:n&&e||e&&!g(e)&&e};return T.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in T.fx.speeds?r.duration=T.fx.speeds[r.duration]:r.duration=T.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&T.dequeue(this,r.queue)},r},T.fn.extend({fadeTo:function(t,e,n,r){return this.filter(ut).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(e,t,n,r){function o(){var t=xe(this,T.extend({},e),a);(i||Y.get(this,"finish"))&&t.stop(!0)}var i=T.isEmptyObject(e),a=T.speed(t,n,r);return o.finish=o,i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(o,t,i){function a(t){var e=t.stop;delete t.stop,e(i)}return"string"!=typeof o&&(i=t,t=o,o=void 0),t&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var t=!0,e=null!=o&&o+"queueHooks",n=T.timers,r=Y.get(this);if(e)r[e]&&r[e].stop&&a(r[e]);else for(e in r)r[e]&&r[e].stop&&ve.test(e)&&a(r[e]);for(e=n.length;e--;)n[e].elem!==this||null!=o&&n[e].queue!==o||(n[e].anim.stop(i),t=!1,n.splice(e,1));!t&&i||T.dequeue(this,o)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=Y.get(this),n=e[a+"queue"],r=e[a+"queueHooks"],o=T.timers,i=n?n.length:0;for(e.finish=!0,T.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===a&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<i;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),T.each(["toggle","show","hide"],function(t,r){var o=T.fn[r];T.fn[r]=function(t,e,n){return null==t||"boolean"==typeof t?o.apply(this,arguments):this.animate(ge(r,!0),t,e,n)}}),T.each({slideDown:ge("show"),slideUp:ge("hide"),slideToggle:ge("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,r){T.fn[t]=function(t,e,n){return this.animate(r,t,e,n)}}),T.timers=[],T.fx.tick=function(){var t,e=0,n=T.timers;for(fe=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||T.fx.stop(),fe=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){he||(he=!0,me())},T.fx.stop=function(){he=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(r,t){return r=T.fx&&T.fx.speeds[r]||r,t=t||"fx",this.queue(t,function(t,e){var n=O.setTimeout(t,r);e.stop=function(){O.clearTimeout(n)}})},pe=S.createElement("input"),ye=S.createElement("select").appendChild(S.createElement("option")),pe.type="checkbox",b.checkOn=""!==pe.value,b.optSelected=ye.selected,(pe=S.createElement("input")).value="t",pe.type="radio",b.radioValue="t"===pe.value;var we,Oe=T.expr.attrHandle;T.fn.extend({attr:function(t,e){return q(this,T.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){T.removeAttr(this,t)})}}),T.extend({attr:function(t,e,n){var r,o,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===t.getAttribute?T.prop(t,e,n):(1===i&&T.isXMLDoc(t)||(o=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?we:void 0)),void 0!==n?null===n?void T.removeAttr(t,e):o&&"set"in o&&void 0!==(r=o.set(t,n,e))?r:(t.setAttribute(e,n+""),n):o&&"get"in o&&null!==(r=o.get(t,e))?r:null==(r=T.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!b.radioValue&&"radio"===e&&P(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,o=e&&e.match(D);if(o&&1===t.nodeType)for(;n=o[r++];)t.removeAttribute(n)}}),we={set:function(t,e,n){return!1===e?T.removeAttr(t,n):t.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),function(t,e){var a=Oe[e]||T.find.attr;Oe[e]=function(t,e,n){var r,o,i=e.toLowerCase();return n||(o=Oe[i],Oe[i]=r,r=null!=a(t,e,n)?i:null,Oe[i]=o),r}});var Se=/^(?:input|select|textarea|button)$/i,Te=/^(?:a|area)$/i;function Ee(t){return(t.match(D)||[]).join(" ")}function Pe(t){return t.getAttribute&&t.getAttribute("class")||""}function je(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(D)||[]}T.fn.extend({prop:function(t,e){return q(this,T.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[T.propFix[t]||t]})}}),T.extend({prop:function(t,e,n){var r,o,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&T.isXMLDoc(t)||(e=T.propFix[e]||e,o=T.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(t,n,e))?r:t[e]=n:o&&"get"in o&&null!==(r=o.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):Se.test(t.nodeName)||Te.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(T.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(e){var t,n,r,o,i,a,u,s=0;if(g(e))return this.each(function(t){T(this).addClass(e.call(this,t,Pe(this)))});if((t=je(e)).length)for(;n=this[s++];)if(o=Pe(n),r=1===n.nodeType&&" "+Ee(o)+" "){for(a=0;i=t[a++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");o!==(u=Ee(r))&&n.setAttribute("class",u)}return this},removeClass:function(e){var t,n,r,o,i,a,u,s=0;if(g(e))return this.each(function(t){T(this).removeClass(e.call(this,t,Pe(this)))});if(!arguments.length)return this.attr("class","");if((t=je(e)).length)for(;n=this[s++];)if(o=Pe(n),r=1===n.nodeType&&" "+Ee(o)+" "){for(a=0;i=t[a++];)for(;-1<r.indexOf(" "+i+" ");)r=r.replace(" "+i+" "," ");o!==(u=Ee(r))&&n.setAttribute("class",u)}return this},toggleClass:function(o,e){var i=un(o),a="string"===i||Array.isArray(o);return"boolean"==typeof e&&a?e?this.addClass(o):this.removeClass(o):g(o)?this.each(function(t){T(this).toggleClass(o.call(this,t,Pe(this),e),e)}):this.each(function(){var t,e,n,r;if(a)for(e=0,n=T(this),r=je(o);t=r[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==o&&"boolean"!==i||((t=Pe(this))&&Y.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===o?"":Y.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+Ee(Pe(n))+" ").indexOf(e))return!0;return!1}});var ke=/\r/g;T.fn.extend({val:function(n){var r,t,o,e=this[0];return arguments.length?(o=g(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=o?n.call(this,t,T(this).val()):n)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=T.map(e,function(t){return null==t?"":t+""})),(r=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,e,"value")||(this.value=e))})):e?(r=T.valHooks[e.type]||T.valHooks[e.nodeName.toLowerCase()])&&"get"in r&&void 0!==(t=r.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(ke,""):null==t?"":t:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:Ee(T.text(t))}},select:{get:function(t){var e,n,r,o=t.options,i=t.selectedIndex,a="select-one"===t.type,u=a?null:[],s=a?i+1:o.length;for(r=i<0?s:a?i:0;r<s;r++)if(((n=o[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!P(n.parentNode,"optgroup"))){if(e=T(n).val(),a)return e;u.push(e)}return u},set:function(t,e){for(var n,r,o=t.options,i=T.makeArray(e),a=o.length;a--;)((r=o[a]).selected=-1<T.inArray(T.valHooks.option.get(r),i))&&(n=!0);return n||(t.selectedIndex=-1),i}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<T.inArray(T(t).val(),e)}},b.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),b.focusin="onfocusin"in O;function Ce(t){t.stopPropagation()}var Ae=/^(?:focusinfocus|focusoutblur)$/;T.extend(T.event,{trigger:function(t,e,n,r){var o,i,a,u,s,l,c,f,h=[n||S],p=m.call(t,"type")?t.type:t,y=m.call(t,"namespace")?t.namespace.split("."):[];if(i=f=a=n=n||S,3!==n.nodeType&&8!==n.nodeType&&!Ae.test(p+T.event.triggered)&&(-1<p.indexOf(".")&&(p=(y=p.split(".")).shift(),y.sort()),s=p.indexOf(":")<0&&"on"+p,(t=t[T.expando]?t:new T.Event(p,"object"===un(t)&&t)).isTrigger=r?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:T.makeArray(e,[t]),c=T.event.special[p]||{},r||!c.trigger||!1!==c.trigger.apply(n,e))){if(!r&&!c.noBubble&&!d(n)){for(u=c.delegateType||p,Ae.test(u+p)||(i=i.parentNode);i;i=i.parentNode)h.push(i),a=i;a===(n.ownerDocument||S)&&h.push(a.defaultView||a.parentWindow||O)}for(o=0;(i=h[o++])&&!t.isPropagationStopped();)f=i,t.type=1<o?u:c.bindType||p,(l=(Y.get(i,"events")||{})[t.type]&&Y.get(i,"handle"))&&l.apply(i,e),(l=s&&i[s])&&l.apply&&Z(i)&&(t.result=l.apply(i,e),!1===t.result&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(h.pop(),e)||!Z(n)||s&&g(n[p])&&!d(n)&&((a=n[s])&&(n[s]=null),T.event.triggered=p,t.isPropagationStopped()&&f.addEventListener(p,Ce),n[p](),t.isPropagationStopped()&&f.removeEventListener(p,Ce),T.event.triggered=void 0,a&&(n[s]=a)),t.result}},simulate:function(t,e,n){var r=T.extend(new T.Event,n,{type:t,isSimulated:!0});T.event.trigger(r,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each(function(){T.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return T.event.trigger(t,e,n,!0)}}),b.focusin||T.each({focus:"focusin",blur:"focusout"},function(n,r){function o(t){T.event.simulate(r,t.target,T.event.fix(t))}T.event.special[r]={setup:function(){var t=this.ownerDocument||this,e=Y.access(t,r);e||t.addEventListener(n,o,!0),Y.access(t,r,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=Y.access(t,r)-1;e?Y.access(t,r,e):(t.removeEventListener(n,o,!0),Y.remove(t,r))}}});var Re=O.location,Me=Date.now(),Le=/\?/;T.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new O.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+t),e};var De=/\[\]$/,Ie=/\r?\n/g,Fe=/^(?:submit|button|image|reset|file)$/i,ze=/^(?:input|select|textarea|keygen)/i;function Ne(n,t,r,o){var e;if(Array.isArray(t))T.each(t,function(t,e){r||De.test(n)?o(n,e):Ne(n+"["+("object"===un(e)&&null!=e?t:"")+"]",e,r,o)});else if(r||"object"!==x(t))o(n,t);else for(e in t)Ne(n+"["+e+"]",t[e],r,o)}T.param=function(t,e){function n(t,e){var n=g(e)?e():e;o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)}var r,o=[];if(null==t)return"";if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,function(){n(this.name,this.value)});else for(r in t)Ne(r,t[r],e,n);return o.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&ze.test(this.nodeName)&&!Fe.test(t)&&(this.checked||!ft.test(t))}).map(function(t,e){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,function(t){return{name:e.name,value:t.replace(Ie,"\r\n")}}):{name:e.name,value:n.replace(Ie,"\r\n")}}).get()}});var Ue=/%20/g,Be=/#.*$/,qe=/([?&])_=[^&]*/,We=/^(.*?):[ \t]*([^\r\n]*)$/gm,He=/^(?:GET|HEAD)$/,Ve=/^\/\//,Ge={},Ze={},Xe="*/".concat("*"),Ye=S.createElement("a");function Ke(i){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,r=0,o=t.toLowerCase().match(D)||[];if(g(e))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(i[n]=i[n]||[]).unshift(e)):(i[n]=i[n]||[]).push(e)}}function $e(e,o,i,a){var u={},s=e===Ze;function l(t){var r;return u[t]=!0,T.each(e[t]||[],function(t,e){var n=e(o,i,a);return"string"!=typeof n||s||u[n]?s?!(r=n):void 0:(o.dataTypes.unshift(n),l(n),!1)}),r}return l(o.dataTypes[0])||!u["*"]&&l("*")}function Je(t,e){var n,r,o=T.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:r=r||{})[n]=e[n]);return r&&T.extend(!0,t,r),t}Ye.href=Re.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Re.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Re.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Je(Je(t,T.ajaxSettings),e):Je(T.ajaxSettings,t)},ajaxPrefilter:Ke(Ge),ajaxTransport:Ke(Ze),ajax:function(t,e){"object"===un(t)&&(e=t,t=void 0),e=e||{};var c,f,h,n,p,r,y,d,o,i,v=T.ajaxSetup({},e),m=v.context||v,b=v.context&&(m.nodeType||m.jquery)?T(m):T.event,g=T.Deferred(),_=T.Callbacks("once memory"),x=v.statusCode||{},a={},u={},s="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(y){if(!n)for(n={};e=We.exec(h);)n[e[1].toLowerCase()+" "]=(n[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=n[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return y?h:null},setRequestHeader:function(t,e){return null==y&&(t=u[t.toLowerCase()]=u[t.toLowerCase()]||t,a[t]=e),this},overrideMimeType:function(t){return null==y&&(v.mimeType=t),this},statusCode:function(t){var e;if(t)if(y)w.always(t[w.status]);else for(e in t)x[e]=[x[e],t[e]];return this},abort:function(t){var e=t||s;return c&&c.abort(e),l(0,e),this}};if(g.promise(w),v.url=((t||v.url||Re.href)+"").replace(Ve,Re.protocol+"//"),v.type=e.method||e.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(D)||[""],null==v.crossDomain){r=S.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Ye.protocol+"//"+Ye.host!=r.protocol+"//"+r.host}catch(t){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=T.param(v.data,v.traditional)),$e(Ge,v,e,w),y)return w;for(o in(d=T.event&&v.global)&&0==T.active++&&T.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!He.test(v.type),f=v.url.replace(Be,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Ue,"+")):(i=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Le.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(qe,"$1"),i=(Le.test(f)?"&":"?")+"_="+Me+++i),v.url=f+i),v.ifModified&&(T.lastModified[f]&&w.setRequestHeader("If-Modified-Since",T.lastModified[f]),T.etag[f]&&w.setRequestHeader("If-None-Match",T.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||e.contentType)&&w.setRequestHeader("Content-Type",v.contentType),w.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+Xe+"; q=0.01":""):v.accepts["*"]),v.headers)w.setRequestHeader(o,v.headers[o]);if(v.beforeSend&&(!1===v.beforeSend.call(m,w,v)||y))return w.abort();if(s="abort",_.add(v.complete),w.done(v.success),w.fail(v.error),c=$e(Ze,v,e,w)){if(w.readyState=1,d&&b.trigger("ajaxSend",[w,v]),y)return w;v.async&&0<v.timeout&&(p=O.setTimeout(function(){w.abort("timeout")},v.timeout));try{y=!1,c.send(a,l)}catch(t){if(y)throw t;l(-1,t)}}else l(-1,"No Transport");function l(t,e,n,r){var o,i,a,u,s,l=e;y||(y=!0,p&&O.clearTimeout(p),c=void 0,h=r||"",w.readyState=0<t?4:0,o=200<=t&&t<300||304===t,n&&(u=function(t,e,n){for(var r,o,i,a,u=t.contents,s=t.dataTypes;"*"===s[0];)s.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(o in u)if(u[o]&&u[o].test(r)){s.unshift(o);break}if(s[0]in n)i=s[0];else{for(o in n){if(!s[0]||t.converters[o+" "+s[0]]){i=o;break}a=a||o}i=i||a}if(i)return i!==s[0]&&s.unshift(i),n[i]}(v,w,n)),u=function(t,e,n,r){var o,i,a,u,s,l={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)l[a.toLowerCase()]=t.converters[a];for(i=c.shift();i;)if(t.responseFields[i]&&(n[t.responseFields[i]]=e),!s&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),s=i,i=c.shift())if("*"===i)i=s;else if("*"!==s&&s!==i){if(!(a=l[s+" "+i]||l["* "+i]))for(o in l)if((u=o.split(" "))[1]===i&&(a=l[s+" "+u[0]]||l["* "+u[0]])){!0===a?a=l[o]:!0!==l[o]&&(i=u[0],c.unshift(u[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+s+" to "+i}}}return{state:"success",data:e}}(v,u,w,o),o?(v.ifModified&&((s=w.getResponseHeader("Last-Modified"))&&(T.lastModified[f]=s),(s=w.getResponseHeader("etag"))&&(T.etag[f]=s)),204===t||"HEAD"===v.type?l="nocontent":304===t?l="notmodified":(l=u.state,i=u.data,o=!(a=u.error))):(a=l,!t&&l||(l="error",t<0&&(t=0))),w.status=t,w.statusText=(e||l)+"",o?g.resolveWith(m,[i,l,w]):g.rejectWith(m,[w,l,a]),w.statusCode(x),x=void 0,d&&b.trigger(o?"ajaxSuccess":"ajaxError",[w,v,o?i:a]),_.fireWith(m,[w,l]),d&&(b.trigger("ajaxComplete",[w,v]),--T.active||T.event.trigger("ajaxStop")))}return w},getJSON:function(t,e,n){return T.get(t,e,n,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],function(t,o){T[o]=function(t,e,n,r){return g(e)&&(r=r||n,n=e,e=void 0),T.ajax(T.extend({url:t,type:o,dataType:r,data:e,success:n},T.isPlainObject(t)&&t))}}),T._evalUrl=function(t,e){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){T.globalEval(t,e)}})},T.fn.extend({wrapAll:function(t){var e;return this[0]&&(g(t)&&(t=t.call(this[0])),e=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return g(n)?this.each(function(t){T(this).wrapInner(n.call(this,t))}):this.each(function(){var t=T(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=g(e);return this.each(function(t){T(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new O.XMLHttpRequest}catch(t){}};var Qe={0:200,1223:204},tn=T.ajaxSettings.xhr();b.cors=!!tn&&"withCredentials"in tn,b.ajax=tn=!!tn,T.ajaxTransport(function(o){var i,a;if(b.cors||tn&&!o.crossDomain)return{send:function(t,e){var n,r=o.xhr();if(r.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(n in o.xhrFields)r[n]=o.xhrFields[n];for(n in o.mimeType&&r.overrideMimeType&&r.overrideMimeType(o.mimeType),o.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)r.setRequestHeader(n,t[n]);i=function(t){return function(){i&&(i=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===t?r.abort():"error"===t?"number"!=typeof r.status?e(0,"error"):e(r.status,r.statusText):e(Qe[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=i(),a=r.onerror=r.ontimeout=i("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&O.setTimeout(function(){i&&a()})},i=i("abort");try{r.send(o.hasContent&&o.data||null)}catch(t){if(i)throw t}},abort:function(){i&&i()}}}),T.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),T.ajaxTransport("script",function(n){var r,o;if(n.crossDomain||n.scriptAttrs)return{send:function(t,e){r=T("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",o=function(t){r.remove(),o=null,t&&e("error"===t.type?404:200,t.type)}),S.head.appendChild(r[0])},abort:function(){o&&o()}}});var en,nn=[],rn=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=nn.pop()||T.expando+"_"+Me++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",function(t,e,n){var r,o,i,a=!1!==t.jsonp&&(rn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&rn.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(rn,"$1"+r):!1!==t.jsonp&&(t.url+=(Le.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return i||T.error(r+" was not called"),i[0]},t.dataTypes[0]="json",o=O[r],O[r]=function(){i=arguments},n.always(function(){void 0===o?T(O).removeProp(r):O[r]=o,t[r]&&(t.jsonpCallback=e.jsonpCallback,nn.push(r)),i&&g(o)&&o(i[0]),i=o=void 0}),"script"}),b.createHTMLDocument=((en=S.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===en.childNodes.length),T.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(b.createHTMLDocument?((r=(e=S.implementation.createHTMLDocument("")).createElement("base")).href=S.location.href,e.head.appendChild(r)):e=S),i=!n&&[],(o=j.exec(t))?[e.createElement(o[1])]:(o=_t([t],e,i),i&&i.length&&T(i).remove(),T.merge([],o.childNodes)));var r,o,i},T.fn.load=function(t,e,n){var r,o,i,a=this,u=t.indexOf(" ");return-1<u&&(r=Ee(t.slice(u)),t=t.slice(0,u)),g(e)?(n=e,e=void 0):e&&"object"===un(e)&&(o="POST"),0<a.length&&T.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){i=arguments,a.html(r?T("<div>").append(T.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,i||[t.responseText,e,t])})}),this},T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){T.fn[e]=function(t){return this.on(e,t)}}),T.expr.pseudos.animated=function(e){return T.grep(T.timers,function(t){return e===t.elem}).length},T.offset={setOffset:function(t,e,n){var r,o,i,a,u,s,l=T.css(t,"position"),c=T(t),f={};"static"===l&&(t.style.position="relative"),u=c.offset(),i=T.css(t,"top"),s=T.css(t,"left"),o=("absolute"===l||"fixed"===l)&&-1<(i+s).indexOf("auto")?(a=(r=c.position()).top,r.left):(a=parseFloat(i)||0,parseFloat(s)||0),g(e)&&(e=e.call(t,n,T.extend({},u))),null!=e.top&&(f.top=e.top-u.top+a),null!=e.left&&(f.left=e.left-u.left+o),"using"in e?e.using.call(t,f):c.css(f)}},T.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){T.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],o={top:0,left:0};if("fixed"===T.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((o=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),o.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-T.css(r,"marginTop",!0),left:e.left-o.left-T.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||rt})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,o){var i="pageYOffset"===o;T.fn[e]=function(t){return q(this,function(t,e,n){var r;if(d(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===n)return r?r[o]:t[e];r?r.scrollTo(i?r.pageXOffset:n,i?n:r.pageYOffset):t[e]=n},e,t,arguments.length)}}),T.each(["top","left"],function(t,n){T.cssHooks[n]=Jt(b.pixelPosition,function(t,e){if(e)return e=$t(t,n),Gt.test(e)?T(t).position()[n]+"px":e})}),T.each({Height:"height",Width:"width"},function(a,u){T.each({padding:"inner"+a,content:u,"":"outer"+a},function(r,i){T.fn[i]=function(t,e){var n=arguments.length&&(r||"boolean"!=typeof t),o=r||(!0===t||!0===e?"margin":"border");return q(this,function(t,e,n){var r;return d(t)?0===i.indexOf("outer")?t["inner"+a]:t.document.documentElement["client"+a]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+a],r["scroll"+a],t.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?T.css(t,e,o):T.style(t,e,n,o)},u,n?t:void 0,n)}})}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){T.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),T.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),T.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),T.proxy=function(t,e){var n,r,o;if("string"==typeof e&&(n=t[e],e=t,t=n),g(t))return r=u.call(arguments,2),(o=function(){return t.apply(e||this,r.concat(u.call(arguments)))}).guid=t.guid=t.guid||T.guid++,o},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=P,T.isFunction=g,T.isWindow=d,T.camelCase=G,T.type=x,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))};var on=O.jQuery,an=O.$;return T.noConflict=function(t){return O.$===T&&(O.$=an),t&&O.jQuery===T&&(O.jQuery=on),T},t||(O.jQuery=O.$=T),T},"object"===(void 0===e?"undefined":un(e))&&"object"===un(e.exports)?e.exports=r.document?o(r,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return o(t)}:o(r)},{}],3:[function(t,e,n){"use strict";function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var g="undefined"!=typeof JSON?JSON:t("jsonify");e.exports=function(t,e){"function"==typeof(e=e||{})&&(e={cmp:e});var p=e.space||"";"number"==typeof p&&(p=Array(p+1).join(" "));var i,y="boolean"==typeof e.cycles&&e.cycles,d=e.replacer||function(t,e){return e},v=e.cmp&&(i=e.cmp,function(o){return function(t,e){var n={key:t,value:o[t]},r={key:e,value:o[e]};return i(n,r)}}),m=[];return function t(e,n,r,o){var i=p?"\n"+new Array(o+1).join(p):"",a=p?": ":":";if(r&&r.toJSON&&"function"==typeof r.toJSON&&(r=r.toJSON()),void 0!==(r=d.call(e,n,r))){if("object"!==b(r)||null===r)return g.stringify(r);if(_(r)){for(var u=[],s=0;s<r.length;s++){var l=t(r,s,r[s],o+1)||g.stringify(null);u.push(i+p+l)}return"["+u.join(",")+i+"]"}if(-1!==m.indexOf(r)){if(y)return g.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}m.push(r);var c=x(r).sort(v&&v(r));for(u=[],s=0;s<c.length;s++){var f=t(r,n=c[s],r[n],o+1);if(f){var h=g.stringify(n)+a+f;u.push(i+p+h)}}return m.splice(m.indexOf(r),1),"{"+u.join(",")+i+"}"}}({"":t},"",t,0)};var _=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},x=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in t)e.call(t,r)&&n.push(r);return n}},{jsonify:4}],4:[function(t,e,n){"use strict";n.parse=t("./lib/parse"),n.stringify=t("./lib/stringify")},{"./lib/parse":5,"./lib/stringify":6}],5:[function(t,e,n){"use strict";function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){throw{name:"SyntaxError",message:t,at:l,text:f}}function i(t){return t&&t!==c&&o("Expected '"+t+"' instead of '"+c+"'"),c=f.charAt(l),l+=1,c}function r(){var t,e="";for("-"===c&&i(e="-");"0"<=c&&c<="9";)e+=c,i();if("."===c)for(e+=".";i()&&"0"<=c&&c<="9";)e+=c;if("e"===c||"E"===c)for(e+=c,i(),"-"!==c&&"+"!==c||(e+=c,i());"0"<=c&&c<="9";)e+=c,i();if(t=+e,isFinite(t))return t;o("Bad number")}function a(){var t,e,n,r="";if('"'===c)for(;i();){if('"'===c)return i(),r;if("\\"===c)if(i(),"u"===c){for(e=n=0;e<4&&(t=parseInt(i(),16),isFinite(t));e+=1)n=16*n+t;r+=String.fromCharCode(n)}else{if("string"!=typeof p[c])break;r+=p[c]}else r+=c}o("Bad string")}function s(){for(;c&&c<=" ";)i()}var l,c,f,h,p={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};h=function(){switch(s(),c){case"{":return function(){var t,e={};if("{"===c){if(i("{"),s(),"}"===c)return i("}"),e;for(;c;){if(t=a(),s(),i(":"),Object.hasOwnProperty.call(e,t)&&o('Duplicate key "'+t+'"'),e[t]=h(),s(),"}"===c)return i("}"),e;i(","),s()}}o("Bad object")}();case"[":return function(){var t=[];if("["===c){if(i("["),s(),"]"===c)return i("]"),t;for(;c;){if(t.push(h()),s(),"]"===c)return i("]"),t;i(","),s()}}o("Bad array")}();case'"':return a();case"-":return r();default:return"0"<=c&&c<="9"?r():function(){switch(c){case"t":return i("t"),i("r"),i("u"),i("e"),!0;case"f":return i("f"),i("a"),i("l"),i("s"),i("e"),!1;case"n":return i("n"),i("u"),i("l"),i("l"),null}o("Unexpected '"+c+"'")}()}},e.exports=function(t,a){var e;return f=t,l=0,c=" ",e=h(),s(),c&&o("Syntax error"),"function"==typeof a?function t(e,n){var r,o,i=e[n];if(i&&"object"===u(i))for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(void 0!==(o=t(i,r))?i[r]=o:delete i[r]);return a.call(e,n,i)}({"":e},""):e}},{}],6:[function(t,e,n){"use strict";function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var f,h,p,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function y(t){return r.lastIndex=0,r.test(t)?'"'+t.replace(r,function(t){var e=o[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}e.exports=function(t,e,n){var r;if(h=f="","number"==typeof n)for(r=0;r<n;r+=1)h+=" ";else"string"==typeof n&&(h=n);if((p=e)&&"function"!=typeof e&&("object"!==c(e)||"number"!=typeof e.length))throw new Error("JSON.stringify");return function t(e,n){var r,o,i,a,u,s=f,l=n[e];switch(l&&"object"===c(l)&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof p&&(l=p.call(n,e,l)),c(l)){case"string":return y(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(f+=h,u=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,r=0;r<a;r+=1)u[r]=t(r,l)||"null";return i=0===u.length?"[]":f?"[\n"+f+u.join(",\n"+f)+"\n"+s+"]":"["+u.join(",")+"]",f=s,i}if(p&&"object"===c(p))for(a=p.length,r=0;r<a;r+=1)"string"==typeof(o=p[r])&&(i=t(o,l))&&u.push(y(o)+(f?": ":":")+i);else for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(i=t(o,l))&&u.push(y(o)+(f?": ":":")+i);return i=0===u.length?"{}":f?"{\n"+f+u.join(",\n"+f)+"\n"+s+"}":"{"+u.join(",")+"}",f=s,i}}("",{"":t})}},{}],7:[function(t,e,n){"use strict";var r=t("./_getNative")(t("./_root"),"DataView");e.exports=r},{"./_getNative":100,"./_root":143}],8:[function(t,e,n){"use strict";var r=t("./_hashClear"),o=t("./_hashDelete"),i=t("./_hashGet"),a=t("./_hashHas"),u=t("./_hashSet");function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},{"./_hashClear":108,"./_hashDelete":109,"./_hashGet":110,"./_hashHas":111,"./_hashSet":112}],9:[function(t,e,n){"use strict";var r=t("./_listCacheClear"),o=t("./_listCacheDelete"),i=t("./_listCacheGet"),a=t("./_listCacheHas"),u=t("./_listCacheSet");function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},{"./_listCacheClear":123,"./_listCacheDelete":124,"./_listCacheGet":125,"./_listCacheHas":126,"./_listCacheSet":127}],10:[function(t,e,n){"use strict";var r=t("./_getNative")(t("./_root"),"Map");e.exports=r},{"./_getNative":100,"./_root":143}],11:[function(t,e,n){"use strict";var r=t("./_mapCacheClear"),o=t("./_mapCacheDelete"),i=t("./_mapCacheGet"),a=t("./_mapCacheHas"),u=t("./_mapCacheSet");function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},{"./_mapCacheClear":128,"./_mapCacheDelete":129,"./_mapCacheGet":130,"./_mapCacheHas":131,"./_mapCacheSet":132}],12:[function(t,e,n){"use strict";var r=t("./_getNative")(t("./_root"),"Promise");e.exports=r},{"./_getNative":100,"./_root":143}],13:[function(t,e,n){"use strict";var r=t("./_getNative")(t("./_root"),"Set");e.exports=r},{"./_getNative":100,"./_root":143}],14:[function(t,e,n){"use strict";var r=t("./_MapCache"),o=t("./_setCacheAdd"),i=t("./_setCacheHas");function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},{"./_MapCache":11,"./_setCacheAdd":144,"./_setCacheHas":145}],15:[function(t,e,n){"use strict";var r=t("./_ListCache"),o=t("./_stackClear"),i=t("./_stackDelete"),a=t("./_stackGet"),u=t("./_stackHas"),s=t("./_stackSet");function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=o,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=u,l.prototype.set=s,e.exports=l},{"./_ListCache":9,"./_stackClear":149,"./_stackDelete":150,"./_stackGet":151,"./_stackHas":152,"./_stackSet":153}],16:[function(t,e,n){"use strict";var r=t("./_root").Symbol;e.exports=r},{"./_root":143}],17:[function(t,e,n){"use strict";var r=t("./_root").Uint8Array;e.exports=r},{"./_root":143}],18:[function(t,e,n){"use strict";var r=t("./_getNative")(t("./_root"),"WeakMap");e.exports=r},{"./_getNative":100,"./_root":143}],19:[function(t,e,n){"use strict";e.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},{}],20:[function(t,e,n){"use strict";e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},{}],21:[function(t,e,n){"use strict";e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}},{}],22:[function(t,e,n){"use strict";var c=t("./_baseTimes"),f=t("./isArguments"),h=t("./isArray"),p=t("./isBuffer"),y=t("./_isIndex"),d=t("./isTypedArray"),v=Object.prototype.hasOwnProperty;e.exports=function(t,e){var n=h(t),r=!n&&f(t),o=!n&&!r&&p(t),i=!n&&!r&&!o&&d(t),a=n||r||o||i,u=a?c(t.length,String):[],s=u.length;for(var l in t)!e&&!v.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||y(l,s))||u.push(l);return u}},{"./_baseTimes":71,"./_isIndex":117,"./isArguments":168,"./isArray":169,"./isBuffer":171,"./isTypedArray":183}],23:[function(t,e,n){"use strict";e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},{}],24:[function(t,e,n){"use strict";e.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},{}],25:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}},{}],26:[function(t,e,n){"use strict";e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},{}],27:[function(t,e,n){"use strict";var o=t("./_baseAssignValue"),i=t("./eq"),a=Object.prototype.hasOwnProperty;e.exports=function(t,e,n){var r=t[e];a.call(t,e)&&i(r,n)&&(void 0!==n||e in t)||o(t,e,n)}},{"./_baseAssignValue":31,"./eq":162}],28:[function(t,e,n){"use strict";var r=t("./eq");e.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},{"./eq":162}],29:[function(t,e,n){"use strict";var r=t("./_copyObject"),o=t("./keys");e.exports=function(t,e){return t&&r(e,o(e),t)}},{"./_copyObject":85,"./keys":184}],30:[function(t,e,n){"use strict";var r=t("./_copyObject"),o=t("./keysIn");e.exports=function(t,e){return t&&r(e,o(e),t)}},{"./_copyObject":85,"./keysIn":185}],31:[function(t,e,n){"use strict";var r=t("./_defineProperty");e.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},{"./_defineProperty":91}],32:[function(t,e,n){"use strict";e.exports=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=e<=t?t:e)),t}},{}],33:[function(t,e,n){"use strict";var m=t("./_Stack"),b=t("./_arrayEach"),g=t("./_assignValue"),_=t("./_baseAssign"),x=t("./_baseAssignIn"),w=t("./_cloneBuffer"),O=t("./_copyArray"),S=t("./_copySymbols"),T=t("./_copySymbolsIn"),E=t("./_getAllKeys"),P=t("./_getAllKeysIn"),j=t("./_getTag"),k=t("./_initCloneArray"),C=t("./_initCloneByTag"),A=t("./_initCloneObject"),R=t("./isArray"),M=t("./isBuffer"),L=t("./isMap"),D=t("./isObject"),I=t("./isSet"),F=t("./keys"),z=1,N=2,U=4,B="[object Arguments]",q="[object Function]",W="[object GeneratorFunction]",H="[object Object]",V={};V[B]=V["[object Array]"]=V["[object ArrayBuffer]"]=V["[object DataView]"]=V["[object Boolean]"]=V["[object Date]"]=V["[object Float32Array]"]=V["[object Float64Array]"]=V["[object Int8Array]"]=V["[object Int16Array]"]=V["[object Int32Array]"]=V["[object Map]"]=V["[object Number]"]=V[H]=V["[object RegExp]"]=V["[object Set]"]=V["[object String]"]=V["[object Symbol]"]=V["[object Uint8Array]"]=V["[object Uint8ClampedArray]"]=V["[object Uint16Array]"]=V["[object Uint32Array]"]=!0,V["[object Error]"]=V[q]=V["[object WeakMap]"]=!1,e.exports=function n(r,o,i,t,e,a){var u,s=o&z,l=o&N,c=o&U;if(i&&(u=e?i(r,t,e,a):i(r)),void 0!==u)return u;if(!D(r))return r;var f=R(r);if(f){if(u=k(r),!s)return O(r,u)}else{var h=j(r),p=h==q||h==W;if(M(r))return w(r,s);if(h==H||h==B||p&&!e){if(u=l||p?{}:A(r),!s)return l?T(r,x(u,r)):S(r,_(u,r))}else{if(!V[h])return e?r:{};u=C(r,h,s)}}var y=(a=a||new m).get(r);if(y)return y;a.set(r,u),I(r)?r.forEach(function(t){u.add(n(t,o,i,t,r,a))}):L(r)&&r.forEach(function(t,e){u.set(e,n(t,o,i,e,r,a))});var d=c?l?P:E:l?keysIn:F,v=f?void 0:d(r);return b(v||r,function(t,e){v&&(t=r[e=t]),g(u,e,n(t,o,i,e,r,a))}),u}},{"./_Stack":15,"./_arrayEach":20,"./_assignValue":27,"./_baseAssign":29,"./_baseAssignIn":30,"./_cloneBuffer":79,"./_copyArray":84,"./_copySymbols":86,"./_copySymbolsIn":87,"./_getAllKeys":96,"./_getAllKeysIn":97,"./_getTag":105,"./_initCloneArray":113,"./_initCloneByTag":114,"./_initCloneObject":115,"./isArray":169,"./isBuffer":171,"./isMap":175,"./isObject":178,"./isSet":180,"./keys":184}],34:[function(t,e,n){"use strict";function r(t){if(!o(t))return{};if(i)return i(t);a.prototype=t;var e=new a;return a.prototype=void 0,e}var o=t("./isObject"),i=Object.create;function a(){}e.exports=r},{"./isObject":178}],35:[function(t,e,n){"use strict";var r=t("./_baseForOwn"),o=t("./_createBaseEach")(r);e.exports=o},{"./_baseForOwn":40,"./_createBaseEach":89}],36:[function(t,e,n){"use strict";var l=t("./isSymbol");e.exports=function(t,e,n){for(var r=-1,o=t.length;++r<o;){var i=t[r],a=e(i);if(null!=a&&(void 0===u?a==a&&!l(a):n(a,u)))var u=a,s=i}return s}},{"./isSymbol":182}],37:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},{}],38:[function(t,e,n){"use strict";var l=t("./_arrayPush"),c=t("./_isFlattenable");e.exports=function t(e,n,r,o,i){var a=-1,u=e.length;for(r=r||c,i=i||[];++a<u;){var s=e[a];0<n&&r(s)?1<n?t(s,n-1,r,o,i):l(i,s):o||(i[i.length]=s)}return i}},{"./_arrayPush":24,"./_isFlattenable":116}],39:[function(t,e,n){"use strict";var r=t("./_createBaseFor")();e.exports=r},{"./_createBaseFor":90}],40:[function(t,e,n){"use strict";var r=t("./_baseFor"),o=t("./keys");e.exports=function(t,e){return t&&r(t,e,o)}},{"./_baseFor":39,"./keys":184}],41:[function(t,e,n){"use strict";var o=t("./_castPath"),i=t("./_toKey");e.exports=function(t,e){for(var n=0,r=(e=o(e,t)).length;null!=t&&n<r;)t=t[i(e[n++])];return n&&n==r?t:void 0}},{"./_castPath":77,"./_toKey":156}],42:[function(t,e,n){"use strict";var o=t("./_arrayPush"),i=t("./isArray");e.exports=function(t,e,n){var r=e(t);return i(t)?r:o(r,n(t))}},{"./_arrayPush":24,"./isArray":169}],43:[function(t,e,n){"use strict";var r=t("./_Symbol"),o=t("./_getRawTag"),i=t("./_objectToString"),a=r?r.toStringTag:void 0;e.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},{"./_Symbol":16,"./_getRawTag":102,"./_objectToString":140}],44:[function(t,e,n){"use strict";e.exports=function(t,e){return e<t}},{}],45:[function(t,e,n){"use strict";e.exports=function(t,e){return null!=t&&e in Object(t)}},{}],46:[function(t,e,n){"use strict";var r=t("./_baseFindIndex"),o=t("./_baseIsNaN"),i=t("./_strictIndexOf");e.exports=function(t,e,n){return e==e?i(t,e,n):r(t,o,n)}},{"./_baseFindIndex":37,"./_baseIsNaN":53,"./_strictIndexOf":154}],47:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}},{}],48:[function(t,e,n){"use strict";var r=t("./_baseGetTag"),o=t("./isObjectLike");e.exports=function(t){return o(t)&&"[object Arguments]"==r(t)}},{"./_baseGetTag":43,"./isObjectLike":179}],49:[function(t,e,n){"use strict";var a=t("./_baseIsEqualDeep"),u=t("./isObjectLike");e.exports=function t(e,n,r,o,i){return e===n||(null==e||null==n||!u(e)&&!u(n)?e!=e&&n!=n:a(e,n,r,o,t,i))}},{"./_baseIsEqualDeep":50,"./isObjectLike":179}],50:[function(t,e,n){"use strict";var d=t("./_Stack"),v=t("./_equalArrays"),m=t("./_equalByTag"),b=t("./_equalObjects"),g=t("./_getTag"),_=t("./isArray"),x=t("./isBuffer"),w=t("./isTypedArray"),O="[object Arguments]",S="[object Array]",T="[object Object]",E=Object.prototype.hasOwnProperty;e.exports=function(t,e,n,r,o,i){var a=_(t),u=_(e),s=a?S:g(t),l=u?S:g(e),c=(s=s==O?T:s)==T,f=(l=l==O?T:l)==T,h=s==l;if(h&&x(t)){if(!x(e))return!1;c=!(a=!0)}if(h&&!c)return i=i||new d,a||w(t)?v(t,e,n,r,o,i):m(t,e,s,n,r,o,i);if(!(1&n)){var p=c&&E.call(t,"__wrapped__"),y=f&&E.call(e,"__wrapped__");if(p||y)return o(p?t.value():t,y?e.value():e,n,r,i=i||new d)}return h&&(i=i||new d,b(t,e,n,r,o,i))}},{"./_Stack":15,"./_equalArrays":92,"./_equalByTag":93,"./_equalObjects":94,"./_getTag":105,"./isArray":169,"./isBuffer":171,"./isTypedArray":183}],51:[function(t,e,n){"use strict";var r=t("./_getTag"),o=t("./isObjectLike");e.exports=function(t){return o(t)&&"[object Map]"==r(t)}},{"./_getTag":105,"./isObjectLike":179}],52:[function(t,e,n){"use strict";var p=t("./_Stack"),y=t("./_baseIsEqual");e.exports=function(t,e,n,r){var o=n.length,i=o,a=!r;if(null==t)return!i;for(t=Object(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){var s=(u=n[o])[0],l=t[s],c=u[1];if(a&&u[2]){if(void 0===l&&!(s in t))return!1}else{var f=new p;if(r)var h=r(l,c,s,t,e,f);if(!(void 0===h?y(c,l,3,r,f):h))return!1}}return!0}},{"./_Stack":15,"./_baseIsEqual":49}],53:[function(t,e,n){"use strict";e.exports=function(t){return t!=t}},{}],54:[function(t,e,n){"use strict";var r=t("./isFunction"),o=t("./_isMasked"),i=t("./isObject"),a=t("./_toSource"),u=/^\[object .+?Constructor\]$/,s=Function.prototype,l=Object.prototype,c=s.toString,f=l.hasOwnProperty,h=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(t){return!(!i(t)||o(t))&&(r(t)?h:u).test(a(t))}},{"./_isMasked":120,"./_toSource":157,"./isFunction":173,"./isObject":178}],55:[function(t,e,n){"use strict";var r=t("./_getTag"),o=t("./isObjectLike");e.exports=function(t){return o(t)&&"[object Set]"==r(t)}},{"./_getTag":105,"./isObjectLike":179}],56:[function(t,e,n){"use strict";var r=t("./_baseGetTag"),o=t("./isLength"),i=t("./isObjectLike"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},{"./_baseGetTag":43,"./isLength":174,"./isObjectLike":179}],57:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=t("./_baseMatches"),i=t("./_baseMatchesProperty"),a=t("./identity"),u=t("./isArray"),s=t("./property");e.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==r(t)?u(t)?i(t[0],t[1]):o(t):s(t)}},{"./_baseMatches":62,"./_baseMatchesProperty":63,"./identity":167,"./isArray":169,"./property":193}],58:[function(t,e,n){"use strict";var r=t("./_isPrototype"),o=t("./_nativeKeys"),i=Object.prototype.hasOwnProperty;e.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},{"./_isPrototype":121,"./_nativeKeys":137}],59:[function(t,e,n){"use strict";var o=t("./isObject"),i=t("./_isPrototype"),a=t("./_nativeKeysIn"),u=Object.prototype.hasOwnProperty;e.exports=function(t){if(!o(t))return a(t);var e=i(t),n=[];for(var r in t)("constructor"!=r||!e&&u.call(t,r))&&n.push(r);return n}},{"./_isPrototype":121,"./_nativeKeysIn":138,"./isObject":178}],60:[function(t,e,n){"use strict";e.exports=function(t,e){return t<e}},{}],61:[function(t,e,n){"use strict";var a=t("./_baseEach"),u=t("./isArrayLike");e.exports=function(t,r){var o=-1,i=u(t)?Array(t.length):[];return a(t,function(t,e,n){i[++o]=r(t,e,n)}),i}},{"./_baseEach":35,"./isArrayLike":170}],62:[function(t,e,n){"use strict";var r=t("./_baseIsMatch"),o=t("./_getMatchData"),i=t("./_matchesStrictComparable");e.exports=function(e){var n=o(e);return 1==n.length&&n[0][2]?i(n[0][0],n[0][1]):function(t){return t===e||r(t,e,n)}}},{"./_baseIsMatch":52,"./_getMatchData":99,"./_matchesStrictComparable":134}],63:[function(t,e,n){"use strict";var o=t("./_baseIsEqual"),i=t("./get"),a=t("./hasIn"),u=t("./_isKey"),s=t("./_isStrictComparable"),l=t("./_matchesStrictComparable"),c=t("./_toKey");e.exports=function(n,r){return u(n)&&s(r)?l(c(n),r):function(t){var e=i(t,n);return void 0===e&&e===r?a(t,n):o(r,e,3)}}},{"./_baseIsEqual":49,"./_isKey":118,"./_isStrictComparable":122,"./_matchesStrictComparable":134,"./_toKey":156,"./get":165,"./hasIn":166}],64:[function(t,e,n){"use strict";e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},{}],65:[function(t,e,n){"use strict";var r=t("./_baseGet");e.exports=function(e){return function(t){return r(t,e)}}},{"./_baseGet":41}],66:[function(t,e,n){"use strict";var f=t("./_arrayMap"),h=t("./_baseIndexOf"),p=t("./_baseIndexOfWith"),y=t("./_baseUnary"),d=t("./_copyArray"),v=Array.prototype.splice;e.exports=function(t,e,n,r){var o=r?p:h,i=-1,a=e.length,u=t;for(t===e&&(e=d(e)),n&&(u=f(t,y(n)));++i<a;)for(var s=0,l=e[i],c=n?n(l):l;-1<(s=o(u,c,s,r));)u!==t&&v.call(u,s,1),v.call(t,s,1);return t}},{"./_arrayMap":23,"./_baseIndexOf":46,"./_baseIndexOfWith":47,"./_baseUnary":73,"./_copyArray":84}],67:[function(t,e,n){"use strict";e.exports=function(t,r,o,i,e){return e(t,function(t,e,n){o=i?(i=!1,t):r(o,t,e,n)}),o}},{}],68:[function(t,e,n){"use strict";var r=t("./identity"),o=t("./_overRest"),i=t("./_setToString");e.exports=function(t,e){return i(o(t,e,r),t+"")}},{"./_overRest":142,"./_setToString":147,"./identity":167}],69:[function(t,e,n){"use strict";var r=t("./constant"),o=t("./_defineProperty"),i=t("./identity"),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;e.exports=a},{"./_defineProperty":91,"./constant":160,"./identity":167}],70:[function(t,e,n){"use strict";e.exports=function(t,e){for(var n,r=-1,o=t.length;++r<o;){var i=e(t[r]);void 0!==i&&(n=void 0===n?i:n+i)}return n}},{}],71:[function(t,e,n){"use strict";e.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},{}],72:[function(t,e,n){"use strict";var r=t("./_Symbol"),o=t("./_arrayMap"),i=t("./isArray"),a=t("./isSymbol"),u=1/0,s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-u?"-0":n}},{"./_Symbol":16,"./_arrayMap":23,"./isArray":169,"./isSymbol":182}],73:[function(t,e,n){"use strict";e.exports=function(e){return function(t){return e(t)}}},{}],74:[function(t,e,n){"use strict";var r=t("./_arrayMap");e.exports=function(e,t){return r(t,function(t){return e[t]})}},{"./_arrayMap":23}],75:[function(t,e,n){"use strict";e.exports=function(t,e){return t.has(e)}},{}],76:[function(t,e,n){"use strict";var r=t("./identity");e.exports=function(t){return"function"==typeof t?t:r}},{"./identity":167}],77:[function(t,e,n){"use strict";var r=t("./isArray"),o=t("./_isKey"),i=t("./_stringToPath"),a=t("./toString");e.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(a(t))}},{"./_isKey":118,"./_stringToPath":155,"./isArray":169,"./toString":204}],78:[function(t,e,n){"use strict";var r=t("./_Uint8Array");e.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},{"./_Uint8Array":17}],79:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=t("./_root"),i="object"==(void 0===n?"undefined":r(n))&&n&&!n.nodeType&&n,a=i&&"object"==(void 0===e?"undefined":r(e))&&e&&!e.nodeType&&e,u=a&&a.exports===i?o.Buffer:void 0,s=u?u.allocUnsafe:void 0;e.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}},{"./_root":143}],80:[function(t,e,n){"use strict";var r=t("./_cloneArrayBuffer");e.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},{"./_cloneArrayBuffer":78}],81:[function(t,e,n){"use strict";var r=/\w*$/;e.exports=function(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}},{}],82:[function(t,e,n){"use strict";var r=t("./_Symbol"),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;e.exports=function(t){return i?Object(i.call(t)):{}}},{"./_Symbol":16}],83:[function(t,e,n){"use strict";var r=t("./_cloneArrayBuffer");e.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},{"./_cloneArrayBuffer":78}],84:[function(t,e,n){"use strict";e.exports=function(t,e){var n=-1,r=t.length;for(e=e||Array(r);++n<r;)e[n]=t[n];return e}},{}],85:[function(t,e,n){"use strict";var l=t("./_assignValue"),c=t("./_baseAssignValue");e.exports=function(t,e,n,r){var o=!n;n=n||{};for(var i=-1,a=e.length;++i<a;){var u=e[i],s=r?r(n[u],t[u],u,n,t):void 0;void 0===s&&(s=t[u]),o?c(n,u,s):l(n,u,s)}return n}},{"./_assignValue":27,"./_baseAssignValue":31}],86:[function(t,e,n){"use strict";var r=t("./_copyObject"),o=t("./_getSymbols");e.exports=function(t,e){return r(t,o(t),e)}},{"./_copyObject":85,"./_getSymbols":103}],87:[function(t,e,n){"use strict";var r=t("./_copyObject"),o=t("./_getSymbolsIn");e.exports=function(t,e){return r(t,o(t),e)}},{"./_copyObject":85,"./_getSymbolsIn":104}],88:[function(t,e,n){"use strict";var r=t("./_root")["__core-js_shared__"];e.exports=r},{"./_root":143}],89:[function(t,e,n){"use strict";var u=t("./isArrayLike");e.exports=function(i,a){return function(t,e){if(null==t)return t;if(!u(t))return i(t,e);for(var n=t.length,r=a?n:-1,o=Object(t);(a?r--:++r<n)&&!1!==e(o[r],r,o););return t}}},{"./isArrayLike":170}],90:[function(t,e,n){"use strict";e.exports=function(s){return function(t,e,n){for(var r=-1,o=Object(t),i=n(t),a=i.length;a--;){var u=i[s?a:++r];if(!1===e(o[u],u,o))break}return t}}},{}],91:[function(t,e,n){"use strict";var r=t("./_getNative"),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();e.exports=o},{"./_getNative":100}],92:[function(t,e,n){"use strict";var v=t("./_SetCache"),m=t("./_arraySome"),b=t("./_cacheHas");e.exports=function(t,e,n,r,o,i){var a=1&n,u=t.length,s=e.length;if(u!=s&&!(a&&u<s))return!1;var l=i.get(t);if(l&&i.get(e))return l==e;var c=-1,f=!0,h=2&n?new v:void 0;for(i.set(t,e),i.set(e,t);++c<u;){var p=t[c],y=e[c];if(r)var d=a?r(y,p,c,e,t,i):r(p,y,c,t,e,i);if(void 0!==d){if(d)continue;f=!1;break}if(h){if(!m(e,function(t,e){if(!b(h,e)&&(p===t||o(p,t,n,r,i)))return h.push(e)})){f=!1;break}}else if(p!==y&&!o(p,y,n,r,i)){f=!1;break}}return i.delete(t),i.delete(e),f}},{"./_SetCache":14,"./_arraySome":26,"./_cacheHas":75}],93:[function(t,e,n){"use strict";var r=t("./_Symbol"),f=t("./_Uint8Array"),h=t("./eq"),p=t("./_equalArrays"),y=t("./_mapToArray"),d=t("./_setToArray"),o=r?r.prototype:void 0,v=o?o.valueOf:void 0;e.exports=function(t,e,n,r,o,i,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new f(t),new f(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return h(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=y;case"[object Set]":var s=1&r;if(u=u||d,t.size!=e.size&&!s)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=p(u(t),u(e),r,o,i,a);return a.delete(t),c;case"[object Symbol]":if(v)return v.call(t)==v.call(e)}return!1}},{"./_Symbol":16,"./_Uint8Array":17,"./_equalArrays":92,"./_mapToArray":133,"./_setToArray":146,"./eq":162}],94:[function(t,e,n){"use strict";var g=t("./_getAllKeys"),_=Object.prototype.hasOwnProperty;e.exports=function(t,e,n,r,o,i){var a=1&n,u=g(t),s=u.length;if(s!=g(e).length&&!a)return!1;for(var l=s;l--;){var c=u[l];if(!(a?c in e:_.call(e,c)))return!1}var f=i.get(t);if(f&&i.get(e))return f==e;var h=!0;i.set(t,e),i.set(e,t);for(var p=a;++l<s;){var y=t[c=u[l]],d=e[c];if(r)var v=a?r(d,y,c,e,t,i):r(y,d,c,t,e,i);if(!(void 0===v?y===d||o(y,d,n,r,i):v)){h=!1;break}p=p||"constructor"==c}if(h&&!p){var m=t.constructor,b=e.constructor;m!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b)&&(h=!1)}return i.delete(t),i.delete(e),h}},{"./_getAllKeys":96}],95:[function(t,r,e){(function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n="object"==(void 0===t?"undefined":e(t))&&t&&t.Object===Object&&t;r.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],96:[function(t,e,n){"use strict";var r=t("./_baseGetAllKeys"),o=t("./_getSymbols"),i=t("./keys");e.exports=function(t){return r(t,i,o)}},{"./_baseGetAllKeys":42,"./_getSymbols":103,"./keys":184}],97:[function(t,e,n){"use strict";var r=t("./_baseGetAllKeys"),o=t("./_getSymbolsIn"),i=t("./keysIn");e.exports=function(t){return r(t,i,o)}},{"./_baseGetAllKeys":42,"./_getSymbolsIn":104,"./keysIn":185}],98:[function(t,e,n){"use strict";var r=t("./_isKeyable");e.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},{"./_isKeyable":119}],99:[function(t,e,n){"use strict";var i=t("./_isStrictComparable"),a=t("./keys");e.exports=function(t){for(var e=a(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,i(o)]}return e}},{"./_isStrictComparable":122,"./keys":184}],100:[function(t,e,n){"use strict";var r=t("./_baseIsNative"),o=t("./_getValue");e.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},{"./_baseIsNative":54,"./_getValue":106}],101:[function(t,e,n){"use strict";var r=t("./_overArg")(Object.getPrototypeOf,Object);e.exports=r},{"./_overArg":141}],102:[function(t,e,n){"use strict";var r=t("./_Symbol"),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;e.exports=function(t){var e=i.call(t,u),n=t[u];try{var r=!(t[u]=void 0)}catch(t){}var o=a.call(t);return r&&(e?t[u]=n:delete t[u]),o}},{"./_Symbol":16}],103:[function(t,e,n){"use strict";var r=t("./_arrayFilter"),o=t("./stubArray"),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(e){return null==e?[]:(e=Object(e),r(a(e),function(t){return i.call(e,t)}))}:o;e.exports=u},{"./_arrayFilter":21,"./stubArray":198}],104:[function(t,e,n){"use strict";var r=t("./_arrayPush"),o=t("./_getPrototype"),i=t("./_getSymbols"),a=t("./stubArray"),u=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:a;e.exports=u},{"./_arrayPush":24,"./_getPrototype":101,"./_getSymbols":103,"./stubArray":198}],105:[function(t,e,n){"use strict";var r=t("./_DataView"),o=t("./_Map"),i=t("./_Promise"),a=t("./_Set"),u=t("./_WeakMap"),s=t("./_baseGetTag"),l=t("./_toSource"),c="[object Map]",f="[object Promise]",h="[object Set]",p="[object WeakMap]",y="[object DataView]",d=l(r),v=l(o),m=l(i),b=l(a),g=l(u),_=s;(r&&_(new r(new ArrayBuffer(1)))!=y||o&&_(new o)!=c||i&&_(i.resolve())!=f||a&&_(new a)!=h||u&&_(new u)!=p)&&(_=function(t){var e=s(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case d:return y;case v:return c;case m:return f;case b:return h;case g:return p}return e}),e.exports=_},{"./_DataView":7,"./_Map":10,"./_Promise":12,"./_Set":13,"./_WeakMap":18,"./_baseGetTag":43,"./_toSource":157}],106:[function(t,e,n){"use strict";e.exports=function(t,e){return null==t?void 0:t[e]}},{}],107:[function(t,e,n){"use strict";var u=t("./_castPath"),s=t("./isArguments"),l=t("./isArray"),c=t("./_isIndex"),f=t("./isLength"),h=t("./_toKey");e.exports=function(t,e,n){for(var r=-1,o=(e=u(e,t)).length,i=!1;++r<o;){var a=h(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&f(o)&&c(a,o)&&(l(t)||s(t))}},{"./_castPath":77,"./_isIndex":117,"./_toKey":156,"./isArguments":168,"./isArray":169,"./isLength":174}],108:[function(t,e,n){"use strict";var r=t("./_nativeCreate");e.exports=function(){this.__data__=r?r(null):{},this.size=0}},{"./_nativeCreate":136}],109:[function(t,e,n){"use strict";e.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},{}],110:[function(t,e,n){"use strict";var r=t("./_nativeCreate"),o=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(e,t)?e[t]:void 0}},{"./_nativeCreate":136}],111:[function(t,e,n){"use strict";var r=t("./_nativeCreate"),o=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},{"./_nativeCreate":136}],112:[function(t,e,n){"use strict";var r=t("./_nativeCreate");e.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},{"./_nativeCreate":136}],113:[function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty;e.exports=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&r.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},{}],114:[function(t,e,n){"use strict";var o=t("./_cloneArrayBuffer"),i=t("./_cloneDataView"),a=t("./_cloneRegExp"),u=t("./_cloneSymbol"),s=t("./_cloneTypedArray");e.exports=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return o(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return a(t);case"[object Set]":return new r;case"[object Symbol]":return u(t)}}},{"./_cloneArrayBuffer":78,"./_cloneDataView":80,"./_cloneRegExp":81,"./_cloneSymbol":82,"./_cloneTypedArray":83}],115:[function(t,e,n){"use strict";var r=t("./_baseCreate"),o=t("./_getPrototype"),i=t("./_isPrototype");e.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:r(o(t))}},{"./_baseCreate":34,"./_getPrototype":101,"./_isPrototype":121}],116:[function(t,e,n){"use strict";var r=t("./_Symbol"),o=t("./isArguments"),i=t("./isArray"),a=r?r.isConcatSpreadable:void 0;e.exports=function(t){return i(t)||o(t)||!!(a&&t&&t[a])}},{"./_Symbol":16,"./isArguments":168,"./isArray":169}],117:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=/^(?:0|[1-9]\d*)$/;e.exports=function(t,e){var n=r(t);return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&o.test(t))&&-1<t&&t%1==0&&t<e}},{}],118:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=t("./isArray"),i=t("./isSymbol"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/;e.exports=function(t,e){if(o(t))return!1;var n=r(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(u.test(t)||!a.test(t)||null!=e&&t in Object(e))}},{"./isArray":169,"./isSymbol":182}],119:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.exports=function(t){var e=r(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},{}],120:[function(t,e,n){"use strict";var r,o=t("./_coreJsData"),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(t){return!!i&&i in t}},{"./_coreJsData":88}],121:[function(t,e,n){"use strict";var r=Object.prototype;e.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},{}],122:[function(t,e,n){"use strict";var r=t("./isObject");e.exports=function(t){return t==t&&!r(t)}},{"./isObject":178}],123:[function(t,e,n){"use strict";e.exports=function(){this.__data__=[],this.size=0}},{}],124:[function(t,e,n){"use strict";var r=t("./_assocIndexOf"),o=Array.prototype.splice;e.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():o.call(e,n,1),--this.size,!0)}},{"./_assocIndexOf":28}],125:[function(t,e,n){"use strict";var r=t("./_assocIndexOf");e.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},{"./_assocIndexOf":28}],126:[function(t,e,n){"use strict";var r=t("./_assocIndexOf");e.exports=function(t){return-1<r(this.__data__,t)}},{"./_assocIndexOf":28}],127:[function(t,e,n){"use strict";var o=t("./_assocIndexOf");e.exports=function(t,e){var n=this.__data__,r=o(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},{"./_assocIndexOf":28}],128:[function(t,e,n){"use strict";var r=t("./_Hash"),o=t("./_ListCache"),i=t("./_Map");e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},{"./_Hash":8,"./_ListCache":9,"./_Map":10}],129:[function(t,e,n){"use strict";var r=t("./_getMapData");e.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},{"./_getMapData":98}],130:[function(t,e,n){"use strict";var r=t("./_getMapData");e.exports=function(t){return r(this,t).get(t)}},{"./_getMapData":98}],131:[function(t,e,n){"use strict";var r=t("./_getMapData");e.exports=function(t){return r(this,t).has(t)}},{"./_getMapData":98}],132:[function(t,e,n){"use strict";var o=t("./_getMapData");e.exports=function(t,e){var n=o(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},{"./_getMapData":98}],133:[function(t,e,n){"use strict";e.exports=function(t){var n=-1,r=Array(t.size);return t.forEach(function(t,e){r[++n]=[e,t]}),r}},{}],134:[function(t,e,n){"use strict";e.exports=function(e,n){return function(t){return null!=t&&(t[e]===n&&(void 0!==n||e in Object(t)))}}},{}],135:[function(t,e,n){"use strict";var r=t("./memoize");e.exports=function(t){var e=r(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}},{"./memoize":190}],136:[function(t,e,n){"use strict";var r=t("./_getNative")(Object,"create");e.exports=r},{"./_getNative":100}],137:[function(t,e,n){"use strict";var r=t("./_overArg")(Object.keys,Object);e.exports=r},{"./_overArg":141}],138:[function(t,e,n){"use strict";e.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},{}],139:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=t("./_freeGlobal"),i="object"==(void 0===n?"undefined":r(n))&&n&&!n.nodeType&&n,a=i&&"object"==(void 0===e?"undefined":r(e))&&e&&!e.nodeType&&e,u=a&&a.exports===i&&o.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();e.exports=s},{"./_freeGlobal":95}],140:[function(t,e,n){"use strict";var r=Object.prototype.toString;e.exports=function(t){return r.call(t)}},{}],141:[function(t,e,n){"use strict";e.exports=function(e,n){return function(t){return e(n(t))}}},{}],142:[function(t,e,n){"use strict";var s=t("./_apply"),l=Math.max;e.exports=function(i,a,u){return a=l(void 0===a?i.length-1:a,0),function(){for(var t=arguments,e=-1,n=l(t.length-a,0),r=Array(n);++e<n;)r[e]=t[a+e];e=-1;for(var o=Array(a+1);++e<a;)o[e]=t[e];return o[a]=u(r),s(i,this,o)}}},{"./_apply":19}],143:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=t("./_freeGlobal"),i="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,a=o||i||Function("return this")();e.exports=a},{"./_freeGlobal":95}],144:[function(t,e,n){"use strict";e.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},{}],145:[function(t,e,n){"use strict";e.exports=function(t){return this.__data__.has(t)}},{}],146:[function(t,e,n){"use strict";e.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},{}],147:[function(t,e,n){"use strict";var r=t("./_baseSetToString"),o=t("./_shortOut")(r);e.exports=o},{"./_baseSetToString":69,"./_shortOut":148}],148:[function(t,e,n){"use strict";var i=Date.now;e.exports=function(n){var r=0,o=0;return function(){var t=i(),e=16-(t-o);if(o=t,0<e){if(800<=++r)return arguments[0]}else r=0;return n.apply(void 0,arguments)}}},{}],149:[function(t,e,n){"use strict";var r=t("./_ListCache");e.exports=function(){this.__data__=new r,this.size=0}},{"./_ListCache":9}],150:[function(t,e,n){"use strict";e.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},{}],151:[function(t,e,n){"use strict";e.exports=function(t){return this.__data__.get(t)}},{}],152:[function(t,e,n){"use strict";e.exports=function(t){return this.__data__.has(t)}},{}],153:[function(t,e,n){"use strict";var o=t("./_ListCache"),i=t("./_Map"),a=t("./_MapCache");e.exports=function(t,e){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!i||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(t,e),this.size=n.size,this}},{"./_ListCache":9,"./_Map":10,"./_MapCache":11}],154:[function(t,e,n){"use strict";e.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},{}],155:[function(t,e,n){"use strict";var r=t("./_memoizeCapped"),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(i,function(t,e,n,r){o.push(n?r.replace(a,"$1"):e||t)}),o});e.exports=o},{"./_memoizeCapped":135}],156:[function(t,e,n){"use strict";var r=t("./isSymbol");e.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},{"./isSymbol":182}],157:[function(t,e,n){"use strict";var r=Function.prototype.toString;e.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},{}],158:[function(t,e,n){"use strict";var r=t("./_baseClamp"),o=t("./toNumber");e.exports=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=o(n))==n?n:0),void 0!==e&&(e=(e=o(e))==e?e:0),r(o(t),e,n)}},{"./_baseClamp":32,"./toNumber":203}],159:[function(t,e,n){"use strict";var r=t("./_baseClone");e.exports=function(t){return r(t,5)}},{"./_baseClone":33}],160:[function(t,e,n){"use strict";e.exports=function(t){return function(){return t}}},{}],161:[function(t,e,n){"use strict";e.exports=function(t,e){return null==t||t!=t?e:t}},{}],162:[function(t,e,n){"use strict";e.exports=function(t,e){return t===e||t!=t&&e!=e}},{}],163:[function(t,e,n){"use strict";var r=t("./_baseFlatten");e.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},{"./_baseFlatten":38}],164:[function(t,e,n){"use strict";var r=t("./_baseFor"),o=t("./_castFunction"),i=t("./keysIn");e.exports=function(t,e){return null==t?t:r(t,o(e),i)}},{"./_baseFor":39,"./_castFunction":76,"./keysIn":185}],165:[function(t,e,n){"use strict";var o=t("./_baseGet");e.exports=function(t,e,n){var r=null==t?void 0:o(t,e);return void 0===r?n:r}},{"./_baseGet":41}],166:[function(t,e,n){"use strict";var r=t("./_baseHasIn"),o=t("./_hasPath");e.exports=function(t,e){return null!=t&&o(t,e,r)}},{"./_baseHasIn":45,"./_hasPath":107}],167:[function(t,e,n){"use strict";e.exports=function(t){return t}},{}],168:[function(t,e,n){"use strict";var r=t("./_baseIsArguments"),o=t("./isObjectLike"),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!u.call(t,"callee")};e.exports=s},{"./_baseIsArguments":48,"./isObjectLike":179}],169:[function(t,e,n){"use strict";var r=Array.isArray;e.exports=r},{}],170:[function(t,e,n){"use strict";var r=t("./isFunction"),o=t("./isLength");e.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},{"./isFunction":173,"./isLength":174}],171:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=t("./_root"),i=t("./stubFalse"),a="object"==(void 0===n?"undefined":r(n))&&n&&!n.nodeType&&n,u=a&&"object"==(void 0===e?"undefined":r(e))&&e&&!e.nodeType&&e,s=u&&u.exports===a?o.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},{"./_root":143,"./stubFalse":199}],172:[function(t,e,n){"use strict";var r=t("./_baseKeys"),o=t("./_getTag"),i=t("./isArguments"),a=t("./isArray"),u=t("./isArrayLike"),s=t("./isBuffer"),l=t("./_isPrototype"),c=t("./isTypedArray"),f=Object.prototype.hasOwnProperty;e.exports=function(t){if(null==t)return!0;if(u(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||s(t)||c(t)||i(t)))return!t.length;var e=o(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(l(t))return!r(t).length;for(var n in t)if(f.call(t,n))return!1;return!0}},{"./_baseKeys":58,"./_getTag":105,"./_isPrototype":121,"./isArguments":168,"./isArray":169,"./isArrayLike":170,"./isBuffer":171,"./isTypedArray":183}],173:[function(t,e,n){"use strict";var r=t("./_baseGetTag"),o=t("./isObject");e.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},{"./_baseGetTag":43,"./isObject":178}],174:[function(t,e,n){"use strict";e.exports=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}},{}],175:[function(t,e,n){"use strict";var r=t("./_baseIsMap"),o=t("./_baseUnary"),i=t("./_nodeUtil"),a=i&&i.isMap,u=a?o(a):r;e.exports=u},{"./_baseIsMap":51,"./_baseUnary":73,"./_nodeUtil":139}],176:[function(t,e,n){"use strict";e.exports=function(t){return null==t}},{}],177:[function(t,e,n){"use strict";var r=t("./_baseGetTag"),o=t("./isObjectLike");e.exports=function(t){return"number"==typeof t||o(t)&&"[object Number]"==r(t)}},{"./_baseGetTag":43,"./isObjectLike":179}],178:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.exports=function(t){var e=r(t);return null!=t&&("object"==e||"function"==e)}},{}],179:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.exports=function(t){return null!=t&&"object"==r(t)}},{}],180:[function(t,e,n){"use strict";var r=t("./_baseIsSet"),o=t("./_baseUnary"),i=t("./_nodeUtil"),a=i&&i.isSet,u=a?o(a):r;e.exports=u},{"./_baseIsSet":55,"./_baseUnary":73,"./_nodeUtil":139}],181:[function(t,e,n){"use strict";var r=t("./_baseGetTag"),o=t("./isArray"),i=t("./isObjectLike");e.exports=function(t){return"string"==typeof t||!o(t)&&i(t)&&"[object String]"==r(t)}},{"./_baseGetTag":43,"./isArray":169,"./isObjectLike":179}],182:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=t("./_baseGetTag"),i=t("./isObjectLike");e.exports=function(t){return"symbol"==r(t)||i(t)&&"[object Symbol]"==o(t)}},{"./_baseGetTag":43,"./isObjectLike":179}],183:[function(t,e,n){"use strict";var r=t("./_baseIsTypedArray"),o=t("./_baseUnary"),i=t("./_nodeUtil"),a=i&&i.isTypedArray,u=a?o(a):r;e.exports=u},{"./_baseIsTypedArray":56,"./_baseUnary":73,"./_nodeUtil":139}],184:[function(t,e,n){"use strict";var r=t("./_arrayLikeKeys"),o=t("./_baseKeys"),i=t("./isArrayLike");e.exports=function(t){return i(t)?r(t):o(t)}},{"./_arrayLikeKeys":22,"./_baseKeys":58,"./isArrayLike":170}],185:[function(t,e,n){"use strict";var r=t("./_arrayLikeKeys"),o=t("./_baseKeysIn"),i=t("./isArrayLike");e.exports=function(t){return i(t)?r(t,!0):o(t)}},{"./_arrayLikeKeys":22,"./_baseKeysIn":59,"./isArrayLike":170}],186:[function(t,U,B){(function(N){"use strict";function xs(t){return(xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}(function(){var ra,oa="Expected a function",ia="__lodash_hash_undefined__",aa="__lodash_placeholder__",ua=9007199254740991,sa=NaN,la=4294967295,ca=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],fa="[object Arguments]",ha="[object Array]",pa="[object Boolean]",ya="[object Date]",da="[object Error]",va="[object Function]",ma="[object GeneratorFunction]",ba="[object Map]",ga="[object Number]",_a="[object Object]",xa="[object Promise]",wa="[object RegExp]",Oa="[object Set]",Sa="[object String]",Ta="[object Symbol]",Ea="[object WeakMap]",Pa="[object ArrayBuffer]",ja="[object DataView]",ka="[object Float32Array]",Ca="[object Float64Array]",Aa="[object Int8Array]",Ra="[object Int16Array]",Ma="[object Int32Array]",La="[object Uint8Array]",Da="[object Uint8ClampedArray]",Ia="[object Uint16Array]",Fa="[object Uint32Array]",za=/\b__p \+= '';/g,Na=/\b(__p \+=) '' \+/g,Ua=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ba=/&(?:amp|lt|gt|quot|#39);/g,qa=/[&<>"']/g,Wa=RegExp(Ba.source),Ha=RegExp(qa.source),Va=/<%-([\s\S]+?)%>/g,Ga=/<%([\s\S]+?)%>/g,Za=/<%=([\s\S]+?)%>/g,Xa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ya=/^\w*$/,Ka=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$a=/[\\^$.*+?()[\]{}|]/g,Ja=RegExp($a.source),Qa=/^\s+|\s+$/g,tu=/^\s+/,eu=/\s+$/,nu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ru=/\{\n\/\* \[wrapped with (.+)\] \*/,ou=/,? & /,iu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,au=/\\(\\)?/g,uu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,su=/\w*$/,lu=/^[-+]0x[0-9a-f]+$/i,cu=/^0b[01]+$/i,fu=/^\[object .+?Constructor\]$/,hu=/^0o[0-7]+$/i,pu=/^(?:0|[1-9]\d*)$/,yu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,du=/($^)/,vu=/['\n\r\u2028\u2029\\]/g,t="\\ud800-\\udfff",e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",n="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",o="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\ufe0e\\ufe0f",a="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",u="["+t+"]",s="["+a+"]",l="["+e+"]",c="\\d+",f="["+n+"]",h="["+r+"]",p="[^"+t+a+c+n+r+o+"]",y="\\ud83c[\\udffb-\\udfff]",d="[^"+t+"]",v="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",b="["+o+"]",g="(?:"+h+"|"+p+")",_="(?:"+b+"|"+p+")",x="(?:['â](?:d|ll|m|re|s|t|ve))?",w="(?:['â](?:D|LL|M|RE|S|T|VE))?",O="(?:"+l+"|"+y+")"+"?",S="["+i+"]?",T=S+O+("(?:\\u200d(?:"+[d,v,m].join("|")+")"+S+O+")*"),E="(?:"+[f,v,m].join("|")+")"+T,P="(?:"+[d+l+"?",l,v,m,u].join("|")+")",mu=RegExp("['â]","g"),bu=RegExp(l,"g"),j=RegExp(y+"(?="+y+")|"+P+T,"g"),gu=RegExp([b+"?"+h+"+"+x+"(?="+[s,b,"$"].join("|")+")",_+"+"+w+"(?="+[s,b+g,"$"].join("|")+")",b+"?"+g+"+"+x,b+"+"+w,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",c,E].join("|"),"g"),k=RegExp("[\\u200d"+t+e+i+"]"),_u=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wu=-1,Ou={};Ou[ka]=Ou[Ca]=Ou[Aa]=Ou[Ra]=Ou[Ma]=Ou[La]=Ou[Da]=Ou[Ia]=Ou[Fa]=!0,Ou[fa]=Ou[ha]=Ou[Pa]=Ou[pa]=Ou[ja]=Ou[ya]=Ou[da]=Ou[va]=Ou[ba]=Ou[ga]=Ou[_a]=Ou[wa]=Ou[Oa]=Ou[Sa]=Ou[Ea]=!1;var Su={};Su[fa]=Su[ha]=Su[Pa]=Su[ja]=Su[pa]=Su[ya]=Su[ka]=Su[Ca]=Su[Aa]=Su[Ra]=Su[Ma]=Su[ba]=Su[ga]=Su[_a]=Su[wa]=Su[Oa]=Su[Sa]=Su[Ta]=Su[La]=Su[Da]=Su[Ia]=Su[Fa]=!0,Su[da]=Su[va]=Su[Ea]=!1;var C={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Tu=parseFloat,Eu=parseInt,A="object"==(void 0===N?"undefined":xs(N))&&N&&N.Object===Object&&N,R="object"==("undefined"==typeof self?"undefined":xs(self))&&self&&self.Object===Object&&self,Pu=A||R||Function("return this")(),M="object"==(void 0===B?"undefined":xs(B))&&B&&!B.nodeType&&B,L=M&&"object"==(void 0===U?"undefined":xs(U))&&U&&!U.nodeType&&U,ju=L&&L.exports===M,D=ju&&A.process,I=function(){try{var t=L&&L.require&&L.require("util").types;return t||D&&D.binding&&D.binding("util")}catch(t){}}(),ku=I&&I.isArrayBuffer,Cu=I&&I.isDate,Au=I&&I.isMap,Ru=I&&I.isRegExp,Mu=I&&I.isSet,Lu=I&&I.isTypedArray;function Du(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Iu(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var a=t[o];e(r,a,n(a),t)}return r}function Fu(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function zu(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Nu(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Uu(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}function Bu(t,e){return!!(null==t?0:t.length)&&-1<Ku(t,e,0)}function qu(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function Wu(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function Hu(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function Vu(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function Gu(t,e,n,r){var o=null==t?0:t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function Zu(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var F=ts("length");function Xu(t,r,e){var o;return e(t,function(t,e,n){if(r(t,e,n))return o=e,!1}),o}function Yu(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function Ku(t,e,n){return e==e?function(t,e,n){var r=n-1,o=t.length;for(;++r<o;)if(t[r]===e)return r;return-1}(t,e,n):Yu(t,Ju,n)}function $u(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}function Ju(t){return t!=t}function Qu(t,e){var n=null==t?0:t.length;return n?ns(t,e)/n:sa}function ts(e){return function(t){return null==t?ra:t[e]}}function z(e){return function(t){return null==e?ra:e[t]}}function es(t,r,o,i,e){return e(t,function(t,e,n){o=i?(i=!1,t):r(o,t,e,n)}),o}function ns(t,e){for(var n,r=-1,o=t.length;++r<o;){var i=e(t[r]);i!==ra&&(n=n===ra?i:n+i)}return n}function rs(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function os(e){return function(t){return e(t)}}function is(e,t){return Wu(t,function(t){return e[t]})}function as(t,e){return t.has(e)}function us(t,e){for(var n=-1,r=t.length;++n<r&&-1<Ku(e,t[n],0););return n}function ss(t,e){for(var n=t.length;n--&&-1<Ku(e,t[n],0););return n}var ls=z({"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"}),cs=z({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function fs(t){return"\\"+C[t]}function hs(t){return k.test(t)}function ps(t){var n=-1,r=Array(t.size);return t.forEach(function(t,e){r[++n]=[e,t]}),r}function ys(e,n){return function(t){return e(n(t))}}function ds(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n];a!==e&&a!==aa||(t[n]=aa,i[o++]=n)}return i}function vs(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function ms(t){return hs(t)?function(t){var e=j.lastIndex=0;for(;j.test(t);)++e;return e}(t):F(t)}function bs(t){return hs(t)?function(t){return t.match(j)||[]}(t):function(t){return t.split("")}(t)}var gs=z({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var _s=function t(e){var n,T=(e=null==e?Pu:_s.defaults(Pu.Object(),e,_s.pick(Pu,xu))).Array,r=e.Date,o=e.Error,v=e.Function,i=e.Math,d=e.Object,m=e.RegExp,c=e.String,b=e.TypeError,a=T.prototype,u=v.prototype,f=d.prototype,s=e["__core-js_shared__"],l=u.toString,_=f.hasOwnProperty,h=0,p=(n=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",y=f.toString,g=l.call(d),x=Pu._,w=m("^"+l.call(_).replace($a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),O=ju?e.Buffer:ra,S=e.Symbol,E=e.Uint8Array,P=O?O.allocUnsafe:ra,j=ys(d.getPrototypeOf,d),k=d.create,C=f.propertyIsEnumerable,A=a.splice,R=S?S.isConcatSpreadable:ra,M=S?S.iterator:ra,L=S?S.toStringTag:ra,D=function(){try{var t=Bn(d,"defineProperty");return t({},"",{}),t}catch(t){}}(),I=e.clearTimeout!==Pu.clearTimeout&&e.clearTimeout,F=r&&r.now!==Pu.Date.now&&r.now,z=e.setTimeout!==Pu.setTimeout&&e.setTimeout,N=i.ceil,U=i.floor,B=d.getOwnPropertySymbols,q=O?O.isBuffer:ra,W=e.isFinite,H=a.join,V=ys(d.keys,d),G=i.max,Z=i.min,X=r.now,Y=e.parseInt,K=i.random,$=a.reverse,J=Bn(e,"DataView"),Q=Bn(e,"Map"),tt=Bn(e,"Promise"),et=Bn(e,"Set"),nt=Bn(e,"WeakMap"),rt=Bn(d,"create"),ot=nt&&new nt,it={},at=dr(J),ut=dr(Q),st=dr(tt),lt=dr(et),ct=dr(nt),ft=S?S.prototype:ra,ht=ft?ft.valueOf:ra,pt=ft?ft.toString:ra;function yt(t){if(Mo(t)&&!wo(t)&&!(t instanceof gt)){if(t instanceof bt)return t;if(_.call(t,"__wrapped__"))return vr(t)}return new bt(t)}var dt=function(t){if(!Ro(t))return{};if(k)return k(t);vt.prototype=t;var e=new vt;return vt.prototype=ra,e};function vt(){}function mt(){}function bt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=ra}function gt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=la,this.__views__=[]}function _t(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function xt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ot(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new wt;++e<n;)this.add(t[e])}function St(t){var e=this.__data__=new xt(t);this.size=e.size}function Tt(t,e){var n=wo(t),r=!n&&xo(t),o=!n&&!r&&Eo(t),i=!n&&!r&&!o&&Bo(t),a=n||r||o||i,u=a?rs(t.length,c):[],s=u.length;for(var l in t)!e&&!_.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Xn(l,s))||u.push(l);return u}function Et(t){var e=t.length;return e?t[Oe(0,e-1)]:ra}function Pt(t,e){return cr(on(t),It(e,0,t.length))}function jt(t){return cr(on(t))}function kt(t,e,n){(n===ra||bo(t[e],n))&&(n!==ra||e in t)||Lt(t,e,n)}function Ct(t,e,n){var r=t[e];_.call(t,e)&&bo(r,n)&&(n!==ra||e in t)||Lt(t,e,n)}function At(t,e){for(var n=t.length;n--;)if(bo(t[n][0],e))return n;return-1}function Rt(t,r,o,i){return Bt(t,function(t,e,n){r(i,t,o(t),n)}),i}function Mt(t,e){return t&&an(e,li(e),t)}function Lt(t,e,n){"__proto__"==e&&D?D(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Dt(t,e){for(var n=-1,r=e.length,o=T(r),i=null==t;++n<r;)o[n]=i?ra:oi(t,e[n]);return o}function It(t,e,n){return t==t&&(n!==ra&&(t=t<=n?t:n),e!==ra&&(t=e<=t?t:e)),t}function Ft(n,r,o,t,e,i){var a,u=1&r,s=2&r,l=4&r;if(o&&(a=e?o(n,t,e,i):o(n)),a!==ra)return a;if(!Ro(n))return n;var c=wo(n);if(c){if(a=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&_.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(n),!u)return on(n,a)}else{var f=Hn(n),h=f==va||f==ma;if(Eo(n))return Je(n,u);if(f==_a||f==fa||h&&!e){if(a=s||h?{}:Gn(n),!u)return s?function(t,e){return an(t,Wn(t),e)}(n,function(t,e){return t&&an(e,ci(e),t)}(a,n)):function(t,e){return an(t,qn(t),e)}(n,Mt(a,n))}else{if(!Su[f])return e?n:{};a=function(t,e,n){var r=t.constructor;switch(e){case Pa:return Qe(t);case pa:case ya:return new r(+t);case ja:return function(t,e){var n=e?Qe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ka:case Ca:case Aa:case Ra:case Ma:case La:case Da:case Ia:case Fa:return tn(t,n);case ba:return new r;case ga:case Sa:return new r(t);case wa:return function(t){var e=new t.constructor(t.source,su.exec(t));return e.lastIndex=t.lastIndex,e}(t);case Oa:return new r;case Ta:return function(t){return ht?d(ht.call(t)):{}}(t)}}(n,f,u)}}var p=(i=i||new St).get(n);if(p)return p;i.set(n,a),zo(n)?n.forEach(function(t){a.add(Ft(t,r,o,t,n,i))}):Lo(n)&&n.forEach(function(t,e){a.set(e,Ft(t,r,o,e,n,i))});var y=c?ra:(l?s?Ln:Mn:s?ci:li)(n);return Fu(y||n,function(t,e){y&&(t=n[e=t]),Ct(a,e,Ft(t,r,o,e,n,i))}),a}function zt(t,e,n){var r=n.length;if(null==t)return!r;for(t=d(t);r--;){var o=n[r],i=e[o],a=t[o];if(a===ra&&!(o in t)||!i(a))return!1}return!0}function Nt(t,e,n){if("function"!=typeof t)throw new b(oa);return ar(function(){t.apply(ra,n)},e)}function Ut(t,e,n,r){var o=-1,i=Bu,a=!0,u=t.length,s=[],l=e.length;if(!u)return s;n&&(e=Wu(e,os(n))),r?(i=qu,a=!1):200<=e.length&&(i=as,a=!1,e=new Ot(e));t:for(;++o<u;){var c=t[o],f=null==n?c:n(c);if(c=r||0!==c?c:0,a&&f==f){for(var h=l;h--;)if(e[h]===f)continue t;s.push(c)}else i(e,f,r)||s.push(c)}return s}yt.templateSettings={escape:Va,evaluate:Ga,interpolate:Za,variable:"",imports:{_:yt}},(yt.prototype=mt.prototype).constructor=yt,(bt.prototype=dt(mt.prototype)).constructor=bt,(gt.prototype=dt(mt.prototype)).constructor=gt,_t.prototype.clear=function(){this.__data__=rt?rt(null):{},this.size=0},_t.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},_t.prototype.get=function(t){var e=this.__data__;if(rt){var n=e[t];return n===ia?ra:n}return _.call(e,t)?e[t]:ra},_t.prototype.has=function(t){var e=this.__data__;return rt?e[t]!==ra:_.call(e,t)},_t.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=rt&&e===ra?ia:e,this},xt.prototype.clear=function(){this.__data__=[],this.size=0},xt.prototype.delete=function(t){var e=this.__data__,n=At(e,t);return!(n<0)&&(n==e.length-1?e.pop():A.call(e,n,1),--this.size,!0)},xt.prototype.get=function(t){var e=this.__data__,n=At(e,t);return n<0?ra:e[n][1]},xt.prototype.has=function(t){return-1<At(this.__data__,t)},xt.prototype.set=function(t,e){var n=this.__data__,r=At(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},wt.prototype.clear=function(){this.size=0,this.__data__={hash:new _t,map:new(Q||xt),string:new _t}},wt.prototype.delete=function(t){var e=Nn(this,t).delete(t);return this.size-=e?1:0,e},wt.prototype.get=function(t){return Nn(this,t).get(t)},wt.prototype.has=function(t){return Nn(this,t).has(t)},wt.prototype.set=function(t,e){var n=Nn(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Ot.prototype.add=Ot.prototype.push=function(t){return this.__data__.set(t,ia),this},Ot.prototype.has=function(t){return this.__data__.has(t)},St.prototype.clear=function(){this.__data__=new xt,this.size=0},St.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},St.prototype.get=function(t){return this.__data__.get(t)},St.prototype.has=function(t){return this.__data__.has(t)},St.prototype.set=function(t,e){var n=this.__data__;if(n instanceof xt){var r=n.__data__;if(!Q||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new wt(r)}return n.set(t,e),this.size=n.size,this};var Bt=ln(Yt),qt=ln(Kt,!0);function Wt(t,r){var o=!0;return Bt(t,function(t,e,n){return o=!!r(t,e,n)}),o}function Ht(t,e,n){for(var r=-1,o=t.length;++r<o;){var i=t[r],a=e(i);if(null!=a&&(u===ra?a==a&&!Uo(a):n(a,u)))var u=a,s=i}return s}function Vt(t,r){var o=[];return Bt(t,function(t,e,n){r(t,e,n)&&o.push(t)}),o}function Gt(t,e,n,r,o){var i=-1,a=t.length;for(n=n||Zn,o=o||[];++i<a;){var u=t[i];0<e&&n(u)?1<e?Gt(u,e-1,n,r,o):Hu(o,u):r||(o[o.length]=u)}return o}var Zt=cn(),Xt=cn(!0);function Yt(t,e){return t&&Zt(t,e,li)}function Kt(t,e){return t&&Xt(t,e,li)}function $t(e,t){return Uu(t,function(t){return ko(e[t])})}function Jt(t,e){for(var n=0,r=(e=Xe(e,t)).length;null!=t&&n<r;)t=t[yr(e[n++])];return n&&n==r?t:ra}function Qt(t,e,n){var r=e(t);return wo(t)?r:Hu(r,n(t))}function te(t){return null==t?t===ra?"[object Undefined]":"[object Null]":L&&L in d(t)?function(t){var e=_.call(t,L),n=t[L];try{t[L]=ra;var r=!0}catch(t){}var o=y.call(t);r&&(e?t[L]=n:delete t[L]);return o}(t):function(t){return y.call(t)}(t)}function ee(t,e){return e<t}function ne(t,e){return null!=t&&_.call(t,e)}function re(t,e){return null!=t&&e in d(t)}function oe(t,e,n){for(var r=n?qu:Bu,o=t[0].length,i=t.length,a=i,u=T(i),s=1/0,l=[];a--;){var c=t[a];a&&e&&(c=Wu(c,os(e))),s=Z(c.length,s),u[a]=!n&&(e||120<=o&&120<=c.length)?new Ot(a&&c):ra}c=t[0];var f=-1,h=u[0];t:for(;++f<o&&l.length<s;){var p=c[f],y=e?e(p):p;if(p=n||0!==p?p:0,!(h?as(h,y):r(l,y,n))){for(a=i;--a;){var d=u[a];if(!(d?as(d,y):r(t[a],y,n)))continue t}h&&h.push(y),l.push(p)}}return l}function ie(t,e,n){var r=null==(t=rr(t,e=Xe(e,t)))?t:t[yr(Pr(e))];return null==r?ra:Du(r,t,n)}function ae(t){return Mo(t)&&te(t)==fa}function ue(t,e,n,r,o){return t===e||(null==t||null==e||!Mo(t)&&!Mo(e)?t!=t&&e!=e:function(t,e,n,r,o,i){var a=wo(t),u=wo(e),s=a?ha:Hn(t),l=u?ha:Hn(e),c=(s=s==fa?_a:s)==_a,f=(l=l==fa?_a:l)==_a,h=s==l;if(h&&Eo(t)){if(!Eo(e))return!1;c=!(a=!0)}if(h&&!c)return i=i||new St,a||Bo(t)?An(t,e,n,r,o,i):function(t,e,n,r,o,i,a){switch(n){case ja:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Pa:return!(t.byteLength!=e.byteLength||!i(new E(t),new E(e)));case pa:case ya:case ga:return bo(+t,+e);case da:return t.name==e.name&&t.message==e.message;case wa:case Sa:return t==e+"";case ba:var u=ps;case Oa:var s=1&r;if(u=u||vs,t.size!=e.size&&!s)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=An(u(t),u(e),r,o,i,a);return a.delete(t),c;case Ta:if(ht)return ht.call(t)==ht.call(e)}return!1}(t,e,s,n,r,o,i);if(!(1&n)){var p=c&&_.call(t,"__wrapped__"),y=f&&_.call(e,"__wrapped__");if(p||y){var d=p?t.value():t,v=y?e.value():e;return i=i||new St,o(d,v,n,r,i)}}return h&&(i=i||new St,function(t,e,n,r,o,i){var a=1&n,u=Mn(t),s=u.length,l=Mn(e).length;if(s!=l&&!a)return!1;var c=s;for(;c--;){var f=u[c];if(!(a?f in e:_.call(e,f)))return!1}var h=i.get(t);if(h&&i.get(e))return h==e;var p=!0;i.set(t,e),i.set(e,t);var y=a;for(;++c<s;){f=u[c];var d=t[f],v=e[f];if(r)var m=a?r(v,d,f,e,t,i):r(d,v,f,t,e,i);if(!(m===ra?d===v||o(d,v,n,r,i):m)){p=!1;break}y=y||"constructor"==f}if(p&&!y){var b=t.constructor,g=e.constructor;b!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof g&&g instanceof g)&&(p=!1)}return i.delete(t),i.delete(e),p}(t,e,n,r,o,i))}(t,e,n,r,ue,o))}function se(t,e,n,r){var o=n.length,i=o,a=!r;if(null==t)return!i;for(t=d(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){var s=(u=n[o])[0],l=t[s],c=u[1];if(a&&u[2]){if(l===ra&&!(s in t))return!1}else{var f=new St;if(r)var h=r(l,c,s,t,e,f);if(!(h===ra?ue(c,l,3,r,f):h))return!1}}return!0}function le(t){return!(!Ro(t)||function(t){return!!p&&p in t}(t))&&(ko(t)?w:fu).test(dr(t))}function ce(t){return"function"==typeof t?t:null==t?Di:"object"==xs(t)?wo(t)?ve(t[0],t[1]):de(t):Hi(t)}function fe(t){if(!Qn(t))return V(t);var e=[];for(var n in d(t))_.call(t,n)&&"constructor"!=n&&e.push(n);return e}function he(t){if(!Ro(t))return function(t){var e=[];if(null!=t)for(var n in d(t))e.push(n);return e}(t);var e=Qn(t),n=[];for(var r in t)("constructor"!=r||!e&&_.call(t,r))&&n.push(r);return n}function pe(t,e){return t<e}function ye(t,r){var o=-1,i=So(t)?T(t.length):[];return Bt(t,function(t,e,n){i[++o]=r(t,e,n)}),i}function de(e){var n=Un(e);return 1==n.length&&n[0][2]?er(n[0][0],n[0][1]):function(t){return t===e||se(t,e,n)}}function ve(n,r){return Kn(n)&&tr(r)?er(yr(n),r):function(t){var e=oi(t,n);return e===ra&&e===r?ii(t,n):ue(r,e,3)}}function me(r,o,i,a,u){r!==o&&Zt(o,function(t,e){if(u=u||new St,Ro(t))!function(t,e,n,r,o,i,a){var u=or(t,n),s=or(e,n),l=a.get(s);if(l)return kt(t,n,l);var c=i?i(u,s,n+"",t,e,a):ra,f=c===ra;if(f){var h=wo(s),p=!h&&Eo(s),y=!h&&!p&&Bo(s);c=s,h||p||y?c=wo(u)?u:To(u)?on(u):p?Je(s,!(f=!1)):y?tn(s,!(f=!1)):[]:Io(s)||xo(s)?xo(c=u)?c=Yo(u):Ro(u)&&!ko(u)||(c=Gn(s)):f=!1}f&&(a.set(s,c),o(c,s,r,i,a),a.delete(s));kt(t,n,c)}(r,o,e,i,me,a,u);else{var n=a?a(or(r,e),t,e+"",r,o,u):ra;n===ra&&(n=t),kt(r,e,n)}},ci)}function be(t,e){var n=t.length;if(n)return Xn(e+=e<0?n:0,n)?t[e]:ra}function ge(t,r,n){var o=-1;return r=Wu(r.length?r:[Di],os(zn())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(ye(t,function(e,t,n){return{criteria:Wu(r,function(t){return t(e)}),index:++o,value:e}}),function(t,e){return function(t,e,n){var r=-1,o=t.criteria,i=e.criteria,a=o.length,u=n.length;for(;++r<a;){var s=en(o[r],i[r]);if(s){if(u<=r)return s;var l=n[r];return s*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)})}function _e(t,e,n){for(var r=-1,o=e.length,i={};++r<o;){var a=e[r],u=Jt(t,a);n(u,a)&&je(i,Xe(a,t),u)}return i}function xe(t,e,n,r){var o=r?$u:Ku,i=-1,a=e.length,u=t;for(t===e&&(e=on(e)),n&&(u=Wu(t,os(n)));++i<a;)for(var s=0,l=e[i],c=n?n(l):l;-1<(s=o(u,c,s,r));)u!==t&&A.call(u,s,1),A.call(t,s,1);return t}function we(t,e){for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];if(n==r||o!==i){var i=o;Xn(o)?A.call(t,o,1):Ue(t,o)}}return t}function Oe(t,e){return t+U(K()*(e-t+1))}function Se(t,e){var n="";if(!t||e<1||ua<e)return n;for(;e%2&&(n+=t),(e=U(e/2))&&(t+=t),e;);return n}function Te(t,e){return ur(nr(t,e,Di),t+"")}function Ee(t){return Et(bi(t))}function Pe(t,e){var n=bi(t);return cr(n,It(e,0,n.length))}function je(t,e,n,r){if(!Ro(t))return t;for(var o=-1,i=(e=Xe(e,t)).length,a=i-1,u=t;null!=u&&++o<i;){var s=yr(e[o]),l=n;if(o!=a){var c=u[s];(l=r?r(c,s,u):ra)===ra&&(l=Ro(c)?c:Xn(e[o+1])?[]:{})}Ct(u,s,l),u=u[s]}return t}var ke=ot?function(t,e){return ot.set(t,e),t}:Di,Ce=D?function(t,e){return D(t,"toString",{configurable:!0,enumerable:!1,value:Ri(e),writable:!0})}:Di;function Ae(t){return cr(bi(t))}function Re(t,e,n){var r=-1,o=t.length;e<0&&(e=o<-e?0:o+e),(n=o<n?o:n)<0&&(n+=o),o=n<e?0:n-e>>>0,e>>>=0;for(var i=T(o);++r<o;)i[r]=t[r+e];return i}function Me(t,r){var o;return Bt(t,function(t,e,n){return!(o=r(t,e,n))}),!!o}function Le(t,e,n){var r=0,o=null==t?r:t.length;if("number"==typeof e&&e==e&&o<=2147483647){for(;r<o;){var i=r+o>>>1,a=t[i];null!==a&&!Uo(a)&&(n?a<=e:a<e)?r=1+i:o=i}return o}return De(t,e,Di,n)}function De(t,e,n,r){e=n(e);for(var o=0,i=null==t?0:t.length,a=e!=e,u=null===e,s=Uo(e),l=e===ra;o<i;){var c=U((o+i)/2),f=n(t[c]),h=f!==ra,p=null===f,y=f==f,d=Uo(f);if(a)var v=r||y;else v=l?y&&(r||h):u?y&&h&&(r||!p):s?y&&h&&!p&&(r||!d):!p&&!d&&(r?f<=e:f<e);v?o=c+1:i=c}return Z(i,4294967294)}function Ie(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n],u=e?e(a):a;if(!n||!bo(u,s)){var s=u;i[o++]=0===a?0:a}}return i}function Fe(t){return"number"==typeof t?t:Uo(t)?sa:+t}function ze(t){if("string"==typeof t)return t;if(wo(t))return Wu(t,ze)+"";if(Uo(t))return pt?pt.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ne(t,e,n){var r=-1,o=Bu,i=t.length,a=!0,u=[],s=u;if(n)a=!1,o=qu;else if(200<=i){var l=e?null:Tn(t);if(l)return vs(l);a=!1,o=as,s=new Ot}else s=e?[]:u;t:for(;++r<i;){var c=t[r],f=e?e(c):c;if(c=n||0!==c?c:0,a&&f==f){for(var h=s.length;h--;)if(s[h]===f)continue t;e&&s.push(f),u.push(c)}else o(s,f,n)||(s!==u&&s.push(f),u.push(c))}return u}function Ue(t,e){return null==(t=rr(t,e=Xe(e,t)))||delete t[yr(Pr(e))]}function Be(t,e,n,r){return je(t,e,n(Jt(t,e)),r)}function qe(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?Re(t,r?0:i,r?i+1:o):Re(t,r?i+1:0,r?o:i)}function We(t,e){var n=t;return n instanceof gt&&(n=n.value()),Vu(e,function(t,e){return e.func.apply(e.thisArg,Hu([t],e.args))},n)}function He(t,e,n){var r=t.length;if(r<2)return r?Ne(t[0]):[];for(var o=-1,i=T(r);++o<r;)for(var a=t[o],u=-1;++u<r;)u!=o&&(i[o]=Ut(i[o]||a,t[u],e,n));return Ne(Gt(i,1),e,n)}function Ve(t,e,n){for(var r=-1,o=t.length,i=e.length,a={};++r<o;){var u=r<i?e[r]:ra;n(a,t[r],u)}return a}function Ge(t){return To(t)?t:[]}function Ze(t){return"function"==typeof t?t:Di}function Xe(t,e){return wo(t)?t:Kn(t,e)?[t]:pr(Ko(t))}var Ye=Te;function Ke(t,e,n){var r=t.length;return n=n===ra?r:n,!e&&r<=n?t:Re(t,e,n)}var $e=I||function(t){return Pu.clearTimeout(t)};function Je(t,e){if(e)return t.slice();var n=t.length,r=P?P(n):new t.constructor(n);return t.copy(r),r}function Qe(t){var e=new t.constructor(t.byteLength);return new E(e).set(new E(t)),e}function tn(t,e){var n=e?Qe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function en(t,e){if(t!==e){var n=t!==ra,r=null===t,o=t==t,i=Uo(t),a=e!==ra,u=null===e,s=e==e,l=Uo(e);if(!u&&!l&&!i&&e<t||i&&a&&s&&!u&&!l||r&&a&&s||!n&&s||!o)return 1;if(!r&&!i&&!l&&t<e||l&&n&&o&&!r&&!i||u&&n&&o||!a&&o||!s)return-1}return 0}function nn(t,e,n,r){for(var o=-1,i=t.length,a=n.length,u=-1,s=e.length,l=G(i-a,0),c=T(s+l),f=!r;++u<s;)c[u]=e[u];for(;++o<a;)(f||o<i)&&(c[n[o]]=t[o]);for(;l--;)c[u++]=t[o++];return c}function rn(t,e,n,r){for(var o=-1,i=t.length,a=-1,u=n.length,s=-1,l=e.length,c=G(i-u,0),f=T(c+l),h=!r;++o<c;)f[o]=t[o];for(var p=o;++s<l;)f[p+s]=e[s];for(;++a<u;)(h||o<i)&&(f[p+n[a]]=t[o++]);return f}function on(t,e){var n=-1,r=t.length;for(e=e||T(r);++n<r;)e[n]=t[n];return e}function an(t,e,n,r){var o=!n;n=n||{};for(var i=-1,a=e.length;++i<a;){var u=e[i],s=r?r(n[u],t[u],u,n,t):ra;s===ra&&(s=t[u]),o?Lt(n,u,s):Ct(n,u,s)}return n}function un(o,i){return function(t,e){var n=wo(t)?Iu:Rt,r=i?i():{};return n(t,o,zn(e,2),r)}}function sn(u){return Te(function(t,e){var n=-1,r=e.length,o=1<r?e[r-1]:ra,i=2<r?e[2]:ra;for(o=3<u.length&&"function"==typeof o?(r--,o):ra,i&&Yn(e[0],e[1],i)&&(o=r<3?ra:o,r=1),t=d(t);++n<r;){var a=e[n];a&&u(t,a,n,o)}return t})}function ln(i,a){return function(t,e){if(null==t)return t;if(!So(t))return i(t,e);for(var n=t.length,r=a?n:-1,o=d(t);(a?r--:++r<n)&&!1!==e(o[r],r,o););return t}}function cn(s){return function(t,e,n){for(var r=-1,o=d(t),i=n(t),a=i.length;a--;){var u=i[s?a:++r];if(!1===e(o[u],u,o))break}return t}}function fn(o){return function(t){var e=hs(t=Ko(t))?bs(t):ra,n=e?e[0]:t.charAt(0),r=e?Ke(e,1).join(""):t.slice(1);return n[o]()+r}}function hn(e){return function(t){return Vu(ki(xi(t).replace(mu,"")),e,"")}}function pn(r){return function(){var t=arguments;switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3]);case 5:return new r(t[0],t[1],t[2],t[3],t[4]);case 6:return new r(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new r(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=dt(r.prototype),n=r.apply(e,t);return Ro(n)?n:e}}function yn(a){return function(t,e,n){var r=d(t);if(!So(t)){var o=zn(e,3);t=li(t),e=function(t){return o(r[t],t,r)}}var i=a(t,e,n);return-1<i?r[o?t[i]:i]:ra}}function dn(s){return Rn(function(o){var i=o.length,t=i,e=bt.prototype.thru;for(s&&o.reverse();t--;){var n=o[t];if("function"!=typeof n)throw new b(oa);if(e&&!a&&"wrapper"==In(n))var a=new bt([],!0)}for(t=a?t:i;++t<i;){var r=In(n=o[t]),u="wrapper"==r?Dn(n):ra;a=u&&$n(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?a[In(u[0])].apply(a,u[3]):1==n.length&&$n(n)?a[r]():a.thru(n)}return function(){var t=arguments,e=t[0];if(a&&1==t.length&&wo(e))return a.plant(e).value();for(var n=0,r=i?o[n].apply(this,t):e;++n<i;)r=o[n].call(this,r);return r}})}function vn(l,c,f,h,p,y,d,v,m,b){var g=128&c,_=1&c,x=2&c,w=24&c,O=512&c,S=x?ra:pn(l);return function t(){for(var e=arguments.length,n=T(e),r=e;r--;)n[r]=arguments[r];if(w)var o=Fn(t),i=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(n,o);if(h&&(n=nn(n,h,p,w)),y&&(n=rn(n,y,d,w)),e-=i,w&&e<b){var a=ds(n,o);return On(l,c,vn,t.placeholder,f,n,a,v,m,b-e)}var u=_?f:this,s=x?u[l]:l;return e=n.length,v?n=function(t,e){for(var n=t.length,r=Z(e.length,n),o=on(t);r--;){var i=e[r];t[r]=Xn(i,n)?o[i]:ra}return t}(n,v):O&&1<e&&n.reverse(),g&&m<e&&(n.length=m),this&&this!==Pu&&this instanceof t&&(s=S||pn(s)),s.apply(u,n)}}function mn(n,r){return function(t,e){return function(t,r,o,i){return Yt(t,function(t,e,n){r(i,o(t),e,n)}),i}(t,n,r(e),{})}}function bn(r,o){return function(t,e){var n;if(t===ra&&e===ra)return o;if(t!==ra&&(n=t),e!==ra){if(n===ra)return e;e="string"==typeof t||"string"==typeof e?(t=ze(t),ze(e)):(t=Fe(t),Fe(e)),n=r(t,e)}return n}}function gn(r){return Rn(function(t){return t=Wu(t,os(zn())),Te(function(e){var n=this;return r(t,function(t){return Du(t,n,e)})})})}function _n(t,e){var n=(e=e===ra?" ":ze(e)).length;if(n<2)return n?Se(e,t):e;var r=Se(e,N(t/ms(e)));return hs(e)?Ke(bs(r),0,t).join(""):r.slice(0,t)}function xn(r){return function(t,e,n){return n&&"number"!=typeof n&&Yn(t,e,n)&&(e=n=ra),t=Vo(t),e===ra?(e=t,t=0):e=Vo(e),function(t,e,n,r){for(var o=-1,i=G(N((e-t)/(n||1)),0),a=T(i);i--;)a[r?i:++o]=t,t+=n;return a}(t,e,n=n===ra?t<e?1:-1:Vo(n),r)}}function wn(n){return function(t,e){return"string"==typeof t&&"string"==typeof e||(t=Xo(t),e=Xo(e)),n(t,e)}}function On(t,e,n,r,o,i,a,u,s,l){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var f=[t,e,o,c?i:ra,c?a:ra,c?ra:i,c?ra:a,u,s,l],h=n.apply(ra,f);return $n(t)&&ir(h,f),h.placeholder=r,sr(h,t,e)}function Sn(t){var r=i[t];return function(t,e){if(t=Xo(t),(e=null==e?0:Z(Go(e),292))&&W(t)){var n=(Ko(t)+"e").split("e");return+((n=(Ko(r(n[0]+"e"+(+n[1]+e)))+"e").split("e"))[0]+"e"+(+n[1]-e))}return r(t)}}var Tn=et&&1/vs(new et([,-0]))[1]==1/0?function(t){return new et(t)}:Ui;function En(n){return function(t){var e=Hn(t);return e==ba?ps(t):e==Oa?function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}(t):function(e,t){return Wu(t,function(t){return[t,e[t]]})}(t,n(t))}}function Pn(t,e,n,r,o,i,a,u){var s=2&e;if(!s&&"function"!=typeof t)throw new b(oa);var l=r?r.length:0;if(l||(e&=-97,r=o=ra),a=a===ra?a:G(Go(a),0),u=u===ra?u:Go(u),l-=o?o.length:0,64&e){var c=r,f=o;r=o=ra}var h=s?ra:Dn(t),p=[t,e,n,r,o,c,f,i,a,u];if(h&&function(t,e){var n=t[1],r=e[1],o=n|r,i=o<131,a=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!i&&!a)return;1&r&&(t[2]=e[2],o|=1&n?0:4);var u=e[3];if(u){var s=t[3];t[3]=s?nn(s,u,e[4]):u,t[4]=s?ds(t[3],aa):e[4]}(u=e[5])&&(s=t[5],t[5]=s?rn(s,u,e[6]):u,t[6]=s?ds(t[5],aa):e[6]);(u=e[7])&&(t[7]=u);128&r&&(t[8]=null==t[8]?e[8]:Z(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=o}(p,h),t=p[0],e=p[1],n=p[2],r=p[3],o=p[4],!(u=p[9]=p[9]===ra?s?0:t.length:G(p[9]-l,0))&&24&e&&(e&=-25),e&&1!=e)y=8==e||16==e?function(a,u,s){var l=pn(a);return function t(){for(var e=arguments.length,n=T(e),r=e,o=Fn(t);r--;)n[r]=arguments[r];var i=e<3&&n[0]!==o&&n[e-1]!==o?[]:ds(n,o);return(e-=i.length)<s?On(a,u,vn,t.placeholder,ra,n,i,ra,ra,s-e):Du(this&&this!==Pu&&this instanceof t?l:a,this,n)}}(t,e,u):32!=e&&33!=e||o.length?vn.apply(ra,p):function(u,t,s,l){var c=1&t,f=pn(u);return function t(){for(var e=-1,n=arguments.length,r=-1,o=l.length,i=T(o+n),a=this&&this!==Pu&&this instanceof t?f:u;++r<o;)i[r]=l[r];for(;n--;)i[r++]=arguments[++e];return Du(a,c?s:this,i)}}(t,e,n,r);else var y=function(e,t,n){var r=1&t,o=pn(e);return function t(){return(this&&this!==Pu&&this instanceof t?o:e).apply(r?n:this,arguments)}}(t,e,n);return sr((h?ke:ir)(y,p),t,e)}function jn(t,e,n,r){return t===ra||bo(t,f[n])&&!_.call(r,n)?e:t}function kn(t,e,n,r,o,i){return Ro(t)&&Ro(e)&&(i.set(e,t),me(t,e,ra,kn,i),i.delete(e)),t}function Cn(t){return Io(t)?ra:t}function An(t,e,n,r,o,i){var a=1&n,u=t.length,s=e.length;if(u!=s&&!(a&&u<s))return!1;var l=i.get(t);if(l&&i.get(e))return l==e;var c=-1,f=!0,h=2&n?new Ot:ra;for(i.set(t,e),i.set(e,t);++c<u;){var p=t[c],y=e[c];if(r)var d=a?r(y,p,c,e,t,i):r(p,y,c,t,e,i);if(d!==ra){if(d)continue;f=!1;break}if(h){if(!Zu(e,function(t,e){if(!as(h,e)&&(p===t||o(p,t,n,r,i)))return h.push(e)})){f=!1;break}}else if(p!==y&&!o(p,y,n,r,i)){f=!1;break}}return i.delete(t),i.delete(e),f}function Rn(t){return ur(nr(t,ra,wr),t+"")}function Mn(t){return Qt(t,li,qn)}function Ln(t){return Qt(t,ci,Wn)}var Dn=ot?function(t){return ot.get(t)}:Ui;function In(t){for(var e=t.name+"",n=it[e],r=_.call(it,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e}function Fn(t){return(_.call(yt,"placeholder")?yt:t).placeholder}function zn(){var t=yt.iteratee||Ii;return t=t===Ii?ce:t,arguments.length?t(arguments[0],arguments[1]):t}function Nn(t,e){var n=t.__data__;return function(t){var e=xs(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function Un(t){for(var e=li(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,tr(o)]}return e}function Bn(t,e){var n=function(t,e){return null==t?ra:t[e]}(t,e);return le(n)?n:ra}var qn=B?function(e){return null==e?[]:(e=d(e),Uu(B(e),function(t){return C.call(e,t)}))}:Zi,Wn=B?function(t){for(var e=[];t;)Hu(e,qn(t)),t=j(t);return e}:Zi,Hn=te;function Vn(t,e,n){for(var r=-1,o=(e=Xe(e,t)).length,i=!1;++r<o;){var a=yr(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&Ao(o)&&Xn(a,o)&&(wo(t)||xo(t))}function Gn(t){return"function"!=typeof t.constructor||Qn(t)?{}:dt(j(t))}function Zn(t){return wo(t)||xo(t)||!!(R&&t&&t[R])}function Xn(t,e){var n=xs(t);return!!(e=null==e?ua:e)&&("number"==n||"symbol"!=n&&pu.test(t))&&-1<t&&t%1==0&&t<e}function Yn(t,e,n){if(!Ro(n))return!1;var r=xs(e);return!!("number"==r?So(n)&&Xn(e,n.length):"string"==r&&e in n)&&bo(n[e],t)}function Kn(t,e){if(wo(t))return!1;var n=xs(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Uo(t))||(Ya.test(t)||!Xa.test(t)||null!=e&&t in d(e))}function $n(t){var e=In(t),n=yt[e];if("function"!=typeof n||!(e in gt.prototype))return!1;if(t===n)return!0;var r=Dn(n);return!!r&&t===r[0]}(J&&Hn(new J(new ArrayBuffer(1)))!=ja||Q&&Hn(new Q)!=ba||tt&&Hn(tt.resolve())!=xa||et&&Hn(new et)!=Oa||nt&&Hn(new nt)!=Ea)&&(Hn=function(t){var e=te(t),n=e==_a?t.constructor:ra,r=n?dr(n):"";if(r)switch(r){case at:return ja;case ut:return ba;case st:return xa;case lt:return Oa;case ct:return Ea}return e});var Jn=s?ko:Xi;function Qn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||f)}function tr(t){return t==t&&!Ro(t)}function er(e,n){return function(t){return null!=t&&(t[e]===n&&(n!==ra||e in d(t)))}}function nr(i,a,u){return a=G(a===ra?i.length-1:a,0),function(){for(var t=arguments,e=-1,n=G(t.length-a,0),r=T(n);++e<n;)r[e]=t[a+e];e=-1;for(var o=T(a+1);++e<a;)o[e]=t[e];return o[a]=u(r),Du(i,this,o)}}function rr(t,e){return e.length<2?t:Jt(t,Re(e,0,-1))}function or(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ir=lr(ke),ar=z||function(t,e){return Pu.setTimeout(t,e)},ur=lr(Ce);function sr(t,e,n){var r=e+"";return ur(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(1<n?"& ":"")+e[r],e=e.join(2<n?", ":" "),t.replace(nu,"{\n/* [wrapped with "+e+"] */\n")}(r,function(n,r){return Fu(ca,function(t){var e="_."+t[0];r&t[1]&&!Bu(n,e)&&n.push(e)}),n.sort()}(function(t){var e=t.match(ru);return e?e[1].split(ou):[]}(r),n)))}function lr(n){var r=0,o=0;return function(){var t=X(),e=16-(t-o);if(o=t,0<e){if(800<=++r)return arguments[0]}else r=0;return n.apply(ra,arguments)}}function cr(t,e){var n=-1,r=t.length,o=r-1;for(e=e===ra?r:e;++n<e;){var i=Oe(n,o),a=t[i];t[i]=t[n],t[n]=a}return t.length=e,t}var fr,hr,pr=(hr=(fr=fo(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(Ka,function(t,e,n,r){o.push(n?r.replace(au,"$1"):e||t)}),o},function(t){return 500===hr.size&&hr.clear(),t})).cache,fr);function yr(t){if("string"==typeof t||Uo(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function dr(t){if(null!=t){try{return l.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function vr(t){if(t instanceof gt)return t.clone();var e=new bt(t.__wrapped__,t.__chain__);return e.__actions__=on(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var mr=Te(function(t,e){return To(t)?Ut(t,Gt(e,1,To,!0)):[]}),br=Te(function(t,e){var n=Pr(e);return To(n)&&(n=ra),To(t)?Ut(t,Gt(e,1,To,!0),zn(n,2)):[]}),gr=Te(function(t,e){var n=Pr(e);return To(n)&&(n=ra),To(t)?Ut(t,Gt(e,1,To,!0),ra,n):[]});function _r(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:Go(n);return o<0&&(o=G(r+o,0)),Yu(t,zn(e,3),o)}function xr(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==ra&&(o=Go(n),o=n<0?G(r+o,0):Z(o,r-1)),Yu(t,zn(e,3),o,!0)}function wr(t){return(null==t?0:t.length)?Gt(t,1):[]}function Or(t){return t&&t.length?t[0]:ra}var Sr=Te(function(t){var e=Wu(t,Ge);return e.length&&e[0]===t[0]?oe(e):[]}),Tr=Te(function(t){var e=Pr(t),n=Wu(t,Ge);return e===Pr(n)?e=ra:n.pop(),n.length&&n[0]===t[0]?oe(n,zn(e,2)):[]}),Er=Te(function(t){var e=Pr(t),n=Wu(t,Ge);return(e="function"==typeof e?e:ra)&&n.pop(),n.length&&n[0]===t[0]?oe(n,ra,e):[]});function Pr(t){var e=null==t?0:t.length;return e?t[e-1]:ra}var jr=Te(kr);function kr(t,e){return t&&t.length&&e&&e.length?xe(t,e):t}var Cr=Rn(function(t,e){var n=null==t?0:t.length,r=Dt(t,e);return we(t,Wu(e,function(t){return Xn(t,n)?+t:t}).sort(en)),r});function Ar(t){return null==t?t:$.call(t)}var Rr=Te(function(t){return Ne(Gt(t,1,To,!0))}),Mr=Te(function(t){var e=Pr(t);return To(e)&&(e=ra),Ne(Gt(t,1,To,!0),zn(e,2))}),Lr=Te(function(t){var e=Pr(t);return e="function"==typeof e?e:ra,Ne(Gt(t,1,To,!0),ra,e)});function Dr(e){if(!e||!e.length)return[];var n=0;return e=Uu(e,function(t){if(To(t))return n=G(t.length,n),!0}),rs(n,function(t){return Wu(e,ts(t))})}function Ir(t,e){if(!t||!t.length)return[];var n=Dr(t);return null==e?n:Wu(n,function(t){return Du(e,ra,t)})}var Fr=Te(function(t,e){return To(t)?Ut(t,e):[]}),zr=Te(function(t){return He(Uu(t,To))}),Nr=Te(function(t){var e=Pr(t);return To(e)&&(e=ra),He(Uu(t,To),zn(e,2))}),Ur=Te(function(t){var e=Pr(t);return e="function"==typeof e?e:ra,He(Uu(t,To),ra,e)}),Br=Te(Dr);var qr=Te(function(t){var e=t.length,n=1<e?t[e-1]:ra;return n="function"==typeof n?(t.pop(),n):ra,Ir(t,n)});function Wr(t){var e=yt(t);return e.__chain__=!0,e}function Hr(t,e){return e(t)}var Vr=Rn(function(e){function t(t){return Dt(t,e)}var n=e.length,r=n?e[0]:0,o=this.__wrapped__;return!(1<n||this.__actions__.length)&&o instanceof gt&&Xn(r)?((o=o.slice(r,+r+(n?1:0))).__actions__.push({func:Hr,args:[t],thisArg:ra}),new bt(o,this.__chain__).thru(function(t){return n&&!t.length&&t.push(ra),t})):this.thru(t)});var Gr=un(function(t,e,n){_.call(t,n)?++t[n]:Lt(t,n,1)});var Zr=yn(_r),Xr=yn(xr);function Yr(t,e){return(wo(t)?Fu:Bt)(t,zn(e,3))}function Kr(t,e){return(wo(t)?zu:qt)(t,zn(e,3))}var $r=un(function(t,e,n){_.call(t,n)?t[n].push(e):Lt(t,n,[e])});var Jr=Te(function(t,e,n){var r=-1,o="function"==typeof e,i=So(t)?T(t.length):[];return Bt(t,function(t){i[++r]=o?Du(e,t,n):ie(t,e,n)}),i}),Qr=un(function(t,e,n){Lt(t,n,e)});function to(t,e){return(wo(t)?Wu:ye)(t,zn(e,3))}var eo=un(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var no=Te(function(t,e){if(null==t)return[];var n=e.length;return 1<n&&Yn(t,e[0],e[1])?e=[]:2<n&&Yn(e[0],e[1],e[2])&&(e=[e[0]]),ge(t,Gt(e,1),[])}),ro=F||function(){return Pu.Date.now()};function oo(t,e,n){return e=n?ra:e,e=t&&null==e?t.length:e,Pn(t,128,ra,ra,ra,ra,e)}function io(t,e){var n;if("function"!=typeof e)throw new b(oa);return t=Go(t),function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=ra),n}}var ao=Te(function(t,e,n){var r=1;if(n.length){var o=ds(n,Fn(ao));r|=32}return Pn(t,r,e,n,o)}),uo=Te(function(t,e,n){var r=3;if(n.length){var o=ds(n,Fn(uo));r|=32}return Pn(e,r,t,n,o)});function so(r,n,t){var o,i,a,u,s,l,c=0,f=!1,h=!1,e=!0;if("function"!=typeof r)throw new b(oa);function p(t){var e=o,n=i;return o=i=ra,c=t,u=r.apply(n,e)}function y(t){var e=t-l;return l===ra||n<=e||e<0||h&&a<=t-c}function d(){var t=ro();if(y(t))return v(t);s=ar(d,function(t){var e=n-(t-l);return h?Z(e,a-(t-c)):e}(t))}function v(t){return s=ra,e&&o?p(t):(o=i=ra,u)}function m(){var t=ro(),e=y(t);if(o=arguments,i=this,l=t,e){if(s===ra)return function(t){return c=t,s=ar(d,n),f?p(t):u}(l);if(h)return $e(s),s=ar(d,n),p(l)}return s===ra&&(s=ar(d,n)),u}return n=Xo(n)||0,Ro(t)&&(f=!!t.leading,a=(h="maxWait"in t)?G(Xo(t.maxWait)||0,n):a,e="trailing"in t?!!t.trailing:e),m.cancel=function(){s!==ra&&$e(s),c=0,o=l=i=s=ra},m.flush=function(){return s===ra?u:v(ro())},m}var lo=Te(function(t,e){return Nt(t,1,e)}),co=Te(function(t,e,n){return Nt(t,Xo(e)||0,n)});function fo(o,i){if("function"!=typeof o||null!=i&&"function"!=typeof i)throw new b(oa);function a(){var t=arguments,e=i?i.apply(this,t):t[0],n=a.cache;if(n.has(e))return n.get(e);var r=o.apply(this,t);return a.cache=n.set(e,r)||n,r}return a.cache=new(fo.Cache||wt),a}function ho(e){if("function"!=typeof e)throw new b(oa);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}fo.Cache=wt;var po=Ye(function(r,o){var i=(o=1==o.length&&wo(o[0])?Wu(o[0],os(zn())):Wu(Gt(o,1),os(zn()))).length;return Te(function(t){for(var e=-1,n=Z(t.length,i);++e<n;)t[e]=o[e].call(this,t[e]);return Du(r,this,t)})}),yo=Te(function(t,e){var n=ds(e,Fn(yo));return Pn(t,32,ra,e,n)}),vo=Te(function(t,e){var n=ds(e,Fn(vo));return Pn(t,64,ra,e,n)}),mo=Rn(function(t,e){return Pn(t,256,ra,ra,ra,e)});function bo(t,e){return t===e||t!=t&&e!=e}var go=wn(ee),_o=wn(function(t,e){return e<=t}),xo=ae(function(){return arguments}())?ae:function(t){return Mo(t)&&_.call(t,"callee")&&!C.call(t,"callee")},wo=T.isArray,Oo=ku?os(ku):function(t){return Mo(t)&&te(t)==Pa};function So(t){return null!=t&&Ao(t.length)&&!ko(t)}function To(t){return Mo(t)&&So(t)}var Eo=q||Xi,Po=Cu?os(Cu):function(t){return Mo(t)&&te(t)==ya};function jo(t){if(!Mo(t))return!1;var e=te(t);return e==da||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Io(t)}function ko(t){if(!Ro(t))return!1;var e=te(t);return e==va||e==ma||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Co(t){return"number"==typeof t&&t==Go(t)}function Ao(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=ua}function Ro(t){var e=xs(t);return null!=t&&("object"==e||"function"==e)}function Mo(t){return null!=t&&"object"==xs(t)}var Lo=Au?os(Au):function(t){return Mo(t)&&Hn(t)==ba};function Do(t){return"number"==typeof t||Mo(t)&&te(t)==ga}function Io(t){if(!Mo(t)||te(t)!=_a)return!1;var e=j(t);if(null===e)return!0;var n=_.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==g}var Fo=Ru?os(Ru):function(t){return Mo(t)&&te(t)==wa};var zo=Mu?os(Mu):function(t){return Mo(t)&&Hn(t)==Oa};function No(t){return"string"==typeof t||!wo(t)&&Mo(t)&&te(t)==Sa}function Uo(t){return"symbol"==xs(t)||Mo(t)&&te(t)==Ta}var Bo=Lu?os(Lu):function(t){return Mo(t)&&Ao(t.length)&&!!Ou[te(t)]};var qo=wn(pe),Wo=wn(function(t,e){return t<=e});function Ho(t){if(!t)return[];if(So(t))return No(t)?bs(t):on(t);if(M&&t[M])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[M]());var e=Hn(t);return(e==ba?ps:e==Oa?vs:bi)(t)}function Vo(t){return t?(t=Xo(t))!==1/0&&t!==-1/0?t==t?t:0:17976931348623157e292*(t<0?-1:1):0===t?t:0}function Go(t){var e=Vo(t),n=e%1;return e==e?n?e-n:e:0}function Zo(t){return t?It(Go(t),0,la):0}function Xo(t){if("number"==typeof t)return t;if(Uo(t))return sa;if(Ro(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ro(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Qa,"");var n=cu.test(t);return n||hu.test(t)?Eu(t.slice(2),n?2:8):lu.test(t)?sa:+t}function Yo(t){return an(t,ci(t))}function Ko(t){return null==t?"":ze(t)}var $o=sn(function(t,e){if(Qn(e)||So(e))an(e,li(e),t);else for(var n in e)_.call(e,n)&&Ct(t,n,e[n])}),Jo=sn(function(t,e){an(e,ci(e),t)}),Qo=sn(function(t,e,n,r){an(e,ci(e),t,r)}),ti=sn(function(t,e,n,r){an(e,li(e),t,r)}),ei=Rn(Dt);var ni=Te(function(t,e){t=d(t);var n=-1,r=e.length,o=2<r?e[2]:ra;for(o&&Yn(e[0],e[1],o)&&(r=1);++n<r;)for(var i=e[n],a=ci(i),u=-1,s=a.length;++u<s;){var l=a[u],c=t[l];(c===ra||bo(c,f[l])&&!_.call(t,l))&&(t[l]=i[l])}return t}),ri=Te(function(t){return t.push(ra,kn),Du(hi,ra,t)});function oi(t,e,n){var r=null==t?ra:Jt(t,e);return r===ra?n:r}function ii(t,e){return null!=t&&Vn(t,e,re)}var ai=mn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=y.call(e)),t[e]=n},Ri(Di)),ui=mn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=y.call(e)),_.call(t,e)?t[e].push(n):t[e]=[n]},zn),si=Te(ie);function li(t){return So(t)?Tt(t):fe(t)}function ci(t){return So(t)?Tt(t,!0):he(t)}var fi=sn(function(t,e,n){me(t,e,n)}),hi=sn(function(t,e,n,r){me(t,e,n,r)}),pi=Rn(function(e,t){var n={};if(null==e)return n;var r=!1;t=Wu(t,function(t){return t=Xe(t,e),r=r||1<t.length,t}),an(e,Ln(e),n),r&&(n=Ft(n,7,Cn));for(var o=t.length;o--;)Ue(n,t[o]);return n});var yi=Rn(function(t,e){return null==t?{}:function(n,t){return _e(n,t,function(t,e){return ii(n,e)})}(t,e)});function di(t,n){if(null==t)return{};var e=Wu(Ln(t),function(t){return[t]});return n=zn(n),_e(t,e,function(t,e){return n(t,e[0])})}var vi=En(li),mi=En(ci);function bi(t){return null==t?[]:is(t,li(t))}var gi=hn(function(t,e,n){return e=e.toLowerCase(),t+(n?_i(e):e)});function _i(t){return ji(Ko(t).toLowerCase())}function xi(t){return(t=Ko(t))&&t.replace(yu,ls).replace(bu,"")}var wi=hn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Oi=hn(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Si=fn("toLowerCase");var Ti=hn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var Ei=hn(function(t,e,n){return t+(n?" ":"")+ji(e)});var Pi=hn(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),ji=fn("toUpperCase");function ki(t,e,n){return t=Ko(t),(e=n?ra:e)===ra?function(t){return _u.test(t)}(t)?function(t){return t.match(gu)||[]}(t):function(t){return t.match(iu)||[]}(t):t.match(e)||[]}var Ci=Te(function(t,e){try{return Du(t,ra,e)}catch(t){return jo(t)?t:new o(t)}}),Ai=Rn(function(e,t){return Fu(t,function(t){t=yr(t),Lt(e,t,ao(e[t],e))}),e});function Ri(t){return function(){return t}}var Mi=dn(),Li=dn(!0);function Di(t){return t}function Ii(t){return ce("function"==typeof t?t:Ft(t,1))}var Fi=Te(function(e,n){return function(t){return ie(t,e,n)}}),zi=Te(function(e,n){return function(t){return ie(e,t,n)}});function Ni(r,e,t){var n=li(e),o=$t(e,n);null!=t||Ro(e)&&(o.length||!n.length)||(t=e,e=r,r=this,o=$t(e,li(e)));var i=!(Ro(t)&&"chain"in t&&!t.chain),a=ko(r);return Fu(o,function(t){var n=e[t];r[t]=n,a&&(r.prototype[t]=function(){var t=this.__chain__;if(i||t){var e=r(this.__wrapped__);return(e.__actions__=on(this.__actions__)).push({func:n,args:arguments,thisArg:r}),e.__chain__=t,e}return n.apply(r,Hu([this.value()],arguments))})}),r}function Ui(){}var Bi=gn(Wu),qi=gn(Nu),Wi=gn(Zu);function Hi(t){return Kn(t)?ts(yr(t)):function(e){return function(t){return Jt(t,e)}}(t)}var Vi=xn(),Gi=xn(!0);function Zi(){return[]}function Xi(){return!1}var Yi=bn(function(t,e){return t+e},0),Ki=Sn("ceil"),$i=bn(function(t,e){return t/e},1),Ji=Sn("floor");var Qi,ta=bn(function(t,e){return t*e},1),ea=Sn("round"),na=bn(function(t,e){return t-e},0);return yt.after=function(t,e){if("function"!=typeof e)throw new b(oa);return t=Go(t),function(){if(--t<1)return e.apply(this,arguments)}},yt.ary=oo,yt.assign=$o,yt.assignIn=Jo,yt.assignInWith=Qo,yt.assignWith=ti,yt.at=ei,yt.before=io,yt.bind=ao,yt.bindAll=Ai,yt.bindKey=uo,yt.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return wo(t)?t:[t]},yt.chain=Wr,yt.chunk=function(t,e,n){e=(n?Yn(t,e,n):e===ra)?1:G(Go(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var o=0,i=0,a=T(N(r/e));o<r;)a[i++]=Re(t,o,o+=e);return a},yt.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var i=t[e];i&&(o[r++]=i)}return o},yt.concat=function(){var t=arguments.length;if(!t)return[];for(var e=T(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Hu(wo(n)?on(n):[n],Gt(e,1))},yt.cond=function(r){var o=null==r?0:r.length,e=zn();return r=o?Wu(r,function(t){if("function"!=typeof t[1])throw new b(oa);return[e(t[0]),t[1]]}):[],Te(function(t){for(var e=-1;++e<o;){var n=r[e];if(Du(n[0],this,t))return Du(n[1],this,t)}})},yt.conforms=function(t){return function(e){var n=li(e);return function(t){return zt(t,e,n)}}(Ft(t,1))},yt.constant=Ri,yt.countBy=Gr,yt.create=function(t,e){var n=dt(t);return null==e?n:Mt(n,e)},yt.curry=function t(e,n,r){var o=Pn(e,8,ra,ra,ra,ra,ra,n=r?ra:n);return o.placeholder=t.placeholder,o},yt.curryRight=function t(e,n,r){var o=Pn(e,16,ra,ra,ra,ra,ra,n=r?ra:n);return o.placeholder=t.placeholder,o},yt.debounce=so,yt.defaults=ni,yt.defaultsDeep=ri,yt.defer=lo,yt.delay=co,yt.difference=mr,yt.differenceBy=br,yt.differenceWith=gr,yt.drop=function(t,e,n){var r=null==t?0:t.length;return r?Re(t,(e=n||e===ra?1:Go(e))<0?0:e,r):[]},yt.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Re(t,0,(e=r-(e=n||e===ra?1:Go(e)))<0?0:e):[]},yt.dropRightWhile=function(t,e){return t&&t.length?qe(t,zn(e,3),!0,!0):[]},yt.dropWhile=function(t,e){return t&&t.length?qe(t,zn(e,3),!0):[]},yt.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Yn(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=Go(n))<0&&(n=o<-n?0:o+n),(r=r===ra||o<r?o:Go(r))<0&&(r+=o),r=r<n?0:Zo(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},yt.filter=function(t,e){return(wo(t)?Uu:Vt)(t,zn(e,3))},yt.flatMap=function(t,e){return Gt(to(t,e),1)},yt.flatMapDeep=function(t,e){return Gt(to(t,e),1/0)},yt.flatMapDepth=function(t,e,n){return n=n===ra?1:Go(n),Gt(to(t,e),n)},yt.flatten=wr,yt.flattenDeep=function(t){return(null==t?0:t.length)?Gt(t,1/0):[]},yt.flattenDepth=function(t,e){return(null==t?0:t.length)?Gt(t,e=e===ra?1:Go(e)):[]},yt.flip=function(t){return Pn(t,512)},yt.flow=Mi,yt.flowRight=Li,yt.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r},yt.functions=function(t){return null==t?[]:$t(t,li(t))},yt.functionsIn=function(t){return null==t?[]:$t(t,ci(t))},yt.groupBy=$r,yt.initial=function(t){return(null==t?0:t.length)?Re(t,0,-1):[]},yt.intersection=Sr,yt.intersectionBy=Tr,yt.intersectionWith=Er,yt.invert=ai,yt.invertBy=ui,yt.invokeMap=Jr,yt.iteratee=Ii,yt.keyBy=Qr,yt.keys=li,yt.keysIn=ci,yt.map=to,yt.mapKeys=function(t,r){var o={};return r=zn(r,3),Yt(t,function(t,e,n){Lt(o,r(t,e,n),t)}),o},yt.mapValues=function(t,r){var o={};return r=zn(r,3),Yt(t,function(t,e,n){Lt(o,e,r(t,e,n))}),o},yt.matches=function(t){return de(Ft(t,1))},yt.matchesProperty=function(t,e){return ve(t,Ft(e,1))},yt.memoize=fo,yt.merge=fi,yt.mergeWith=hi,yt.method=Fi,yt.methodOf=zi,yt.mixin=Ni,yt.negate=ho,yt.nthArg=function(e){return e=Go(e),Te(function(t){return be(t,e)})},yt.omit=pi,yt.omitBy=function(t,e){return di(t,ho(zn(e)))},yt.once=function(t){return io(2,t)},yt.orderBy=function(t,e,n,r){return null==t?[]:(wo(e)||(e=null==e?[]:[e]),wo(n=r?ra:n)||(n=null==n?[]:[n]),ge(t,e,n))},yt.over=Bi,yt.overArgs=po,yt.overEvery=qi,yt.overSome=Wi,yt.partial=yo,yt.partialRight=vo,yt.partition=eo,yt.pick=yi,yt.pickBy=di,yt.property=Hi,yt.propertyOf=function(e){return function(t){return null==e?ra:Jt(e,t)}},yt.pull=jr,yt.pullAll=kr,yt.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?xe(t,e,zn(n,2)):t},yt.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?xe(t,e,ra,n):t},yt.pullAt=Cr,yt.range=Vi,yt.rangeRight=Gi,yt.rearg=mo,yt.reject=function(t,e){return(wo(t)?Uu:Vt)(t,ho(zn(e,3)))},yt.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,o=[],i=t.length;for(e=zn(e,3);++r<i;){var a=t[r];e(a,r,t)&&(n.push(a),o.push(r))}return we(t,o),n},yt.rest=function(t,e){if("function"!=typeof t)throw new b(oa);return Te(t,e=e===ra?e:Go(e))},yt.reverse=Ar,yt.sampleSize=function(t,e,n){return e=(n?Yn(t,e,n):e===ra)?1:Go(e),(wo(t)?Pt:Pe)(t,e)},yt.set=function(t,e,n){return null==t?t:je(t,e,n)},yt.setWith=function(t,e,n,r){return r="function"==typeof r?r:ra,null==t?t:je(t,e,n,r)},yt.shuffle=function(t){return(wo(t)?jt:Ae)(t)},yt.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n=n&&"number"!=typeof n&&Yn(t,e,n)?(e=0,r):(e=null==e?0:Go(e),n===ra?r:Go(n)),Re(t,e,n)):[]},yt.sortBy=no,yt.sortedUniq=function(t){return t&&t.length?Ie(t):[]},yt.sortedUniqBy=function(t,e){return t&&t.length?Ie(t,zn(e,2)):[]},yt.split=function(t,e,n){return n&&"number"!=typeof n&&Yn(t,e,n)&&(e=n=ra),(n=n===ra?la:n>>>0)?(t=Ko(t))&&("string"==typeof e||null!=e&&!Fo(e))&&!(e=ze(e))&&hs(t)?Ke(bs(t),0,n):t.split(e,n):[]},yt.spread=function(r,o){if("function"!=typeof r)throw new b(oa);return o=null==o?0:G(Go(o),0),Te(function(t){var e=t[o],n=Ke(t,0,o);return e&&Hu(n,e),Du(r,this,n)})},yt.tail=function(t){var e=null==t?0:t.length;return e?Re(t,1,e):[]},yt.take=function(t,e,n){return t&&t.length?Re(t,0,(e=n||e===ra?1:Go(e))<0?0:e):[]},yt.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Re(t,(e=r-(e=n||e===ra?1:Go(e)))<0?0:e,r):[]},yt.takeRightWhile=function(t,e){return t&&t.length?qe(t,zn(e,3),!1,!0):[]},yt.takeWhile=function(t,e){return t&&t.length?qe(t,zn(e,3)):[]},yt.tap=function(t,e){return e(t),t},yt.throttle=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new b(oa);return Ro(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),so(t,e,{leading:r,maxWait:e,trailing:o})},yt.thru=Hr,yt.toArray=Ho,yt.toPairs=vi,yt.toPairsIn=mi,yt.toPath=function(t){return wo(t)?Wu(t,yr):Uo(t)?[t]:on(pr(Ko(t)))},yt.toPlainObject=Yo,yt.transform=function(t,r,o){var e=wo(t),n=e||Eo(t)||Bo(t);if(r=zn(r,4),null==o){var i=t&&t.constructor;o=n?e?new i:[]:Ro(t)&&ko(i)?dt(j(t)):{}}return(n?Fu:Yt)(t,function(t,e,n){return r(o,t,e,n)}),o},yt.unary=function(t){return oo(t,1)},yt.union=Rr,yt.unionBy=Mr,yt.unionWith=Lr,yt.uniq=function(t){return t&&t.length?Ne(t):[]},yt.uniqBy=function(t,e){return t&&t.length?Ne(t,zn(e,2)):[]},yt.uniqWith=function(t,e){return e="function"==typeof e?e:ra,t&&t.length?Ne(t,ra,e):[]},yt.unset=function(t,e){return null==t||Ue(t,e)},yt.unzip=Dr,yt.unzipWith=Ir,yt.update=function(t,e,n){return null==t?t:Be(t,e,Ze(n))},yt.updateWith=function(t,e,n,r){return r="function"==typeof r?r:ra,null==t?t:Be(t,e,Ze(n),r)},yt.values=bi,yt.valuesIn=function(t){return null==t?[]:is(t,ci(t))},yt.without=Fr,yt.words=ki,yt.wrap=function(t,e){return yo(Ze(e),t)},yt.xor=zr,yt.xorBy=Nr,yt.xorWith=Ur,yt.zip=Br,yt.zipObject=function(t,e){return Ve(t||[],e||[],Ct)},yt.zipObjectDeep=function(t,e){return Ve(t||[],e||[],je)},yt.zipWith=qr,yt.entries=vi,yt.entriesIn=mi,yt.extend=Jo,yt.extendWith=Qo,Ni(yt,yt),yt.add=Yi,yt.attempt=Ci,yt.camelCase=gi,yt.capitalize=_i,yt.ceil=Ki,yt.clamp=function(t,e,n){return n===ra&&(n=e,e=ra),n!==ra&&(n=(n=Xo(n))==n?n:0),e!==ra&&(e=(e=Xo(e))==e?e:0),It(Xo(t),e,n)},yt.clone=function(t){return Ft(t,4)},yt.cloneDeep=function(t){return Ft(t,5)},yt.cloneDeepWith=function(t,e){return Ft(t,5,e="function"==typeof e?e:ra)},yt.cloneWith=function(t,e){return Ft(t,4,e="function"==typeof e?e:ra)},yt.conformsTo=function(t,e){return null==e||zt(t,e,li(e))},yt.deburr=xi,yt.defaultTo=function(t,e){return null==t||t!=t?e:t},yt.divide=$i,yt.endsWith=function(t,e,n){t=Ko(t),e=ze(e);var r=t.length,o=n=n===ra?r:It(Go(n),0,r);return 0<=(n-=e.length)&&t.slice(n,o)==e},yt.eq=bo,yt.escape=function(t){return(t=Ko(t))&&Ha.test(t)?t.replace(qa,cs):t},yt.escapeRegExp=function(t){return(t=Ko(t))&&Ja.test(t)?t.replace($a,"\\$&"):t},yt.every=function(t,e,n){var r=wo(t)?Nu:Wt;return n&&Yn(t,e,n)&&(e=ra),r(t,zn(e,3))},yt.find=Zr,yt.findIndex=_r,yt.findKey=function(t,e){return Xu(t,zn(e,3),Yt)},yt.findLast=Xr,yt.findLastIndex=xr,yt.findLastKey=function(t,e){return Xu(t,zn(e,3),Kt)},yt.floor=Ji,yt.forEach=Yr,yt.forEachRight=Kr,yt.forIn=function(t,e){return null==t?t:Zt(t,zn(e,3),ci)},yt.forInRight=function(t,e){return null==t?t:Xt(t,zn(e,3),ci)},yt.forOwn=function(t,e){return t&&Yt(t,zn(e,3))},yt.forOwnRight=function(t,e){return t&&Kt(t,zn(e,3))},yt.get=oi,yt.gt=go,yt.gte=_o,yt.has=function(t,e){return null!=t&&Vn(t,e,ne)},yt.hasIn=ii,yt.head=Or,yt.identity=Di,yt.includes=function(t,e,n,r){t=So(t)?t:bi(t),n=n&&!r?Go(n):0;var o=t.length;return n<0&&(n=G(o+n,0)),No(t)?n<=o&&-1<t.indexOf(e,n):!!o&&-1<Ku(t,e,n)},yt.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:Go(n);return o<0&&(o=G(r+o,0)),Ku(t,e,o)},yt.inRange=function(t,e,n){return e=Vo(e),n===ra?(n=e,e=0):n=Vo(n),function(t,e,n){return t>=Z(e,n)&&t<G(e,n)}(t=Xo(t),e,n)},yt.invoke=si,yt.isArguments=xo,yt.isArray=wo,yt.isArrayBuffer=Oo,yt.isArrayLike=So,yt.isArrayLikeObject=To,yt.isBoolean=function(t){return!0===t||!1===t||Mo(t)&&te(t)==pa},yt.isBuffer=Eo,yt.isDate=Po,yt.isElement=function(t){return Mo(t)&&1===t.nodeType&&!Io(t)},yt.isEmpty=function(t){if(null==t)return!0;if(So(t)&&(wo(t)||"string"==typeof t||"function"==typeof t.splice||Eo(t)||Bo(t)||xo(t)))return!t.length;var e=Hn(t);if(e==ba||e==Oa)return!t.size;if(Qn(t))return!fe(t).length;for(var n in t)if(_.call(t,n))return!1;return!0},yt.isEqual=function(t,e){return ue(t,e)},yt.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:ra)?n(t,e):ra;return r===ra?ue(t,e,ra,n):!!r},yt.isError=jo,yt.isFinite=function(t){return"number"==typeof t&&W(t)},yt.isFunction=ko,yt.isInteger=Co,yt.isLength=Ao,yt.isMap=Lo,yt.isMatch=function(t,e){return t===e||se(t,e,Un(e))},yt.isMatchWith=function(t,e,n){return n="function"==typeof n?n:ra,se(t,e,Un(e),n)},yt.isNaN=function(t){return Do(t)&&t!=+t},yt.isNative=function(t){if(Jn(t))throw new o("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return le(t)},yt.isNil=function(t){return null==t},yt.isNull=function(t){return null===t},yt.isNumber=Do,yt.isObject=Ro,yt.isObjectLike=Mo,yt.isPlainObject=Io,yt.isRegExp=Fo,yt.isSafeInteger=function(t){return Co(t)&&-ua<=t&&t<=ua},yt.isSet=zo,yt.isString=No,yt.isSymbol=Uo,yt.isTypedArray=Bo,yt.isUndefined=function(t){return t===ra},yt.isWeakMap=function(t){return Mo(t)&&Hn(t)==Ea},yt.isWeakSet=function(t){return Mo(t)&&"[object WeakSet]"==te(t)},yt.join=function(t,e){return null==t?"":H.call(t,e)},yt.kebabCase=wi,yt.last=Pr,yt.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==ra&&(o=(o=Go(n))<0?G(r+o,0):Z(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Yu(t,Ju,o,!0)},yt.lowerCase=Oi,yt.lowerFirst=Si,yt.lt=qo,yt.lte=Wo,yt.max=function(t){return t&&t.length?Ht(t,Di,ee):ra},yt.maxBy=function(t,e){return t&&t.length?Ht(t,zn(e,2),ee):ra},yt.mean=function(t){return Qu(t,Di)},yt.meanBy=function(t,e){return Qu(t,zn(e,2))},yt.min=function(t){return t&&t.length?Ht(t,Di,pe):ra},yt.minBy=function(t,e){return t&&t.length?Ht(t,zn(e,2),pe):ra},yt.stubArray=Zi,yt.stubFalse=Xi,yt.stubObject=function(){return{}},yt.stubString=function(){return""},yt.stubTrue=function(){return!0},yt.multiply=ta,yt.nth=function(t,e){return t&&t.length?be(t,Go(e)):ra},yt.noConflict=function(){return Pu._===this&&(Pu._=x),this},yt.noop=Ui,yt.now=ro,yt.pad=function(t,e,n){t=Ko(t);var r=(e=Go(e))?ms(t):0;if(!e||e<=r)return t;var o=(e-r)/2;return _n(U(o),n)+t+_n(N(o),n)},yt.padEnd=function(t,e,n){t=Ko(t);var r=(e=Go(e))?ms(t):0;return e&&r<e?t+_n(e-r,n):t},yt.padStart=function(t,e,n){t=Ko(t);var r=(e=Go(e))?ms(t):0;return e&&r<e?_n(e-r,n)+t:t},yt.parseInt=function(t,e,n){return e=n||null==e?0:e&&+e,Y(Ko(t).replace(tu,""),e||0)},yt.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Yn(t,e,n)&&(e=n=ra),n===ra&&("boolean"==typeof e?(n=e,e=ra):"boolean"==typeof t&&(n=t,t=ra)),t===ra&&e===ra?(t=0,e=1):(t=Vo(t),e===ra?(e=t,t=0):e=Vo(e)),e<t){var r=t;t=e,e=r}if(n||t%1||e%1){var o=K();return Z(t+o*(e-t+Tu("1e-"+((o+"").length-1))),e)}return Oe(t,e)},yt.reduce=function(t,e,n){var r=wo(t)?Vu:es,o=arguments.length<3;return r(t,zn(e,4),n,o,Bt)},yt.reduceRight=function(t,e,n){var r=wo(t)?Gu:es,o=arguments.length<3;return r(t,zn(e,4),n,o,qt)},yt.repeat=function(t,e,n){return e=(n?Yn(t,e,n):e===ra)?1:Go(e),Se(Ko(t),e)},yt.replace=function(){var t=arguments,e=Ko(t[0]);return t.length<3?e:e.replace(t[1],t[2])},yt.result=function(t,e,n){var r=-1,o=(e=Xe(e,t)).length;for(o||(o=1,t=ra);++r<o;){var i=null==t?ra:t[yr(e[r])];i===ra&&(r=o,i=n),t=ko(i)?i.call(t):i}return t},yt.round=ea,yt.runInContext=t,yt.sample=function(t){return(wo(t)?Et:Ee)(t)},yt.size=function(t){if(null==t)return 0;if(So(t))return No(t)?ms(t):t.length;var e=Hn(t);return e==ba||e==Oa?t.size:fe(t).length},yt.snakeCase=Ti,yt.some=function(t,e,n){var r=wo(t)?Zu:Me;return n&&Yn(t,e,n)&&(e=ra),r(t,zn(e,3))},yt.sortedIndex=function(t,e){return Le(t,e)},yt.sortedIndexBy=function(t,e,n){return De(t,e,zn(n,2))},yt.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Le(t,e);if(r<n&&bo(t[r],e))return r}return-1},yt.sortedLastIndex=function(t,e){return Le(t,e,!0)},yt.sortedLastIndexBy=function(t,e,n){return De(t,e,zn(n,2),!0)},yt.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Le(t,e,!0)-1;if(bo(t[n],e))return n}return-1},yt.startCase=Ei,yt.startsWith=function(t,e,n){return t=Ko(t),n=null==n?0:It(Go(n),0,t.length),e=ze(e),t.slice(n,n+e.length)==e},yt.subtract=na,yt.sum=function(t){return t&&t.length?ns(t,Di):0},yt.sumBy=function(t,e){return t&&t.length?ns(t,zn(e,2)):0},yt.template=function(a,t,e){var n=yt.templateSettings;e&&Yn(a,t,e)&&(t=ra),a=Ko(a),t=Qo({},t,n,jn);var u,s,r=Qo({},t.imports,n.imports,jn),o=li(r),i=is(r,o),l=0,c=t.interpolate||du,f="__p += '",h=m((t.escape||du).source+"|"+c.source+"|"+(c===Za?uu:du).source+"|"+(t.evaluate||du).source+"|$","g"),p="//# sourceURL="+(_.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++wu+"]")+"\n";a.replace(h,function(t,e,n,r,o,i){return n=n||r,f+=a.slice(l,i).replace(vu,fs),e&&(u=!0,f+="' +\n__e("+e+") +\n'"),o&&(s=!0,f+="';\n"+o+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=i+t.length,t}),f+="';\n";var y=_.call(t,"variable")&&t.variable;y||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(za,""):f).replace(Na,"$1").replace(Ua,"$1;"),f="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var d=Ci(function(){return v(o,p+"return "+f).apply(ra,i)});if(d.source=f,jo(d))throw d;return d},yt.times=function(t,e){if((t=Go(t))<1||ua<t)return[];var n=la,r=Z(t,la);e=zn(e),t-=la;for(var o=rs(r,e);++n<t;)e(n);return o},yt.toFinite=Vo,yt.toInteger=Go,yt.toLength=Zo,yt.toLower=function(t){return Ko(t).toLowerCase()},yt.toNumber=Xo,yt.toSafeInteger=function(t){return t?It(Go(t),-ua,ua):0===t?t:0},yt.toString=Ko,yt.toUpper=function(t){return Ko(t).toUpperCase()},yt.trim=function(t,e,n){if((t=Ko(t))&&(n||e===ra))return t.replace(Qa,"");if(!t||!(e=ze(e)))return t;var r=bs(t),o=bs(e);return Ke(r,us(r,o),ss(r,o)+1).join("")},yt.trimEnd=function(t,e,n){if((t=Ko(t))&&(n||e===ra))return t.replace(eu,"");if(!t||!(e=ze(e)))return t;var r=bs(t);return Ke(r,0,ss(r,bs(e))+1).join("")},yt.trimStart=function(t,e,n){if((t=Ko(t))&&(n||e===ra))return t.replace(tu,"");if(!t||!(e=ze(e)))return t;var r=bs(t);return Ke(r,us(r,bs(e))).join("")},yt.truncate=function(t,e){var n=30,r="...";if(Ro(e)){var o="separator"in e?e.separator:o;n="length"in e?Go(e.length):n,r="omission"in e?ze(e.omission):r}var i=(t=Ko(t)).length;if(hs(t)){var a=bs(t);i=a.length}if(i<=n)return t;var u=n-ms(r);if(u<1)return r;var s=a?Ke(a,0,u).join(""):t.slice(0,u);if(o===ra)return s+r;if(a&&(u+=s.length-u),Fo(o)){if(t.slice(u).search(o)){var l,c=s;for(o.global||(o=m(o.source,Ko(su.exec(o))+"g")),o.lastIndex=0;l=o.exec(c);)var f=l.index;s=s.slice(0,f===ra?u:f)}}else if(t.indexOf(ze(o),u)!=u){var h=s.lastIndexOf(o);-1<h&&(s=s.slice(0,h))}return s+r},yt.unescape=function(t){return(t=Ko(t))&&Wa.test(t)?t.replace(Ba,gs):t},yt.uniqueId=function(t){var e=++h;return Ko(t)+e},yt.upperCase=Pi,yt.upperFirst=ji,yt.each=Yr,yt.eachRight=Kr,yt.first=Or,Ni(yt,(Qi={},Yt(yt,function(t,e){_.call(yt.prototype,e)||(Qi[e]=t)}),Qi),{chain:!1}),yt.VERSION="4.17.15",Fu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){yt[t].placeholder=yt}),Fu(["drop","take"],function(n,r){gt.prototype[n]=function(t){t=t===ra?1:G(Go(t),0);var e=this.__filtered__&&!r?new gt(this):this.clone();return e.__filtered__?e.__takeCount__=Z(t,e.__takeCount__):e.__views__.push({size:Z(t,la),type:n+(e.__dir__<0?"Right":"")}),e},gt.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),Fu(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;gt.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:zn(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),Fu(["head","last"],function(t,e){var n="take"+(e?"Right":"");gt.prototype[t]=function(){return this[n](1).value()[0]}}),Fu(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");gt.prototype[t]=function(){return this.__filtered__?new gt(this):this[n](1)}}),gt.prototype.compact=function(){return this.filter(Di)},gt.prototype.find=function(t){return this.filter(t).head()},gt.prototype.findLast=function(t){return this.reverse().find(t)},gt.prototype.invokeMap=Te(function(e,n){return"function"==typeof e?new gt(this):this.map(function(t){return ie(t,e,n)})}),gt.prototype.reject=function(t){return this.filter(ho(zn(t)))},gt.prototype.slice=function(t,e){t=Go(t);var n=this;return n.__filtered__&&(0<t||e<0)?new gt(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==ra&&(n=(e=Go(e))<0?n.dropRight(-e):n.take(e-t)),n)},gt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},gt.prototype.toArray=function(){return this.take(la)},Yt(gt.prototype,function(f,t){var h=/^(?:filter|find|map|reject)|While$/.test(t),p=/^(?:head|last)$/.test(t),y=yt[p?"take"+("last"==t?"Right":""):t],d=p||/^find/.test(t);y&&(yt.prototype[t]=function(){function t(t){var e=y.apply(yt,Hu([t],n));return p&&a?e[0]:e}var e=this.__wrapped__,n=p?[1]:arguments,r=e instanceof gt,o=n[0],i=r||wo(e);i&&h&&"function"==typeof o&&1!=o.length&&(r=i=!1);var a=this.__chain__,u=!!this.__actions__.length,s=d&&!a,l=r&&!u;if(d||!i)return s&&l?f.apply(this,n):(c=this.thru(t),s?p?c.value()[0]:c.value():c);e=l?e:new gt(this);var c=f.apply(e,n);return c.__actions__.push({func:Hr,args:[t],thisArg:ra}),new bt(c,a)})}),Fu(["pop","push","shift","sort","splice","unshift"],function(t){var n=a[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",o=/^(?:pop|shift)$/.test(t);yt.prototype[t]=function(){var e=arguments;if(!o||this.__chain__)return this[r](function(t){return n.apply(wo(t)?t:[],e)});var t=this.value();return n.apply(wo(t)?t:[],e)}}),Yt(gt.prototype,function(t,e){var n=yt[e];if(n){var r=n.name+"";_.call(it,r)||(it[r]=[]),it[r].push({name:e,func:n})}}),it[vn(ra,2).name]=[{name:"wrapper",func:ra}],gt.prototype.clone=function(){var t=new gt(this.__wrapped__);return t.__actions__=on(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=on(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=on(this.__views__),t},gt.prototype.reverse=function(){if(this.__filtered__){var t=new gt(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},gt.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=wo(t),r=e<0,o=n?t.length:0,i=function(t,e,n){var r=-1,o=n.length;for(;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Z(e,t+a);break;case"takeRight":t=G(t,e-a)}}return{start:t,end:e}}(0,o,this.__views__),a=i.start,u=i.end,s=u-a,l=r?u:a-1,c=this.__iteratees__,f=c.length,h=0,p=Z(s,this.__takeCount__);if(!n||!r&&o==s&&p==s)return We(t,this.__actions__);var y=[];t:for(;s--&&h<p;){for(var d=-1,v=t[l+=e];++d<f;){var m=c[d],b=m.iteratee,g=m.type,_=b(v);if(2==g)v=_;else if(!_){if(1==g)continue t;break t}}y[h++]=v}return y},yt.prototype.at=Vr,yt.prototype.chain=function(){return Wr(this)},yt.prototype.commit=function(){return new bt(this.value(),this.__chain__)},yt.prototype.next=function(){this.__values__===ra&&(this.__values__=Ho(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?ra:this.__values__[this.__index__++]}},yt.prototype.plant=function(t){for(var e,n=this;n instanceof mt;){var r=vr(n);r.__index__=0,r.__values__=ra,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},yt.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof gt){var e=t;return this.__actions__.length&&(e=new gt(this)),(e=e.reverse()).__actions__.push({func:Hr,args:[Ar],thisArg:ra}),new bt(e,this.__chain__)}return this.thru(Ar)},yt.prototype.toJSON=yt.prototype.valueOf=yt.prototype.value=function(){return We(this.__wrapped__,this.__actions__)},yt.prototype.first=yt.prototype.head,M&&(yt.prototype[M]=function(){return this}),yt}();L?((L.exports=_s)._=_s,M._=_s):Pu._=_s}).call(void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],187:[function(t,e,n){"use strict";var r=t("./_arrayMap"),o=t("./_baseIteratee"),i=t("./_baseMap"),a=t("./isArray");e.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},{"./_arrayMap":23,"./_baseIteratee":57,"./_baseMap":61,"./isArray":169}],188:[function(t,e,n){"use strict";var r=t("./_baseExtremum"),o=t("./_baseGt"),i=t("./identity");e.exports=function(t){return t&&t.length?r(t,i,o):void 0}},{"./_baseExtremum":36,"./_baseGt":44,"./identity":167}],189:[function(t,e,n){"use strict";var r=t("./_baseExtremum"),o=t("./_baseGt"),i=t("./_baseIteratee");e.exports=function(t,e){return t&&t.length?r(t,i(e,2),o):void 0}},{"./_baseExtremum":36,"./_baseGt":44,"./_baseIteratee":57}],190:[function(t,e,n){"use strict";var r=t("./_MapCache"),u="Expected a function";function s(o,i){if("function"!=typeof o||null!=i&&"function"!=typeof i)throw new TypeError(u);function a(){var t=arguments,e=i?i.apply(this,t):t[0],n=a.cache;if(n.has(e))return n.get(e);var r=o.apply(this,t);return a.cache=n.set(e,r)||n,r}return a.cache=new(s.Cache||r),a}s.Cache=r,e.exports=s},{"./_MapCache":11}],191:[function(t,e,n){"use strict";var r=t("./_baseExtremum"),o=t("./_baseLt"),i=t("./identity");e.exports=function(t){return t&&t.length?r(t,i,o):void 0}},{"./_baseExtremum":36,"./_baseLt":60,"./identity":167}],192:[function(t,e,n){"use strict";var r=t("./_baseExtremum"),o=t("./_baseIteratee"),i=t("./_baseLt");e.exports=function(t,e){return t&&t.length?r(t,o(e,2),i):void 0}},{"./_baseExtremum":36,"./_baseIteratee":57,"./_baseLt":60}],193:[function(t,e,n){"use strict";var r=t("./_baseProperty"),o=t("./_basePropertyDeep"),i=t("./_isKey"),a=t("./_toKey");e.exports=function(t){return i(t)?r(a(t)):o(t)}},{"./_baseProperty":64,"./_basePropertyDeep":65,"./_isKey":118,"./_toKey":156}],194:[function(t,e,n){"use strict";var r=t("./_baseRest")(t("./pullAll"));e.exports=r},{"./_baseRest":68,"./pullAll":195}],195:[function(t,e,n){"use strict";var r=t("./_basePullAll");e.exports=function(t,e){return t&&t.length&&e&&e.length?r(t,e):t}},{"./_basePullAll":66}],196:[function(t,e,n){"use strict";var i=t("./_arrayReduce"),a=t("./_baseEach"),u=t("./_baseIteratee"),s=t("./_baseReduce"),l=t("./isArray");e.exports=function(t,e,n){var r=l(t)?i:s,o=arguments.length<3;return r(t,u(e,4),n,o,a)}},{"./_arrayReduce":25,"./_baseEach":35,"./_baseIteratee":57,"./_baseReduce":67,"./isArray":169}],197:[function(t,e,n){"use strict";var r=t("./_baseClamp"),o=t("./_baseToString"),i=t("./toInteger"),a=t("./toString");e.exports=function(t,e,n){return t=a(t),n=null==n?0:r(i(n),0,t.length),e=o(e),t.slice(n,n+e.length)==e}},{"./_baseClamp":32,"./_baseToString":72,"./toInteger":202,"./toString":204}],198:[function(t,e,n){"use strict";e.exports=function(){return[]}},{}],199:[function(t,e,n){"use strict";e.exports=function(){return!1}},{}],200:[function(t,e,n){"use strict";var r=t("./_baseSum"),o=t("./identity");e.exports=function(t){return t&&t.length?r(t,o):0}},{"./_baseSum":70,"./identity":167}],201:[function(t,e,n){"use strict";var r=t("./toNumber");e.exports=function(t){return t?(t=r(t))!==1/0&&t!==-1/0?t==t?t:0:17976931348623157e292*(t<0?-1:1):0===t?t:0}},{"./toNumber":203}],202:[function(t,e,n){"use strict";var r=t("./toFinite");e.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},{"./toFinite":201}],203:[function(t,e,n){"use strict";var r=t("./isObject"),o=t("./isSymbol"),i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;e.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=u.test(t);return n||s.test(t)?l(t.slice(2),n?2:8):a.test(t)?NaN:+t}},{"./isObject":178,"./isSymbol":182}],204:[function(t,e,n){"use strict";var r=t("./_baseToString");e.exports=function(t){return null==t?"":r(t)}},{"./_baseToString":72}],205:[function(t,e,n){"use strict";var r=t("./_baseValues"),o=t("./keys");e.exports=function(t){return null==t?[]:r(t,o(t))}},{"./_baseValues":74,"./keys":184}],206:[function(f,e,r){(function(n){"use strict";function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"object"==(void 0===r?"undefined":U(r))&&void 0!==e?e.exports=t():("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this).lumo=t()}(function(){return function i(a,u,s){function l(e,t){if(!u[e]){if(!a[e]){var n="function"==typeof f&&f;if(!t&&n)return n(e,!0);if(c)return c(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var o=u[e]={exports:{}};a[e][0].call(o.exports,function(t){return l(a[e][1][t]||t)},o,o.exports,i,a,u,s)}return u[e].exports}for(var c="function"==typeof f&&f,t=0;t<s.length;t++)l(s[t]);return l}({1:[function(t,e,n){function r(t,e,n){n=n||2;var r,o,i,a,u,s,l,c=e&&e.length,f=c?e[0]*n:t.length,h=d(t,0,f,n,!0),p=[];if(!h||h.next===h.prev)return p;if(c&&(h=function(t,e,n,r){var o,i,a,u=[];for(o=0,i=e.length;o<i;o++)(a=d(t,e[o]*r,o<i-1?e[o+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),u.push(x(a));for(u.sort(b),o=0;o<u.length;o++)g(u[o],n),n=v(n,n.next);return n}(t,e,h,n)),t.length>80*n){r=i=t[0],o=a=t[1];for(var y=n;y<f;y+=n)(u=t[y])<r&&(r=u),(s=t[y+1])<o&&(o=s),i<u&&(i=u),a<s&&(a=s);l=0!==(l=Math.max(i-r,a-o))?1/l:0}return m(h,p,n,r,o,l),p}function d(t,e,n,r,o){var i,a;if(o===0<P(t,e,n,r))for(i=e;i<n;i+=r)a=s(i,t[i],t[i+1],a);else for(i=n-r;e<=i;i-=r)a=s(i,t[i],t[i+1],a);return a&&u(a,a.next)&&(E(a),a=a.next),a}function v(t,e){if(!t)return t;e=e||t;var n,r=t;do{if(n=!1,r.steiner||!u(r,r.next)&&0!==O(r.prev,r,r.next))r=r.next;else{if(E(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function m(t,e,n,r,o,i,a){if(t){!a&&i&&function(t,e,n,r){for(var o=t;null===o.z&&(o.z=_(o.x,o.y,e,n,r)),o.prevZ=o.prev,o.nextZ=o.next,(o=o.next)!==t;);o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,n,r,o,i,a,u,s,l=1;do{for(n=t,i=t=null,a=0;n;){for(a++,r=n,e=u=0;e<l&&(u++,r=r.nextZ);e++);for(s=l;0<u||0<s&&r;)0!==u&&(0===s||!r||n.z<=r.z)?(n=(o=n).nextZ,u--):(r=(o=r).nextZ,s--),i?i.nextZ=o:t=o,o.prevZ=i,i=o;n=r}i.nextZ=null,l*=2}while(1<a)}(o)}(t,r,o,i);for(var u,s,l=t;t.prev!==t.next;)if(u=t.prev,s=t.next,i?f(t,r,o,i):c(t))e.push(u.i/n),e.push(t.i/n),e.push(s.i/n),E(t),t=s.next,l=s.next;else if((t=s)===l){a?1===a?m(t=h(t,e,n),e,n,r,o,i,2):2===a&&p(t,e,n,r,o,i):m(v(t),e,n,r,o,i,1);break}}}function c(t){var e=t.prev,n=t,r=t.next;if(0<=O(e,n,r))return!1;for(var o=t.next.next;o!==t.prev;){if(w(e.x,e.y,n.x,n.y,r.x,r.y,o.x,o.y)&&0<=O(o.prev,o,o.next))return!1;o=o.next}return!0}function f(t,e,n,r){var o=t.prev,i=t,a=t.next;if(0<=O(o,i,a))return!1;for(var u=o.x<i.x?o.x<a.x?o.x:a.x:i.x<a.x?i.x:a.x,s=o.y<i.y?o.y<a.y?o.y:a.y:i.y<a.y?i.y:a.y,l=o.x>i.x?o.x>a.x?o.x:a.x:i.x>a.x?i.x:a.x,c=o.y>i.y?o.y>a.y?o.y:a.y:i.y>a.y?i.y:a.y,f=_(u,s,e,n,r),h=_(l,c,e,n,r),p=t.prevZ,y=t.nextZ;p&&p.z>=f&&y&&y.z<=h;){if(p!==t.prev&&p!==t.next&&w(o.x,o.y,i.x,i.y,a.x,a.y,p.x,p.y)&&0<=O(p.prev,p,p.next))return!1;if(p=p.prevZ,y!==t.prev&&y!==t.next&&w(o.x,o.y,i.x,i.y,a.x,a.y,y.x,y.y)&&0<=O(y.prev,y,y.next))return!1;y=y.nextZ}for(;p&&p.z>=f;){if(p!==t.prev&&p!==t.next&&w(o.x,o.y,i.x,i.y,a.x,a.y,p.x,p.y)&&0<=O(p.prev,p,p.next))return!1;p=p.prevZ}for(;y&&y.z<=h;){if(y!==t.prev&&y!==t.next&&w(o.x,o.y,i.x,i.y,a.x,a.y,y.x,y.y)&&0<=O(y.prev,y,y.next))return!1;y=y.nextZ}return!0}function h(t,e,n){var r=t;do{var o=r.prev,i=r.next.next;!u(o,i)&&y(o,r,r.next,i)&&S(o,i)&&S(i,o)&&(e.push(o.i/n),e.push(r.i/n),e.push(i.i/n),E(r),E(r.next),r=t=i),r=r.next}while(r!==t);return r}function p(t,e,n,r,o,i){var a,u,s=t;do{for(var l=s.next.next;l!==s.prev;){if(s.i!==l.i&&(u=l,(a=s).next.i!==u.i&&a.prev.i!==u.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&y(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(a,u)&&S(a,u)&&S(u,a)&&function(t,e){for(var n=t,r=!1,o=(t.x+e.x)/2,i=(t.y+e.y)/2;n.y>i!=n.next.y>i&&n.next.y!==n.y&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),(n=n.next)!==t;);return r}(a,u))){var c=T(s,l);return s=v(s,s.next),c=v(c,c.next),m(s,e,n,r,o,i),void m(c,e,n,r,o,i)}l=l.next}s=s.next}while(s!==t)}function b(t,e){return t.x-e.x}function g(t,e){if(e=function(t,e){var n,r=e,o=t.x,i=t.y,a=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var u=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(u<=o&&a<u){if((a=u)===o){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(o===a)return n.prev;var s,l=n,c=n.x,f=n.y,h=1/0;for(r=n.next;r!==l;)o>=r.x&&r.x>=c&&o!==r.x&&w(i<f?o:a,i,c,f,i<f?a:o,i,r.x,r.y)&&((s=Math.abs(i-r.y)/(o-r.x))<h||s===h&&r.x>n.x)&&S(r,t)&&(n=r,h=s),r=r.next;return n}(t,e)){var n=T(e,t);v(n,n.next)}}function _(t,e,n,r,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*o)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function x(t){for(var e=t,n=t;(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),(e=e.next)!==t;);return n}function w(t,e,n,r,o,i,a,u){return 0<=(o-a)*(e-u)-(t-a)*(i-u)&&0<=(t-a)*(r-u)-(n-a)*(e-u)&&0<=(n-a)*(i-u)-(o-a)*(r-u)}function O(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function u(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,n,r){return!!(u(t,e)&&u(n,r)||u(t,r)&&u(n,e))||0<O(t,e,n)!=0<O(t,e,r)&&0<O(n,r,t)!=0<O(n,r,e)}function S(t,e){return O(t.prev,t,t.next)<0?0<=O(t,e,t.next)&&0<=O(t,t.prev,e):O(t,e,t.prev)<0||O(t,t.next,e)<0}function T(t,e){var n=new a(t.i,t.x,t.y),r=new a(e.i,e.x,e.y),o=t.next,i=e.prev;return(t.next=e).prev=t,(n.next=o).prev=n,(r.next=n).prev=r,(i.next=r).prev=i,r}function s(t,e,n,r){var o=new a(t,e,n);return r?(o.next=r.next,(o.prev=r).next.prev=o,r.next=o):(o.prev=o).next=o,o}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function a(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,n,r){for(var o=0,i=e,a=n-r;i<n;i+=r)o+=(t[a]-t[i])*(t[i+1]+t[a+1]),a=i;return o}e.exports=r,(e.exports.default=r).deviation=function(t,e,n,r){var o=e&&e.length,i=o?e[0]*n:t.length,a=Math.abs(P(t,0,i,n));if(o)for(var u=0,s=e.length;u<s;u++){var l=e[u]*n,c=u<s-1?e[u+1]*n:t.length;a-=Math.abs(P(t,l,c,n))}var f=0;for(u=0;u<r.length;u+=3){var h=r[u]*n,p=r[u+1]*n,y=r[u+2]*n;f+=Math.abs((t[h]-t[y])*(t[1+p]-t[1+h])-(t[h]-t[p])*(t[1+y]-t[1+h]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,o=0;o<t.length;o++){for(var i=0;i<t[o].length;i++)for(var a=0;a<e;a++)n.vertices.push(t[o][i][a]);0<o&&(r+=t[o-1].length,n.holes.push(r))}return n}},{}],2:[function(t,e,n){function s(t){return(s="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}var l=Object.create||function(t){function e(){}return e.prototype=t,new e},a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n},i=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=l(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((e.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var o,u=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),o=0===c.x}catch(t){o=!1}function f(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var o,i,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=l(null),t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=f(t))&&0<o&&a.length>o){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,"object"===("undefined"==typeof console?"undefined":s(console))&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=i[e]=n,++t._eventsCount;return t}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function y(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=i.call(p,r);return o.listener=n,r.wrapFn=o}function d(t,e,n){var r=t._events;if(!r)return[];var o=r[e];return o?"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):m(o,o.length):[]}function v(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}o?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');u=t}}):r.defaultMaxListeners=u,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return f(this)},r.prototype.emit=function(t,e,n,r){var o,i,a,u,s,l,c="error"===t;if(l=this._events)c=c&&null==l.error;else if(!c)return!1;if(c){if(1<arguments.length&&(o=e),o instanceof Error)throw o;var f=new Error('Unhandled "error" event. ('+o+")");throw f.context=o,f}if(!(i=l[t]))return!1;var h="function"==typeof i;switch(a=arguments.length){case 1:!function(t,e,n){if(h)t.call(n);else for(var r=t.length,o=m(t,r),i=0;i<r;++i)o[i].call(n)}(i,0,this);break;case 2:!function(t,e,n,r){if(h)t.call(n,r);else for(var o=t.length,i=m(t,o),a=0;a<o;++a)i[a].call(n,r)}(i,0,this,e);break;case 3:!function(t,e,n,r,o){if(h)t.call(n,r,o);else for(var i=t.length,a=m(t,i),u=0;u<i;++u)a[u].call(n,r,o)}(i,0,this,e,n);break;case 4:!function(t,e,n,r,o,i){if(h)t.call(n,r,o,i);else for(var a=t.length,u=m(t,a),s=0;s<a;++s)u[s].call(n,r,o,i)}(i,0,this,e,n,r);break;default:for(u=new Array(a-1),s=1;s<a;s++)u[s-1]=arguments[s];!function(t,e,n,r){if(h)t.apply(n,r);else for(var o=t.length,i=m(t,o),a=0;a<o;++a)i[a].apply(n,r)}(i,0,this,u)}return!0},r.prototype.on=r.prototype.addListener=function(t,e){return h(this,t,e,!1)},r.prototype.prependListener=function(t,e){return h(this,t,e,!0)},r.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,y(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,y(this,t,e)),this},r.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=l(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t){for(var e=o,n=e+1,r=t.length;n<r;e+=1,n+=1)t[e]=t[n];t.pop()}(n),1===n.length&&(r[t]=n[0]),r.removeListener&&this.emit("removeListener",t,a||e)}return this},r.prototype.removeAllListeners=function(t){var e,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=l(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=l(null):delete n[t]),this;if(0===arguments.length){var o,i=a(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=l(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):v.call(t,e)},r.prototype.listenerCount=v,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],3:[function(t,e,n){var r=t("./_getNative")(t("./_root"),"DataView");e.exports=r},{"./_getNative":59,"./_root":95}],4:[function(t,e,n){var r=t("./_hashClear"),o=t("./_hashDelete"),i=t("./_hashGet"),a=t("./_hashHas"),u=t("./_hashSet");function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},{"./_hashClear":65,"./_hashDelete":66,"./_hashGet":67,"./_hashHas":68,"./_hashSet":69}],5:[function(t,e,n){var r=t("./_listCacheClear"),o=t("./_listCacheDelete"),i=t("./_listCacheGet"),a=t("./_listCacheHas"),u=t("./_listCacheSet");function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},{"./_listCacheClear":76,"./_listCacheDelete":77,"./_listCacheGet":78,"./_listCacheHas":79,"./_listCacheSet":80}],6:[function(t,e,n){var r=t("./_getNative")(t("./_root"),"Map");e.exports=r},{"./_getNative":59,"./_root":95}],7:[function(t,e,n){var r=t("./_mapCacheClear"),o=t("./_mapCacheDelete"),i=t("./_mapCacheGet"),a=t("./_mapCacheHas"),u=t("./_mapCacheSet");function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},{"./_mapCacheClear":81,"./_mapCacheDelete":82,"./_mapCacheGet":83,"./_mapCacheHas":84,"./_mapCacheSet":85}],8:[function(t,e,n){var r=t("./_getNative")(t("./_root"),"Promise");e.exports=r},{"./_getNative":59,"./_root":95}],9:[function(t,e,n){var r=t("./_getNative")(t("./_root"),"Set");e.exports=r},{"./_getNative":59,"./_root":95}],10:[function(t,e,n){var r=t("./_MapCache"),o=t("./_setCacheAdd"),i=t("./_setCacheHas");function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},{"./_MapCache":7,"./_setCacheAdd":96,"./_setCacheHas":97}],11:[function(t,e,n){var r=t("./_ListCache"),o=t("./_stackClear"),i=t("./_stackDelete"),a=t("./_stackGet"),u=t("./_stackHas"),s=t("./_stackSet");function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=o,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=u,l.prototype.set=s,e.exports=l},{"./_ListCache":5,"./_stackClear":99,"./_stackDelete":100,"./_stackGet":101,"./_stackHas":102,"./_stackSet":103}],12:[function(t,e,n){var r=t("./_root").Symbol;e.exports=r},{"./_root":95}],13:[function(t,e,n){var r=t("./_root").Uint8Array;e.exports=r},{"./_root":95}],14:[function(t,e,n){var r=t("./_getNative")(t("./_root"),"WeakMap");e.exports=r},{"./_getNative":59,"./_root":95}],15:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}},{}],16:[function(t,e,n){var c=t("./_baseTimes"),f=t("./isArguments"),h=t("./isArray"),p=t("./isBuffer"),y=t("./_isIndex"),d=t("./isTypedArray"),v=Object.prototype.hasOwnProperty;e.exports=function(t,e){var n=h(t),r=!n&&f(t),o=!n&&!r&&p(t),i=!n&&!r&&!o&&d(t),a=n||r||o||i,u=a?c(t.length,String):[],s=u.length;for(var l in t)!e&&!v.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||y(l,s))||u.push(l);return u}},{"./_baseTimes":43,"./_isIndex":70,"./isArguments":115,"./isArray":116,"./isBuffer":118,"./isTypedArray":124}],17:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},{}],18:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},{}],19:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},{}],20:[function(t,e,n){var r=t("./eq");e.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},{"./eq":110}],21:[function(t,e,n){e.exports=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=e<=t?t:e)),t}},{}],22:[function(t,e,n){var r=t("./_baseForOwn"),o=t("./_createBaseEach")(r);e.exports=o},{"./_baseForOwn":24,"./_createBaseEach":50}],23:[function(t,e,n){var r=t("./_createBaseFor")();e.exports=r},{"./_createBaseFor":51}],24:[function(t,e,n){var r=t("./_baseFor"),o=t("./keys");e.exports=function(t,e){return t&&r(t,e,o)}},{"./_baseFor":23,"./keys":125}],25:[function(t,e,n){var o=t("./_castPath"),i=t("./_toKey");e.exports=function(t,e){for(var n=0,r=(e=o(e,t)).length;null!=t&&n<r;)t=t[i(e[n++])];return n&&n==r?t:void 0}},{"./_castPath":48,"./_toKey":105}],26:[function(t,e,n){var o=t("./_arrayPush"),i=t("./isArray");e.exports=function(t,e,n){var r=e(t);return i(t)?r:o(r,n(t))}},{"./_arrayPush":18,"./isArray":116}],27:[function(t,e,n){var r=t("./_Symbol"),o=t("./_getRawTag"),i=t("./_objectToString"),a=r?r.toStringTag:void 0;e.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},{"./_Symbol":12,"./_getRawTag":60,"./_objectToString":93}],28:[function(t,e,n){e.exports=function(t,e){return null!=t&&e in Object(t)}},{}],29:[function(t,e,n){var r=t("./_baseGetTag"),o=t("./isObjectLike");e.exports=function(t){return o(t)&&"[object Arguments]"==r(t)}},{"./_baseGetTag":27,"./isObjectLike":122}],30:[function(t,e,n){var a=t("./_baseIsEqualDeep"),u=t("./isObjectLike");e.exports=function t(e,n,r,o,i){return e===n||(null==e||null==n||!u(e)&&!u(n)?e!=e&&n!=n:a(e,n,r,o,t,i))}},{"./_baseIsEqualDeep":31,"./isObjectLike":122}],31:[function(t,e,n){var d=t("./_Stack"),v=t("./_equalArrays"),m=t("./_equalByTag"),b=t("./_equalObjects"),g=t("./_getTag"),_=t("./isArray"),x=t("./isBuffer"),w=t("./isTypedArray"),O="[object Arguments]",S="[object Array]",T="[object Object]",E=Object.prototype.hasOwnProperty;e.exports=function(t,e,n,r,o,i){var a=_(t),u=_(e),s=a?S:g(t),l=u?S:g(e),c=(s=s==O?T:s)==T,f=(l=l==O?T:l)==T,h=s==l;if(h&&x(t)){if(!x(e))return!1;c=!(a=!0)}if(h&&!c)return i=i||new d,a||w(t)?v(t,e,n,r,o,i):m(t,e,s,n,r,o,i);if(!(1&n)){var p=c&&E.call(t,"__wrapped__"),y=f&&E.call(e,"__wrapped__");if(p||y)return o(p?t.value():t,y?e.value():e,n,r,i=i||new d)}return h&&(i=i||new d,b(t,e,n,r,o,i))}},{"./_Stack":11,"./_equalArrays":52,"./_equalByTag":53,"./_equalObjects":54,"./_getTag":62,"./isArray":116,"./isBuffer":118,"./isTypedArray":124}],32:[function(t,e,n){var p=t("./_Stack"),y=t("./_baseIsEqual");e.exports=function(t,e,n,r){var o=n.length,i=o,a=!r;if(null==t)return!i;for(t=Object(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){var s=(u=n[o])[0],l=t[s],c=u[1];if(a&&u[2]){if(void 0===l&&!(s in t))return!1}else{var f=new p;if(r)var h=r(l,c,s,t,e,f);if(!(void 0===h?y(c,l,3,r,f):h))return!1}}return!0}},{"./_Stack":11,"./_baseIsEqual":30}],33:[function(t,e,n){var r=t("./isFunction"),o=t("./_isMasked"),i=t("./isObject"),a=t("./_toSource"),u=/^\[object .+?Constructor\]$/,s=Function.prototype,l=Object.prototype,c=s.toString,f=l.hasOwnProperty,h=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(t){return!(!i(t)||o(t))&&(r(t)?h:u).test(a(t))}},{"./_isMasked":73,"./_toSource":106,"./isFunction":119,"./isObject":121}],34:[function(t,e,n){var r=t("./_baseGetTag"),o=t("./isLength"),i=t("./isObjectLike"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},{"./_baseGetTag":27,"./isLength":120,"./isObjectLike":122}],35:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}var o=t("./_baseMatches"),i=t("./_baseMatchesProperty"),a=t("./identity"),u=t("./isArray"),s=t("./property");e.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==r(t)?u(t)?i(t[0],t[1]):o(t):s(t)}},{"./_baseMatches":39,"./_baseMatchesProperty":40,"./identity":114,"./isArray":116,"./property":130}],36:[function(t,e,n){var r=t("./_isPrototype"),o=t("./_nativeKeys"),i=Object.prototype.hasOwnProperty;e.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},{"./_isPrototype":74,"./_nativeKeys":90}],37:[function(t,e,n){var o=t("./isObject"),i=t("./_isPrototype"),a=t("./_nativeKeysIn"),u=Object.prototype.hasOwnProperty;e.exports=function(t){if(!o(t))return a(t);var e=i(t),n=[];for(var r in t)("constructor"!=r||!e&&u.call(t,r))&&n.push(r);return n}},{"./_isPrototype":74,"./_nativeKeysIn":91,"./isObject":121}],38:[function(t,e,n){var a=t("./_baseEach"),u=t("./isArrayLike");e.exports=function(t,r){var o=-1,i=u(t)?Array(t.length):[];return a(t,function(t,e,n){i[++o]=r(t,e,n)}),i}},{"./_baseEach":22,"./isArrayLike":117}],39:[function(t,e,n){var r=t("./_baseIsMatch"),o=t("./_getMatchData"),i=t("./_matchesStrictComparable");e.exports=function(e){var n=o(e);return 1==n.length&&n[0][2]?i(n[0][0],n[0][1]):function(t){return t===e||r(t,e,n)}}},{"./_baseIsMatch":32,"./_getMatchData":58,"./_matchesStrictComparable":87}],40:[function(t,e,n){var o=t("./_baseIsEqual"),i=t("./get"),a=t("./hasIn"),u=t("./_isKey"),s=t("./_isStrictComparable"),l=t("./_matchesStrictComparable"),c=t("./_toKey");e.exports=function(n,r){return u(n)&&s(r)?l(c(n),r):function(t){var e=i(t,n);return void 0===e&&e===r?a(t,n):o(r,e,3)}}},{"./_baseIsEqual":30,"./_isKey":71,"./_isStrictComparable":75,"./_matchesStrictComparable":87,"./_toKey":105,"./get":112,"./hasIn":113}],41:[function(t,e,n){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},{}],42:[function(t,e,n){var r=t("./_baseGet");e.exports=function(e){return function(t){return r(t,e)}}},{"./_baseGet":25}],43:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},{}],44:[function(t,e,n){var r=t("./_Symbol"),o=t("./_arrayMap"),i=t("./isArray"),a=t("./isSymbol"),u=r?r.prototype:void 0,s=u?u.toString:void 0;e.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return s?s.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},{"./_Symbol":12,"./_arrayMap":17,"./isArray":116,"./isSymbol":123}],45:[function(t,e,n){e.exports=function(e){return function(t){return e(t)}}},{}],46:[function(t,e,n){e.exports=function(t,e){return t.has(e)}},{}],47:[function(t,e,n){var r=t("./identity");e.exports=function(t){return"function"==typeof t?t:r}},{"./identity":114}],48:[function(t,e,n){var r=t("./isArray"),o=t("./_isKey"),i=t("./_stringToPath"),a=t("./toString");e.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(a(t))}},{"./_isKey":71,"./_stringToPath":104,"./isArray":116,"./toString":135}],49:[function(t,e,n){var r=t("./_root")["__core-js_shared__"];e.exports=r},{"./_root":95}],50:[function(t,e,n){var u=t("./isArrayLike");e.exports=function(i,a){return function(t,e){if(null==t)return t;if(!u(t))return i(t,e);for(var n=t.length,r=a?n:-1,o=Object(t);(a?r--:++r<n)&&!1!==e(o[r],r,o););return t}}},{"./isArrayLike":117}],51:[function(t,e,n){e.exports=function(s){return function(t,e,n){for(var r=-1,o=Object(t),i=n(t),a=i.length;a--;){var u=i[s?a:++r];if(!1===e(o[u],u,o))break}return t}}},{}],52:[function(t,e,n){var v=t("./_SetCache"),m=t("./_arraySome"),b=t("./_cacheHas");e.exports=function(t,e,n,r,o,i){var a=1&n,u=t.length,s=e.length;if(u!=s&&!(a&&u<s))return!1;var l=i.get(t);if(l&&i.get(e))return l==e;var c=-1,f=!0,h=2&n?new v:void 0;for(i.set(t,e),i.set(e,t);++c<u;){var p=t[c],y=e[c];if(r)var d=a?r(y,p,c,e,t,i):r(p,y,c,t,e,i);if(void 0!==d){if(d)continue;f=!1;break}if(h){if(!m(e,function(t,e){if(!b(h,e)&&(p===t||o(p,t,n,r,i)))return h.push(e)})){f=!1;break}}else if(p!==y&&!o(p,y,n,r,i)){f=!1;break}}return i.delete(t),i.delete(e),f}},{"./_SetCache":10,"./_arraySome":19,"./_cacheHas":46}],53:[function(t,e,n){var r=t("./_Symbol"),f=t("./_Uint8Array"),h=t("./eq"),p=t("./_equalArrays"),y=t("./_mapToArray"),d=t("./_setToArray"),o=r?r.prototype:void 0,v=o?o.valueOf:void 0;e.exports=function(t,e,n,r,o,i,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new f(t),new f(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return h(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=y;case"[object Set]":var s=1&r;if(u=u||d,t.size!=e.size&&!s)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=p(u(t),u(e),r,o,i,a);return a.delete(t),c;case"[object Symbol]":if(v)return v.call(t)==v.call(e)}return!1}},{"./_Symbol":12,"./_Uint8Array":13,"./_equalArrays":52,"./_mapToArray":86,"./_setToArray":98,"./eq":110}],54:[function(t,e,n){var g=t("./_getAllKeys"),_=Object.prototype.hasOwnProperty;e.exports=function(t,e,n,r,o,i){var a=1&n,u=g(t),s=u.length;if(s!=g(e).length&&!a)return!1;for(var l=s;l--;){var c=u[l];if(!(a?c in e:_.call(e,c)))return!1}var f=i.get(t);if(f&&i.get(e))return f==e;var h=!0;i.set(t,e),i.set(e,t);for(var p=a;++l<s;){var y=t[c=u[l]],d=e[c];if(r)var v=a?r(d,y,c,e,t,i):r(y,d,c,t,e,i);if(!(void 0===v?y===d||o(y,d,n,r,i):v)){h=!1;break}p=p||"constructor"==c}if(h&&!p){var m=t.constructor,b=e.constructor;m!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b)&&(h=!1)}return i.delete(t),i.delete(e),h}},{"./_getAllKeys":56}],55:[function(t,r,e){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}var n="object"==(void 0===t?"undefined":e(t))&&t&&t.Object===Object&&t;r.exports=n}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],56:[function(t,e,n){var r=t("./_baseGetAllKeys"),o=t("./_getSymbols"),i=t("./keys");e.exports=function(t){return r(t,i,o)}},{"./_baseGetAllKeys":26,"./_getSymbols":61,"./keys":125}],57:[function(t,e,n){var r=t("./_isKeyable");e.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},{"./_isKeyable":72}],58:[function(t,e,n){var i=t("./_isStrictComparable"),a=t("./keys");e.exports=function(t){for(var e=a(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,i(o)]}return e}},{"./_isStrictComparable":75,"./keys":125}],59:[function(t,e,n){var r=t("./_baseIsNative"),o=t("./_getValue");e.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},{"./_baseIsNative":33,"./_getValue":63}],60:[function(t,e,n){var r=t("./_Symbol"),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;e.exports=function(t){var e=i.call(t,u),n=t[u];try{var r=!(t[u]=void 0)}catch(t){}var o=a.call(t);return r&&(e?t[u]=n:delete t[u]),o}},{"./_Symbol":12}],61:[function(t,e,n){var r=t("./_arrayFilter"),o=t("./stubArray"),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(e){return null==e?[]:(e=Object(e),r(a(e),function(t){return i.call(e,t)}))}:o;e.exports=u},{"./_arrayFilter":15,"./stubArray":131}],62:[function(t,e,n){var r=t("./_DataView"),o=t("./_Map"),i=t("./_Promise"),a=t("./_Set"),u=t("./_WeakMap"),s=t("./_baseGetTag"),l=t("./_toSource"),c="[object Map]",f="[object Promise]",h="[object Set]",p="[object WeakMap]",y="[object DataView]",d=l(r),v=l(o),m=l(i),b=l(a),g=l(u),_=s;(r&&_(new r(new ArrayBuffer(1)))!=y||o&&_(new o)!=c||i&&_(i.resolve())!=f||a&&_(new a)!=h||u&&_(new u)!=p)&&(_=function(t){var e=s(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case d:return y;case v:return c;case m:return f;case b:return h;case g:return p}return e}),e.exports=_},{"./_DataView":3,"./_Map":6,"./_Promise":8,"./_Set":9,"./_WeakMap":14,"./_baseGetTag":27,"./_toSource":106}],63:[function(t,e,n){e.exports=function(t,e){return null==t?void 0:t[e]}},{}],64:[function(t,e,n){var u=t("./_castPath"),s=t("./isArguments"),l=t("./isArray"),c=t("./_isIndex"),f=t("./isLength"),h=t("./_toKey");e.exports=function(t,e,n){for(var r=-1,o=(e=u(e,t)).length,i=!1;++r<o;){var a=h(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&f(o)&&c(a,o)&&(l(t)||s(t))}},{"./_castPath":48,"./_isIndex":70,"./_toKey":105,"./isArguments":115,"./isArray":116,"./isLength":120}],65:[function(t,e,n){var r=t("./_nativeCreate");e.exports=function(){this.__data__=r?r(null):{},this.size=0}},{"./_nativeCreate":89}],66:[function(t,e,n){e.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},{}],67:[function(t,e,n){var r=t("./_nativeCreate"),o=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(e,t)?e[t]:void 0}},{"./_nativeCreate":89}],68:[function(t,e,n){var r=t("./_nativeCreate"),o=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},{"./_nativeCreate":89}],69:[function(t,e,n){var r=t("./_nativeCreate");e.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},{"./_nativeCreate":89}],70:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}var o=/^(?:0|[1-9]\d*)$/;e.exports=function(t,e){var n=r(t);return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&o.test(t))&&-1<t&&t%1==0&&t<e}},{}],71:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}var o=t("./isArray"),i=t("./isSymbol"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/;e.exports=function(t,e){if(o(t))return!1;var n=r(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||u.test(t)||!a.test(t)||null!=e&&t in Object(e)}},{"./isArray":116,"./isSymbol":123}],72:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}e.exports=function(t){var e=r(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},{}],73:[function(t,e,n){var r,o=t("./_coreJsData"),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(t){return!!i&&i in t}},{"./_coreJsData":49}],74:[function(t,e,n){var r=Object.prototype;e.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},{}],75:[function(t,e,n){var r=t("./isObject");e.exports=function(t){return t==t&&!r(t)}},{"./isObject":121}],76:[function(t,e,n){e.exports=function(){this.__data__=[],this.size=0}},{}],77:[function(t,e,n){var r=t("./_assocIndexOf"),o=Array.prototype.splice;e.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():o.call(e,n,1),--this.size,0))}},{"./_assocIndexOf":20}],78:[function(t,e,n){var r=t("./_assocIndexOf");e.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},{"./_assocIndexOf":20}],79:[function(t,e,n){var r=t("./_assocIndexOf");e.exports=function(t){return-1<r(this.__data__,t)}},{"./_assocIndexOf":20}],80:[function(t,e,n){var o=t("./_assocIndexOf");e.exports=function(t,e){var n=this.__data__,r=o(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},{"./_assocIndexOf":20}],81:[function(t,e,n){var r=t("./_Hash"),o=t("./_ListCache"),i=t("./_Map");e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},{"./_Hash":4,"./_ListCache":5,"./_Map":6}],82:[function(t,e,n){var r=t("./_getMapData");e.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},{"./_getMapData":57}],83:[function(t,e,n){var r=t("./_getMapData");e.exports=function(t){return r(this,t).get(t)}},{"./_getMapData":57}],84:[function(t,e,n){var r=t("./_getMapData");e.exports=function(t){return r(this,t).has(t)}},{"./_getMapData":57}],85:[function(t,e,n){var o=t("./_getMapData");e.exports=function(t,e){var n=o(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},{"./_getMapData":57}],86:[function(t,e,n){e.exports=function(t){var n=-1,r=Array(t.size);return t.forEach(function(t,e){r[++n]=[e,t]}),r}},{}],87:[function(t,e,n){e.exports=function(e,n){return function(t){return null!=t&&t[e]===n&&(void 0!==n||e in Object(t))}}},{}],88:[function(t,e,n){var r=t("./memoize");e.exports=function(t){var e=r(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}},{"./memoize":128}],89:[function(t,e,n){var r=t("./_getNative")(Object,"create");e.exports=r},{"./_getNative":59}],90:[function(t,e,n){var r=t("./_overArg")(Object.keys,Object);e.exports=r},{"./_overArg":94}],91:[function(t,e,n){e.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},{}],92:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}var o=t("./_freeGlobal"),i="object"==(void 0===n?"undefined":r(n))&&n&&!n.nodeType&&n,a=i&&"object"==(void 0===e?"undefined":r(e))&&e&&!e.nodeType&&e,u=a&&a.exports===i&&o.process,s=function(){try{return a&&a.require&&a.require("util").types||u&&u.binding&&u.binding("util")}catch(t){}}();e.exports=s},{"./_freeGlobal":55}],93:[function(t,e,n){var r=Object.prototype.toString;e.exports=function(t){return r.call(t)}},{}],94:[function(t,e,n){e.exports=function(e,n){return function(t){return e(n(t))}}},{}],95:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}var o=t("./_freeGlobal"),i="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,a=o||i||Function("return this")();e.exports=a},{"./_freeGlobal":55}],96:[function(t,e,n){e.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},{}],97:[function(t,e,n){e.exports=function(t){return this.__data__.has(t)}},{}],98:[function(t,e,n){e.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},{}],99:[function(t,e,n){var r=t("./_ListCache");e.exports=function(){this.__data__=new r,this.size=0}},{"./_ListCache":5}],100:[function(t,e,n){e.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},{}],101:[function(t,e,n){e.exports=function(t){return this.__data__.get(t)}},{}],102:[function(t,e,n){e.exports=function(t){return this.__data__.has(t)}},{}],103:[function(t,e,n){var o=t("./_ListCache"),i=t("./_Map"),a=t("./_MapCache");e.exports=function(t,e){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!i||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(t,e),this.size=n.size,this}},{"./_ListCache":5,"./_Map":6,"./_MapCache":7}],104:[function(t,e,n){var r=t("./_memoizeCapped"),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(i,function(t,e,n,r){o.push(n?r.replace(a,"$1"):e||t)}),o});e.exports=o},{"./_memoizeCapped":88}],105:[function(t,e,n){var r=t("./isSymbol");e.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},{"./isSymbol":123}],106:[function(t,e,n){var r=Function.prototype.toString;e.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},{}],107:[function(t,e,n){var r=t("./_baseClamp"),o=t("./toNumber");e.exports=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=o(n))==n?n:0),void 0!==e&&(e=(e=o(e))==e?e:0),r(o(t),e,n)}},{"./_baseClamp":21,"./toNumber":134}],108:[function(t,e,n){var b=t("./isObject"),g=t("./now"),_=t("./toNumber"),x=Math.max,w=Math.min;e.exports=function(r,o,t){var i,a,n,u,s,l,c=0,f=!1,h=!1,e=!0;if("function"!=typeof r)throw new TypeError("Expected a function");function p(t){var e=i,n=a;return i=a=void 0,c=t,u=r.apply(n,e)}function y(t){var e=t-l;return void 0===l||o<=e||e<0||h&&n<=t-c}function d(){var t,e=g();if(y(e))return v(e);s=setTimeout(d,(t=o-(e-l),h?w(t,n-(e-c)):t))}function v(t){return s=void 0,e&&i?p(t):(i=a=void 0,u)}function m(){var t,e=g(),n=y(e);if(i=arguments,a=this,l=e,n){if(void 0===s)return c=t=l,s=setTimeout(d,o),f?p(t):u;if(h)return clearTimeout(s),s=setTimeout(d,o),p(l)}return void 0===s&&(s=setTimeout(d,o)),u}return o=_(o)||0,b(t)&&(f=!!t.leading,n=(h="maxWait"in t)?x(_(t.maxWait)||0,o):n,e="trailing"in t?!!t.trailing:e),m.cancel=function(){void 0!==s&&clearTimeout(s),i=l=a=s=void(c=0)},m.flush=function(){return void 0===s?u:v(g())},m}},{"./isObject":121,"./now":129,"./toNumber":134}],109:[function(t,e,n){e.exports=function(t,e){return null==t||t!=t?e:t}},{}],110:[function(t,e,n){e.exports=function(t,e){return t===e||t!=t&&e!=e}},{}],111:[function(t,e,n){var r=t("./_baseFor"),o=t("./_castFunction"),i=t("./keysIn");e.exports=function(t,e){return null==t?t:r(t,o(e),i)}},{"./_baseFor":23,"./_castFunction":47,"./keysIn":126}],112:[function(t,e,n){var o=t("./_baseGet");e.exports=function(t,e,n){var r=null==t?void 0:o(t,e);return void 0===r?n:r}},{"./_baseGet":25}],113:[function(t,e,n){var r=t("./_baseHasIn"),o=t("./_hasPath");e.exports=function(t,e){return null!=t&&o(t,e,r)}},{"./_baseHasIn":28,"./_hasPath":64}],114:[function(t,e,n){e.exports=function(t){return t}},{}],115:[function(t,e,n){var r=t("./_baseIsArguments"),o=t("./isObjectLike"),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!u.call(t,"callee")};e.exports=s},{"./_baseIsArguments":29,"./isObjectLike":122}],116:[function(t,e,n){var r=Array.isArray;e.exports=r},{}],117:[function(t,e,n){var r=t("./isFunction"),o=t("./isLength");e.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},{"./isFunction":119,"./isLength":120}],118:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}var o=t("./_root"),i=t("./stubFalse"),a="object"==(void 0===n?"undefined":r(n))&&n&&!n.nodeType&&n,u=a&&"object"==(void 0===e?"undefined":r(e))&&e&&!e.nodeType&&e,s=u&&u.exports===a?o.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},{"./_root":95,"./stubFalse":132}],119:[function(t,e,n){var r=t("./_baseGetTag"),o=t("./isObject");e.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},{"./_baseGetTag":27,"./isObject":121}],120:[function(t,e,n){e.exports=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}},{}],121:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}e.exports=function(t){var e=r(t);return null!=t&&("object"==e||"function"==e)}},{}],122:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}e.exports=function(t){return null!=t&&"object"==r(t)}},{}],123:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}var o=t("./_baseGetTag"),i=t("./isObjectLike");e.exports=function(t){return"symbol"==r(t)||i(t)&&"[object Symbol]"==o(t)}},{"./_baseGetTag":27,"./isObjectLike":122}],124:[function(t,e,n){var r=t("./_baseIsTypedArray"),o=t("./_baseUnary"),i=t("./_nodeUtil"),a=i&&i.isTypedArray,u=a?o(a):r;e.exports=u},{"./_baseIsTypedArray":34,"./_baseUnary":45,"./_nodeUtil":92}],125:[function(t,e,n){var r=t("./_arrayLikeKeys"),o=t("./_baseKeys"),i=t("./isArrayLike");e.exports=function(t){return i(t)?r(t):o(t)}},{"./_arrayLikeKeys":16,"./_baseKeys":36,"./isArrayLike":117}],126:[function(t,e,n){var r=t("./_arrayLikeKeys"),o=t("./_baseKeysIn"),i=t("./isArrayLike");e.exports=function(t){return i(t)?r(t,!0):o(t)}},{"./_arrayLikeKeys":16,"./_baseKeysIn":37,"./isArrayLike":117}],127:[function(t,e,n){var r=t("./_arrayMap"),o=t("./_baseIteratee"),i=t("./_baseMap"),a=t("./isArray");e.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},{"./_arrayMap":17,"./_baseIteratee":35,"./_baseMap":38,"./isArray":116}],128:[function(t,e,n){var r=t("./_MapCache"),u="Expected a function";function s(o,i){if("function"!=typeof o||null!=i&&"function"!=typeof i)throw new TypeError(u);function a(){var t=arguments,e=i?i.apply(this,t):t[0],n=a.cache;if(n.has(e))return n.get(e);var r=o.apply(this,t);return a.cache=n.set(e,r)||n,r}return a.cache=new(s.Cache||r),a}s.Cache=r,e.exports=s},{"./_MapCache":7}],129:[function(t,e,n){var r=t("./_root");e.exports=function(){return r.Date.now()}},{"./_root":95}],130:[function(t,e,n){var r=t("./_baseProperty"),o=t("./_basePropertyDeep"),i=t("./_isKey"),a=t("./_toKey");e.exports=function(t){return i(t)?r(a(t)):o(t)}},{"./_baseProperty":41,"./_basePropertyDeep":42,"./_isKey":71,"./_toKey":105}],131:[function(t,e,n){e.exports=function(){return[]}},{}],132:[function(t,e,n){e.exports=function(){return!1}},{}],133:[function(t,e,n){var i=t("./debounce"),a=t("./isObject");e.exports=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return a(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),i(t,e,{leading:r,maxWait:e,trailing:o})}},{"./debounce":108,"./isObject":121}],134:[function(t,e,n){var r=t("./isObject"),o=t("./isSymbol"),i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;e.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=u.test(t);return n||s.test(t)?l(t.slice(2),n?2:8):a.test(t)?NaN:+t}},{"./isObject":121,"./isSymbol":123}],135:[function(t,e,n){var r=t("./_baseToString");e.exports=function(t){return null==t?"":r(t)}},{"./_baseToString":44}],136:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}var o,i;i=function(){function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function l(t,e){return t<e?-1:e<t?1:0}function t(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function c(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function p(t,e){m(t,0,t.children.length,e,t)}function m(t,e,n,r,o){(o=o||v(null)).minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i=e;i<n;i++){var a=t.children[i];h(o,t.leaf?r(a):a)}return o}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function i(t,e){return t.minX-e.minX}function a(t,e){return t.minY-e.minY}function b(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function s(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function v(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,n,r,o){for(var i=[e,n];i.length;)if(!((n=i.pop())-(e=i.pop())<=r)){var a=e+Math.ceil((n-e)/r/2)*r;s=o,function t(e,n,r,o,i){for(;r<o;){if(600<o-r){var a=o-r+1,u=n-r+1,s=Math.log(a),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(a-l)/a)*(u-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-u*l/a+c)),Math.min(o,Math.floor(n+(a-u)*l/a+c)),i)}var f=e[n],h=r,p=o;for(y(e,r,n),0<i(e[o],f)&&y(e,r,o);h<p;){for(y(e,h,p),h++,p--;i(e[h],f)<0;)h++;for(;0<i(e[p],f);)p--}0===i(e[r],f)?y(e,r,p):y(e,++p,o),p<=n&&(r=p+1),n<=p&&(o=p-1)}}(u=t,a,e||0,n||u.length-1,s||l),i.push(e,a,a,n)}var u,s}return t.prototype.all=function(){return this._all(this.data,[])},t.prototype.search=function(t){var e=this.data,n=[];if(!s(t,e))return n;for(var r=this.toBBox,o=[];e;){for(var i=0;i<e.children.length;i++){var a=e.children[i],u=e.leaf?r(a):a;s(t,u)&&(e.leaf?n.push(a):f(t,u)?this._all(a,n):o.push(a))}e=o.pop()}return n},t.prototype.collides=function(t){var e=this.data;if(!s(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var o=e.children[r],i=e.leaf?this.toBBox(o):o;if(s(t,i)){if(e.leaf||f(t,i))return!0;n.push(o)}}e=n.pop()}return!1},t.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},t.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},t.prototype.clear=function(){return this.data=v([]),this},t.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,i=this.data,a=this.toBBox(t),u=[],s=[];i||u.length;){if(i||(i=u.pop(),r=u[u.length-1],n=s.pop(),o=!0),i.leaf){var l=c(t,i.children,e);if(-1!==l)return i.children.splice(l,1),u.push(i),this._condense(u),this}o||i.leaf||!f(i,a)?r?(n++,i=r.children[n],o=!1):i=null:(u.push(i),s.push(n),n=0,i=(r=i).children[0])}return this},t.prototype.toBBox=function(t){return t},t.prototype.compareMinX=function(t,e){return t.minX-e.minX},t.prototype.compareMinY=function(t,e){return t.minY-e.minY},t.prototype.toJSON=function(){return this.data},t.prototype.fromJSON=function(t){return this.data=t,this},t.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},t.prototype._build=function(t,e,n,r){var o,i=n-e+1,a=this._maxEntries;if(i<=a)return p(o=v(t.slice(e,n+1)),this.toBBox),o;r||(r=Math.ceil(Math.log(i)/Math.log(a)),a=Math.ceil(i/Math.pow(a,r-1))),(o=v([])).leaf=!1,o.height=r;var u=Math.ceil(i/a),s=u*Math.ceil(Math.sqrt(a));g(t,e,n,s,this.compareMinX);for(var l=e;l<=n;l+=s){var c=Math.min(l+s-1,n);g(t,l,c,u,this.compareMinY);for(var f=l;f<=c;f+=u){var h=Math.min(f+u-1,c);o.children.push(this._build(t,f,h,r-1))}}return p(o,this.toBBox),o},t.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var o=1/0,i=1/0,a=void 0,u=0;u<e.children.length;u++){var s=e.children[u],l=b(s),c=(f=t,h=s,(Math.max(h.maxX,f.maxX)-Math.min(h.minX,f.minX))*(Math.max(h.maxY,f.maxY)-Math.min(h.minY,f.minY))-l);c<i?(i=c,o=l<o?l:o,a=s):c===i&&l<o&&(o=l,a=s)}e=a||e.children[0]}var f,h;return e},t.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),o=[],i=this._chooseSubtree(r,this.data,e,o);for(i.children.push(t),h(i,r);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},t.prototype._split=function(t,e){var n=t[e],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);var i=this._chooseSplitIndex(n,o,r),a=v(n.children.splice(i,n.children.length-i));a.height=n.height,a.leaf=n.leaf,p(n,this.toBBox),p(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},t.prototype._splitRoot=function(t,e){this.data=v([t,e]),this.data.height=t.height+1,this.data.leaf=!1,p(this.data,this.toBBox)},t.prototype._chooseSplitIndex=function(t,e,n){for(var r,o,i,a,u,s,l,c=1/0,f=1/0,h=e;h<=n-e;h++){var p=m(t,0,h,this.toBBox),y=m(t,h,n,this.toBBox),d=(o=p,i=y,a=Math.max(o.minX,i.minX),u=Math.max(o.minY,i.minY),s=Math.min(o.maxX,i.maxX),l=Math.min(o.maxY,i.maxY),Math.max(0,s-a)*Math.max(0,l-u)),v=b(p)+b(y);d<c?(c=d,r=h,f=v<f?v:f):d===c&&v<f&&(f=v,r=h)}return r||n-e},t.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:i,o=t.leaf?this.compareMinY:a;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,o)&&t.children.sort(r)},t.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var o=this.toBBox,i=m(t,0,e,o),a=m(t,n-e,n,o),u=d(i)+d(a),s=e;s<n-e;s++){var l=t.children[s];h(i,t.leaf?o(l):l),u+=d(i)}for(var c=n-e-1;e<=c;c--){var f=t.children[c];h(a,t.leaf?o(f):f),u+=d(a)}return u},t.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;0<=r;r--)h(e[r],t)},t.prototype._condense=function(t){for(var e=t.length-1,n=void 0;0<=e;e--)0===t[e].children.length?0<e?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():p(t[e],this.toBBox)},t},"object"==((o=void 0)===n?"undefined":r(n))&&void 0!==e?e.exports=i():(o=o||self).RBush=i()},{}],137:[function(t,e,n){e.exports=function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Date.now();!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.target=t,this.timestamp=n}},{}],138:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=(r(i.prototype,[{key:"broadcast",value:function(r){var o=this;this.plot.on(r,function(t){for(var e=o.plot.getSortedLayers(),n=e.length-1;0<=n;n--)e[n].isHidden()||e[n].emit(r,t)})}}]),i);function i(t){!function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.plot=t}e.exports=o},{}],139:[function(t,e,n){var r;function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e,n){return new s(t,n.originalEvent,{x:n.pos.x,y:n.pos.y},{x:n.px.x,y:n.px.y},e)}var u=t("./EventType"),s=t("./MouseEvent"),c=(i(r={},u.MOUSE_MOVE,function(t,e,n,r){var o=[],i=t.prevMouseover;return r?(i&&i.data!==r&&(i.target.unhighlight(),o.push({type:u.MOUSE_OUT,event:a(i.target,i.data,i)})),o.push({type:u.MOUSE_MOVE,event:a(e,r,n)}),t.plot.getContainer().style.cursor="pointer",e.highlight(r),i&&i.data===r||o.push({type:u.MOUSE_OVER,event:a(e,r,n)}),t.prevMouseover=o[o.length-1].event):i&&(t.plot.getContainer().style.cursor="inherit",i.target.unhighlight(),o.push({type:u.MOUSE_OUT,event:a(i.target,i.data,i)}),t.prevMouseover=null),o}),i(r,u.MOUSE_UP,function(t,e,n,r){return r?[{type:u.MOUSE_UP,event:a(e,r,n)}]:[]}),i(r,u.MOUSE_DOWN,function(t,e,n,r){return r?[{type:u.MOUSE_DOWN,event:a(e,r,n)}]:[]}),i(r,u.CLICK,function(t,e,n,r){var o=n.originalEvent.ctrlKey||n.originalEvent.metaKey;if(r){e.isSelected(r)?o&&e.unselect(r):(o||(t.prevClick.forEach(function(t){t.target.unselectAll()}),t.prevClick=[]),e.select(r,o));var i={type:u.CLICK,event:a(e,r,n)};return t.prevClick.push(i.event),[i]}if(0<t.prevClick.length){if(o)return[];t.prevClick.forEach(function(t){t.target.unselectAll()}),t.prevClick=[]}return[]}),i(r,u.DBL_CLICK,function(t,e,n,r){return r?[{type:u.DBL_CLICK,event:a(e,r,n)}]:[]}),r),l=(o(f.prototype,[{key:"delegate",value:function(t){var s=this,l=c[t];if(!l)throw"Delegation for event type ".concat(t," is not supported");this.plot.on(t,function(t){for(var e=s.plot.getSortedLayers(),n=null,r=null,o=e.length-1;0<=o;o--)if(!e[o].isHidden()&&(n=e[o].pick(t.pos))){r=e[o];break}for(var i=l(s,r,t,n),a=0;a<i.length;a++){var u=i[a];u.event.target.emit(u.type,u.event)}})}}]),f);function f(t){!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this),this.plot=t,this.prevClick=[],this.prevMouseover=null}e.exports=l},{"./EventType":140,"./MouseEvent":141}],140:[function(t,e,n){e.exports={CLICK:"click",DBL_CLICK:"dblclick",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",PAN_START:"panstart",PAN:"pan",PAN_END:"panend",ZOOM_START:"zoomstart",ZOOM:"zoom",ZOOM_END:"zoomend",FRAME:"frame",RESIZE:"resize",CELL_UPDATE:"cellupdate",REFRESH:"refresh",TILE_REQUEST:"tilerequest",TILE_FAILURE:"tilefailure",TILE_ADD:"tileadd",TILE_DISCARD:"tilediscard",TILE_REMOVE:"tileremove",LOAD:"load"}},{}],141:[function(t,e,n){function a(t){return(a="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var o=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(s,t("./Event")),s);function s(t,e,n,r){var o,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;return function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),(o=function(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,u(s).call(this,t))).originalEvent=e,o.pos=n,o.px=r,o.data=i,o}e.exports=o},{"./Event":137}],142:[function(t,e,n){function o(t){return(o="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(u,t("./Event")),u);function u(t,e,n){var r;return function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),(r=function(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,i(u).call(this,t))).oldSize=e,r.newSize=n,r}e.exports=a},{"./Event":137}],143:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(u,t("./Event")),u);function u(t,e){var n;return function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),(n=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,o(u).call(this,t))).tile=e,n}e.exports=a},{"./Event":137}],144:[function(t,e,n){var r=t("./event/EventType");e.exports={CLICK:r.CLICK,DBL_CLICK:r.DBL_CLICK,MOUSE_DOWN:r.MOUSE_DOWN,MOUSE_UP:r.MOUSE_UP,MOUSE_MOVE:r.MOUSE_MOVE,MOUSE_OVER:r.MOUSE_OVER,MOUSE_OUT:r.MOUSE_OUT,PAN_START:r.PAN_START,PAN:r.PAN,PAN_END:r.PAN_END,ZOOM_START:r.ZOOM_START,ZOOM:r.ZOOM,ZOOM_END:r.ZOOM_END,RESIZE:r.RESIZE,FRAME:r.FRAME,REFRESH:r.REFRESH,TILE_REQUEST:r.TILE_REQUEST,TILE_FAILURE:r.TILE_FAILURE,TILE_ADD:r.TILE_ADD,TILE_DISCARD:r.TILE_DISCARD,TILE_REMOVE:r.TILE_REMOVE,CELL_UPDATE:r.CELL_UPDATE,Event:t("./event/Event"),MouseEvent:t("./event/MouseEvent"),ResizeEvent:t("./event/ResizeEvent"),TileEvent:t("./event/TileEvent"),Bounds:t("./geometry/Bounds"),RTree:t("./geometry/RTree"),RTreePyramid:t("./geometry/RTreePyramid"),CircleCollidable:t("./geometry/CircleCollidable"),RectangleCollidable:t("./geometry/RectangleCollidable"),RingCollidable:t("./geometry/RingCollidable"),Plot:t("./plot/Plot"),Layer:t("./layer/Layer"),TileLayer:t("./layer/tile/TileLayer"),Overlay:t("./layer/overlay/Overlay"),PointOverlay:t("./layer/overlay/PointOverlay"),PolylineOverlay:t("./layer/overlay/PolylineOverlay"),PolygonOverlay:t("./layer/overlay/PolygonOverlay"),Renderer:t("./renderer/Renderer"),TileRenderer:t("./renderer/tile/TileRenderer"),WebGLTileRenderer:t("./renderer/tile/WebGLTileRenderer"),ImageTileRenderer:t("./renderer/tile/sample/ImageTileRenderer"),InteractiveTileRenderer:t("./renderer/tile/sample/InteractiveTileRenderer"),PointTileRenderer:t("./renderer/tile/sample/PointTileRenderer"),InstancedTileRenderer:t("./renderer/tile/sample/InstancedTileRenderer"),OverlayRenderer:t("./renderer/overlay/OverlayRenderer"),WebGLOverlayRenderer:t("./renderer/overlay/WebGLOverlayRenderer"),PointOverlayRenderer:t("./renderer/overlay/sample/PointOverlayRenderer"),PolylineOverlayRenderer:t("./renderer/overlay/sample/PolylineOverlayRenderer"),PolygonOverlayRenderer:t("./renderer/overlay/sample/PolygonOverlayRenderer"),Shader:t("./webgl/shader/Shader"),Texture:t("./webgl/texture/Texture"),TextureArray:t("./webgl/texture/TextureArray"),VertexAtlas:t("./webgl/vertex/VertexAtlas"),VertexBuffer:t("./webgl/vertex/VertexBuffer"),IndexBuffer:t("./webgl/vertex/IndexBuffer"),loadBuffer:t("./util/loadBuffer"),loadImage:t("./util/loadImage")}},{"./event/Event":137,"./event/EventType":140,"./event/MouseEvent":141,"./event/ResizeEvent":142,"./event/TileEvent":143,"./geometry/Bounds":145,"./geometry/CircleCollidable":146,"./geometry/RTree":147,"./geometry/RTreePyramid":148,"./geometry/RectangleCollidable":149,"./geometry/RingCollidable":150,"./layer/Layer":151,"./layer/overlay/Overlay":152,"./layer/overlay/PointOverlay":153,"./layer/overlay/PolygonOverlay":154,"./layer/overlay/PolylineOverlay":155,"./layer/tile/TileLayer":158,"./plot/Plot":162,"./renderer/Renderer":172,"./renderer/overlay/OverlayRenderer":173,"./renderer/overlay/WebGLOverlayRenderer":174,"./renderer/overlay/sample/PointOverlayRenderer":175,"./renderer/overlay/sample/PolygonOverlayRenderer":176,"./renderer/overlay/sample/PolylineOverlayRenderer":177,"./renderer/tile/TileRenderer":179,"./renderer/tile/WebGLTileRenderer":180,"./renderer/tile/sample/ImageTileRenderer":181,"./renderer/tile/sample/InstancedTileRenderer":182,"./renderer/tile/sample/InteractiveTileRenderer":183,"./renderer/tile/sample/PointTileRenderer":184,"./util/loadBuffer":188,"./util/loadImage":189,"./webgl/shader/Shader":191,"./webgl/texture/Texture":194,"./webgl/texture/TextureArray":195,"./webgl/vertex/IndexBuffer":196,"./webgl/vertex/VertexAtlas":197,"./webgl/vertex/VertexBuffer":198}],145:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){var r=0;return e<t.left?r|=1:e>t.right&&(r|=2),n<t.bottom?r|=4:n>t.top&&(r|=8),r}function l(t,e,n){for(var r=e.x,o=e.y,i=n.x,a=n.y,u=d(t,r,o),s=d(t,i,a),l=!1,c=0;c<8;){if(!(u|s)){l=!0;break}if(u&s)break;var f=void 0,h=0,p=u||s;8&p?(f=r+(i-r)*(t.top-o)/(a-o),h=t.top):4&p?(f=r+(i-r)*(t.bottom-o)/(a-o),h=t.bottom):f=2&p?(h=o+(a-o)*(t.right-r)/(i-r),t.right):(h=o+(a-o)*(t.left-r)/(i-r),t.left),p===u?u=d(t,r=f,o=h):s=d(t,i=f,a=h),c++}return l?[{x:r,y:o},{x:i,y:a}]:null}var o=(r(i.prototype,[{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"extend",value:function(t){void 0!==t.left&&void 0!==t.right&&void 0!==t.bottom&&void 0!==t.top?(t.left<this.left&&(this.left=t.left),t.right>this.right&&(this.right=t.right),t.bottom<this.bottom&&(this.bottom=t.bottom),t.top>this.top&&(this.top=t.top)):(t.x<this.left&&(this.left=t.x),t.x>this.right&&(this.right=t.x),t.y<this.bottom&&(this.bottom=t.y),t.y>this.top&&(this.top=t.y))}},{key:"getCenter",value:function(){return{x:this.left+this.getWidth()/2,y:this.bottom+this.getHeight()/2}}},{key:"equals",value:function(t){return this.left===t.left&&this.right===t.right&&this.bottom===t.bottom&&this.top===t.top}},{key:"overlaps",value:function(t){return!(this.left>t.right||this.right<t.left||this.top<t.bottom||this.bottom>t.top)}},{key:"intersection",value:function(t){if(this.overlaps(t))return new i(Math.max(this.left,t.left),Math.min(this.right,t.right),Math.max(this.bottom,t.bottom),Math.min(this.top,t.top))}},{key:"clipLine",value:function(t){return t&&2===t.length?l(this,t[0],t[1]):null}},{key:"clipPolyline",value:function(t){if(!t||t.length<2)return null;for(var e=[],n=[],r=1;r<t.length;r++){var o=t[r-1],i=t[r],a=l(this,o,i);if(a){var u=a[0],s=a[1];n.push(u),(s.x!==i.x&&s.y!==i.y||r===t.length-1)&&(n.push(s),e.push(n),n=[])}}return 0<e.length?e:null}},{key:"clipPoints",value:function(t){if(!t)return null;for(var e=[],n=0;n<t.length;n++){var r=t[n];r.x>=this.left&&r.x<=this.right&&r.y>=this.bottom&&r.y<=this.top&&e.push(r)}return 0<e.length?e:null}},{key:"clipPolygon",value:function(t){return!t||t.length<3?null:function(t,e){for(var n,r=1;r<=8;r*=2){n=[];for(var o=e[e.length-1],i=!(d(t,o.x,o.y)&r),a=0;a<e.length;a++){var u=e[a],s=!(d(t,u.x,u.y)&r);if(s!==i){var l=o.x,c=o.y,f=u.x,h=u.y,p=void 0,y=0;8&r?(p=l+(f-l)*(t.top-c)/(h-c),y=t.top):4&r?(p=l+(f-l)*(t.bottom-c)/(h-c),y=t.bottom):p=2&r?(y=c+(h-c)*(t.right-l)/(f-l),t.right):(y=c+(h-c)*(t.left-l)/(f-l),t.left),n.push({x:p,y:y})}s&&n.push(u),o=u,i=s}if(!(e=n).length)break}return 0<n.length?n:null}(this,t)}}]),i);function i(t,e,n,r){!function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.left=t,this.right=e,this.bottom=n,this.top=r}e.exports=o},{}],146:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=t("lodash/clamp"),o=(r(u.prototype,[{key:"testPoint",value:function(t,e){var n=.5*(this.minX+this.maxX)-t,r=.5*(this.minY+this.maxY)-e;return n*n+r*r<=this.radius*this.radius}},{key:"testRectangle",value:function(t,e,n,r){var o=.5*(this.minX+this.maxX),i=.5*(this.minY+this.maxY),a=o-s(o,t,e),u=i-s(i,n,r);return a*a+u*u<this.radius*this.radius}}]),u);function u(t,e,n,r,o,i,a){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.x=t,this.y=e,this.radius=n,this.minX=t+r-n,this.maxX=t+r+n,this.minY=e+o-n,this.maxY=e+o+n,this.tile=i,this.data=a}e.exports=o},{"lodash/clamp":107}],147:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=t("rbush"),i=t("lodash/defaultTo"),a=(r(u.prototype,[{key:"insert",value:function(t){this.tree.load(t)}},{key:"remove",value:function(t){for(var e=this.tree,n=0;n<t.length;n++)e.remove(t[n])}},{key:"searchPoint",value:function(t,e){var n=this.tree.search({minX:t,maxX:t,minY:e,maxY:e});if(0===n.length)return null;for(var r=0;r<n.length;r++){var o=n[r];if(o.testPoint(t,e))return o}return null}},{key:"searchRectangle",value:function(t,e,n,r){var o=this.tree.search({minX:t,maxX:e,minY:n,maxY:r});if(0===o.length)return null;for(var i=0;i<o.length;i++){var a=o[i];if(a.testRectangle(t,e,n,r))return a}return null}}]),u);function u(t){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.tree=new o(i(t.nodeCapacity,32))}e.exports=a},{"lodash/defaultTo":109,rbush:136}],148:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=t("lodash/defaultTo"),i=t("./RTree"),a=(r(u.prototype,[{key:"insert",value:function(t,e){return this.trees.has(t.z)||this.trees.set(t.z,new i({nodeCapacity:this.nodeCapacity})),this.trees.get(t.z).insert(e),this.collidables.set(t.hash,e),this}},{key:"remove",value:function(t){var e=this.collidables.get(t.hash);return this.trees.get(t.z).remove(e),this.collidables.delete(t.hash),this}},{key:"searchPoint",value:function(t,e,n,r){var o=Math.round(n),i=this.trees.get(o);if(!i)return null;var a=Math.pow(2,o-n),u=t*r*a,s=e*r*a;return i.searchPoint(u,s)}},{key:"searchRectangle",value:function(t,e,n,r,o,i){var a=Math.round(o),u=this.trees.get(a);if(!u)return null;var s=Math.pow(2,a-o),l=t*i*s,c=e*i*s,f=n*i*s,h=r*i*s;return u.searchRectangle(l,c,f,h)}}]),u);function u(t){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.trees=new Map,this.collidables=new Map,this.nodeCapacity=o(t.nodeCapacity,32)}e.exports=a},{"./RTree":147,"lodash/defaultTo":109}],149:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=(r(s.prototype,[{key:"testPoint",value:function(t,e){return!0}},{key:"testRectangle",value:function(t,e,n,r){return!0}}]),s);function s(t,e,n,r,o,i,a,u){!function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.minX=t+o,this.maxX=e+o,this.minY=n+i,this.maxY=r+i,this.tile=a,this.data=u}e.exports=o},{}],150:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=t("lodash/clamp"),o=(r(l.prototype,[{key:"testPoint",value:function(t,e){var n=.5*(this.minX+this.maxX)-t,r=.5*(this.minY+this.maxY)-e,o=n*n+r*r,i=.5*this.width,a=this.radius-i,u=this.radius+i;return o<=u*u&&a*a<=o}},{key:"testRectangle",value:function(t,e,n,r){var o=.5*(this.minX+this.maxX),i=.5*(this.minY+this.maxY),a=o-(Math.abs(o-t)<Math.abs(o-e)?e:t),u=i-(Math.abs(i-n)<Math.abs(i-r)?r:n),s=.5*this.width,l=this.radius-s;if(a*a+u*u<l*l)return!1;var c=o-p(o,t,e),f=i-p(i,n,r),h=this.radius+s;return c*c+f*f<h*h}}]),l);function l(t,e,n,r,o,i,a,u){!function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),this.x=t,this.y=e,this.radius=n;var s=.5*(this.width=r);this.minX=t+o-n-s,this.maxX=t+o+n+s,this.minY=e+i-n-s,this.maxY=e+i+n+s,this.tile=a,this.data=u}e.exports=o},{"lodash/clamp":107}],151:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=t("lodash/clamp"),s=t("lodash/defaultTo"),l=t("events"),c=t("../event/Event"),f=t("../event/EventType"),h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(p,l),o(p.prototype,[{key:"onAdd",value:function(t){if(!t)throw"No plot argument provided";return this.plot=t,this.plot.setDirty(),this.renderer&&this.renderer.onAdd(this),this}},{key:"onRemove",value:function(t){if(!t)throw"No plot argument provided";return this.renderer&&this.renderer.onRemove(this),this.clear(),this.plot.setDirty(),this.plot=null,this}},{key:"setRenderer",value:function(t){if(!t)throw"No renderer argument provided";return this.renderer&&this.plot&&this.renderer.onRemove(this),this.renderer=t,this.plot&&this.renderer.onAdd(this),this}},{key:"removeRenderer",value:function(){if(!this.renderer)throw"No renderer is currently attached to the layer";return this.plot&&this.renderer.onRemove(this),this.renderer=null,this}},{key:"getRenderer",value:function(){return this.renderer}},{key:"setOpacity",value:function(t){return t=u(t,0,1),this.opacity!==t&&(this.opacity=t,this.plot&&this.plot.setDirty()),this}},{key:"getOpacity",value:function(){return this.opacity}},{key:"setZIndex",value:function(t){return this.zIndex!==t&&(this.zIndex=t,this.plot&&this.plot.setDirty()),this}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"show",value:function(){return this.hidden&&(this.hidden=!1,this.plot&&this.plot.setDirty()),this}},{key:"hide",value:function(){return this.hidden||(this.hidden=!0,this.renderer&&this.renderer.clear(),this.plot&&this.plot.setDirty()),this}},{key:"isHidden",value:function(){return this.hidden}},{key:"pick",value:function(t){return this.renderer?this.renderer.pick(t):null}},{key:"highlight",value:function(t){return this.highlighted!==t&&(this.highlighted=t,this.plot&&this.plot.setDirty()),this}},{key:"unhighlight",value:function(){return null!==this.highlighted&&(this.highlighted=null,this.plot&&this.plot.setDirty()),this}},{key:"getHighlighted",value:function(){return this.highlighted}},{key:"isHighlighted",value:function(t){return this.highlighted===t}},{key:"select",value:function(t,e){var n=!1;return e?-1===this.selected.indexOf(t)&&(this.selected.push(t),n=!0):1===this.selected.length&&this.selected[0]===t||(this.selected=[t],n=!0),this.plot&&n&&this.plot.setDirty(),this}},{key:"unselect",value:function(t){var e=this.selected.indexOf(t);return-1!==e&&(this.selected.splice(e,1),this.plot&&this.plot.setDirty()),this}},{key:"unselectAll",value:function(){return 0<this.selected.length&&(this.selected=[],this.plot&&this.plot.setDirty()),this}},{key:"getSelected",value:function(){return this.selected}},{key:"isSelected",value:function(t){return-1!==this.selected.indexOf(t)}},{key:"draw",value:function(t){return this.renderer&&this.renderer.draw(t),this}},{key:"clear",value:function(){return(this.highlighted||0<this.selected.length)&&(this.highlighted=null,this.selected=[]),this.renderer&&this.renderer.clear(),this.plot&&this.plot.setDirty(),this}},{key:"refresh",value:function(){return this.clear(),this.emit(f.REFRESH,new c(this)),this}}]),p);function p(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,i(p).call(this))).opacity=s(e.opacity,1),t.hidden=s(e.hidden,!1),t.zIndex=s(e.zIndex,0),t.renderer=s(e.renderer,null),t.highlighted=null,t.selected=[],t.plot=null,t}e.exports=h},{"../event/Event":137,"../event/EventType":140,events:2,"lodash/clamp":107,"lodash/defaultTo":109}],152:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("../../event/EventType"),l=t("../Layer"),c=Symbol(),f=Symbol(),h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(p,l),o(p.prototype,[{key:"onAdd",value:function(t){var e=this;return i(a(p.prototype),"onAdd",this).call(this,t),this.refresh(),this[c]=function(){e.refresh()},this.plot.on(s.CELL_UPDATE,this[c]),this}},{key:"onRemove",value:function(t){return this[f]=null,this.plot.removeListener(s.CELL_UPDATE,this[c]),this[c]=null,i(a(p.prototype),"onRemove",this).call(this,t),this}},{key:"enable",value:function(){return this.show(),this}},{key:"disable",value:function(){return this.hide(),this}},{key:"isDisabled",value:function(){return this.isHidden()}},{key:"refresh",value:function(){return this.plot&&(this[f]=this.clipGeometry(this.plot.cell)),i(a(p.prototype),"refresh",this).call(this),this}},{key:"clipGeometry",value:function(t){throw"`clipGeometry` must be overridden"}},{key:"getClippedGeometry",value:function(){return this[f]}}]),p);function p(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,a(p).call(this,e)))[f]=null,t[c]=null,t}e.exports=h},{"../../event/EventType":140,"../Layer":151}],153:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(s,t("./Overlay")),o(s.prototype,[{key:"addPoints",value:function(t,e){return this.points.set(t,e),this.plot&&this.refresh(),this}},{key:"removePoints",value:function(t){return this.points.delete(t),this.plot&&this.refresh(),this}},{key:"clearPoints",value:function(){return this.clear(),this.points=new Map,this.plot&&this.refresh(),this}},{key:"clipGeometry",value:function(t){return function(r,t){var o=[];return t.forEach(function(t){var e=r.bounds.clipPoints(t);if(e)for(var n=0;n<e.length;n++)o.push(r.project(e[n]))}),o}(t,this.points)}}]),s);function s(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,i(s).call(this,e))).points=new Map,t}e.exports=u},{"./Overlay":152}],154:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(s,t("./Overlay")),o(s.prototype,[{key:"addPolygon",value:function(t,e){return this.polygons.set(t,e),this.plot&&this.refresh(),this}},{key:"removePolygon",value:function(t){return this.polygons.delete(t),this.plot&&this.refresh(),this}},{key:"clearPolygons",value:function(){return this.clear(),this.polygons=new Map,this.plot&&this.refresh(),this}},{key:"clipGeometry",value:function(t){return function(o,t){var i=[];return t.forEach(function(t){var e=o.bounds.clipPolygon(t);if(e){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=o.project(e[r]);i.push(n)}}),i}(t,this.polygons)}}]),s);function s(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,i(s).call(this,e))).polygons=new Map,t}e.exports=u},{"./Overlay":152}],155:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(s,t("./Overlay")),o(s.prototype,[{key:"addPolyline",value:function(t,e){return this.polylines.set(t,e),this.plot&&this.refresh(),this}},{key:"removePolyline",value:function(t){return this.polylines.delete(t),this.plot&&this.refresh(),this}},{key:"clearPolylines",value:function(){return this.clear(),this.polylines=new Map,this.plot&&this.refresh(),this}},{key:"clipGeometry",value:function(t){return function(i,t){var a=[];return t.forEach(function(t){var e=i.bounds.clipPolyline(t);if(e)for(var n=0;n<e.length;n++){for(var r=e[n],o=0;o<r.length;o++)r[o]=i.project(r[o]);a.push(r)}}),a}(t,this.polylines)}}]),s);function s(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,i(s).call(this,e))).polylines=new Map,t}e.exports=u},{"./Overlay":152}],156:[function(t,e,n){var r=Math.pow(2,53)-1,o=1;e.exports=function e(t){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.coord=t,this.uid=o=(o+1)%r,this.data=null,this.err=null}},{}],157:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(t%e+e)%e}var i=(r(u.prototype,[{key:"xyz",value:function(){var t=Math.pow(2,this.z);return"".concat(this.z,"/").concat(this.x,"/").concat(t-1-this.y)}},{key:"tms",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}},{key:"equals",value:function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}},{key:"getAncestor",value:function(t){var e=0<arguments.length&&void 0!==t?t:1,n=Math.pow(2,e);return new u(this.z-e,Math.floor(this.x/n),Math.floor(this.y/n))}},{key:"getDescendants",value:function(t){for(var e=0<arguments.length&&void 0!==t?t:1,n=Math.pow(2,e),r=new Array(n*n),o=0;o<n;o++)for(var i=o*n,a=0;a<n;a++)r[i+a]=new u(this.z+e,this.x*n+o,this.y*n+a);return r}},{key:"isAncestorOf",value:function(t){if(this.z>=t.z)return!1;var e=t.z-this.z,n=Math.pow(2,e),r=Math.floor(t.x/n);if(this.x!==r)return!1;var o=Math.floor(t.y/n);return this.y===o}},{key:"isDescendantOf",value:function(t){return t.isAncestorOf(this)}},{key:"normalize",value:function(){var t=Math.pow(2,this.z);return new u(this.z,o(this.x,t),o(this.y,t))}},{key:"getPosition",value:function(){var t=Math.pow(2,this.z);return{x:this.x/t,y:this.y/t}}},{key:"getCenter",value:function(){var t=Math.pow(2,this.z);return{x:(this.x+.5)/t,y:(this.y+.5)/t}}}]),u);function u(t,e,n){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.z=t,this.x=e,this.y=n,this.hash="".concat(this.z,":").concat(this.x,":").concat(this.y)}e.exports=i},{}],158:[function(t,e,n){function o(t){return(o="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=t.plot.getTargetVisibleCoords();t.requestTiles(e)}var c=t("lodash/defaultTo"),f=t("../Layer"),h=t("./TilePyramid"),p=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(y,f),r(y.prototype,[{key:"onAdd",value:function(t){return a(u(y.prototype),"onAdd",this).call(this,t),this.isMuted()||l(this),this}},{key:"onRemove",value:function(t){return this.pyramid.clear(),a(u(y.prototype),"onRemove",this).call(this,t),this}},{key:"getPyramid",value:function(){return this.pyramid}},{key:"hide",value:function(){return a(u(y.prototype),"hide",this).call(this),this}},{key:"mute",value:function(){return this.muted=!0,this}},{key:"unmute",value:function(){return this.isMuted()&&(this.muted=!1,this.plot&&l(this)),this}},{key:"isMuted",value:function(){return this.muted}},{key:"enable",value:function(){return this.show(),this.unmute(),this}},{key:"disable",value:function(){return this.hide(),this.mute(),this}},{key:"isDisabled",value:function(){return this.isMuted()&&this.isHidden()}},{key:"refresh",value:function(){return this.pyramid.clear(),this.plot&&!this.isMuted()&&l(this),a(u(y.prototype),"refresh",this).call(this),this}},{key:"requestTile",value:function(t,e){e(null,null)}},{key:"requestTiles",value:function(t){return this.isMuted()||this.pyramid.requestTiles(t),this}}]),y);function y(){var t,e,n,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}(this),(e=this,t=!(n=u(y).call(this,r))||"object"!==o(n)&&"function"!=typeof n?i(e):n).muted=c(r.muted,!1),t.pyramid=new h(i(t),r),t}e.exports=p},{"../Layer":151,"./TilePyramid":160,"lodash/defaultTo":109}],159:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=(r(i,[{key:"fromTile",value:function(t){return new i(t,t,null)}},{key:"fromAncestor",value:function(t,e,n){return new i(t,e,n)}},{key:"fromDescendant",value:function(t,e){return new i(t,e,null)}}]),i);function i(t,e,n){!function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.target=t,this.tile=e,this.relative=n}e.exports=o},{}],160:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){if(e.coord.z<t.numPersistentLevels){if(!t.persistents.has(e.coord.hash))throw"Tile of coord ".concat(e.coord.hash," does not exists in the pyramid");t.persistents.delete(e.coord.hash)}var n=t.levels.get(e.coord.z);n.splice(n.indexOf(e),1),0===n.length&&t.levels.delete(e.coord.z),t.layer.emit(s.TILE_REMOVE,new l(t.layer,e))}function a(t){0===t.pending.size&&t.emitLoad(new l(t.layer,null))}var i=t("lodash/defaultTo"),u=t("lodash/throttle"),s=t("../../event/EventType"),l=t("../../event/TileEvent"),c=t("../../util/LRUCache"),f=t("./Tile"),y=t("./TilePartial"),h=(r(p.prototype,[{key:"getCapacity",value:function(){return this.cacheSize+function(t){return 1/3*(Math.pow(4,t)-1)}(this.numPersistentLevels)}},{key:"clear",value:function(){var e=this;this.pending.forEach(function(t){!function(t,e){var n=e.coord.hash,r=t.stale.get(n);r||(r=new Map,t.stale.set(n,r)),r.set(e.uid,!0)}(e,t)}),this.pending=new Map,this.persistents.forEach(function(t){o(e,t)}),this.persistents.clear(),this.tiles.clear()}},{key:"has",value:function(t){return t.z<this.numPersistentLevels?this.persistents.has(t.hash):this.tiles.has(t.hash)}},{key:"forEach",value:function(t){this.persistents.forEach(t),this.tiles.forEach(t)}},{key:"isPending",value:function(t){return this.pending.has(t.hash)}},{key:"get",value:function(t){return t.z<this.numPersistentLevels?this.persistents.get(t.hash):this.tiles.get(t.hash)}},{key:"getAncestor",value:function(t,e){var n=t.getAncestor(e);return this.get(n)}},{key:"getDescendants",value:function(t,e){for(var n=t.getDescendants(e),r=!1,o=0;o<n.length;o++)if(this.has(n[o])){r=!0;break}if(r){for(var i=new Array(n.length),a=0;a<n.length;a++){var u=n[a];i[a]=this.get(u)||u}return i}}},{key:"requestTiles",value:function(t){var o=this,e=t.map(function(t){return{coord:t,ncoord:t.normalize()}});e=function(e,t){return t.filter(function(t){return!e.get(t.ncoord)&&!e.isPending(t.ncoord)})}(this,e=function(t){var n=new Map;return t.filter(function(t){var e=t.ncoord.hash;return!n.has(e)&&n.set(e,!0)})}(e));for(var n=(e=function(t,e){var s=t.getTargetViewportCenter();return e.sort(function(t,e){var n=t.coord.getCenter(),r=e.coord.getCenter(),o=s.x-n.x,i=s.y-n.y,a=s.x-r.x,u=s.y-r.y;return o*o+i*i-(a*a+u*u)}),e}(this.layer.plot,e)).map(function(t){var e=new f(t.ncoord);return o.pending.set(e.coord.hash,e),e}),r=function(t){var r=n[t];o.layer.emit(s.TILE_REQUEST,new l(o.layer,r)),o.layer.requestTile(r.coord,function(t,e){var n=function(t,e){var n=e.coord.hash,r=t.stale.get(n);return!(!r||!r.has(e.uid)||(r.delete(e.uid),0===r.size&&t.stale.delete(n),0))}(o,r);return n||o.pending.delete(r.coord.hash),null!==t?(r.err=t,o.layer.emit(s.TILE_FAILURE,new l(o.layer,r)),void(n||a(o))):(r.data=e,n||function(t,e){var n=t.layer.plot;return!n||!n.getTargetViewport().isInView(e.coord,n.wraparound)}(o,r)?(o.layer.emit(s.TILE_DISCARD,new l(o.layer,r)),void(n||a(o))):(function(t,e){if(e.coord.z<t.numPersistentLevels){if(t.persistents.has(e.coord.hash))throw"Tile of coord ".concat(e.coord.hash," already exists in the pyramid");t.persistents.set(e.coord.hash,e)}else{if(t.tiles.has(e.coord.hash))throw"Tile of coord ".concat(e.coord.hash," already exists in the pyramid");t.tiles.set(e.coord.hash,e)}t.levels.has(e.coord.z)||t.levels.set(e.coord.z,[]),t.levels.get(e.coord.z).push(e),t.layer.emit(s.TILE_ADD,new l(t.layer,e))}(o,r),a(o),void o.layer.plot.setDirty()))})},i=0;i<n.length;i++)r(i)}},{key:"getAvailableLOD",value:function(t){var e=this.get(t);if(e)return[y.fromTile(e)];var n=t.z,r=[];this.levels.forEach(function(t,e){e!==n&&r.push(e)}),r.sort(function(t,e){return(n<t?t-n:n-t-.5)-(n<e?e-n:n-e-.5)});for(var o=[],i=[],a=t,u=r.shift();void 0!==a&&void 0!==u;){if(u<a.z){var s=a.z-u,l=this.getAncestor(a,s);if(l){o.push(y.fromAncestor(t,l,a)),a=i.shift();continue}}else if(u-n<4){var c=u-a.z,f=this.getDescendants(a,c);if(f){for(var h=0;h<f.length;h++){var p=f[h];p.coord?o.push(y.fromDescendant(t,p)):i.push(p)}a=i.shift()}}u=r.shift()}return 0<o.length?o:void 0}}]),p);function p(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this),!t)throw"No layer parameter provided";this.cacheSize=i(n.cacheSize,256),this.numPersistentLevels=i(n.numPersistentLevels,4),this.layer=t,this.levels=new Map,this.persistents=new Map,this.pending=new Map,this.stale=new Map,this.tiles=new c({capacity:this.cacheSize,onRemove:function(t){o(e,t)}}),this.emitLoad=u(function(t){e.layer.emit(s.LOAD,t)},200)}e.exports=h},{"../../event/EventType":140,"../../event/TileEvent":143,"../../util/LRUCache":186,"./Tile":156,"./TilePartial":159,"lodash/defaultTo":109,"lodash/throttle":133}],161:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=t("../geometry/Bounds"),a=Math.pow(2,16)/2,o=(r(u.prototype,[{key:"project",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:this.zoom,r=Math.pow(2,n-this.zoom)*this.extent;return{x:(t.x-this.offset.x)*r,y:(t.y-this.offset.y)*r}}},{key:"unproject",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:this.zoom,r=Math.pow(2,n-this.zoom)*this.extent;return{x:t.x/r+this.offset.x,y:t.y/r+this.offset.y}}}]),u);function u(t,e,n){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this);var r=a/n,o={x:e.x-r,y:e.y-r};this.zoom=t,this.halfSize=r,this.center=e,this.offset=o,this.extent=n,this.bounds=new i(e.x-r,e.x+r,e.y-r,e.y+r)}e.exports=o},{"../geometry/Bounds":145}],162:[function(t,e,n){function h(t){return(h="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(){var e=this.getTargetVisibleCoords();return this.layers.forEach(function(t){t.requestTiles&&t.requestTiles(e)}),this}function v(t){var e=t.getTargetZoom(),n=t.getTargetViewportCenter(),r=t.getTargetPixelExtent(),o=t.getViewportPixelSize(),i=new l(e,n,r),a=!1;if(t.cell)if(1<=Math.abs(t.cell.zoom-i.zoom))a=!0;else{var u=t.cell.halfSize-o.width/t.cell.extent,s=t.cell.halfSize-o.height/t.cell.extent;(Math.abs(i.center.x-t.cell.center.x)>u||Math.abs(i.center.y-t.cell.center.y)>s)&&(a=!0)}else a=!0;a&&(t.cell=i,t.emit(_.CELL_UPDATE,new O(i)))}var m=t("lodash/clamp"),b=t("lodash/defaultTo"),g=t("lodash/throttle"),i=t("events"),_=t("../event/EventType"),x=t("../event/EventBroadcaster"),w=t("../event/EventDelegator"),O=t("../event/Event"),S=t("../event/ResizeEvent"),T=t("../webgl/RenderBuffer"),E=t("./handler/ClickHandler"),P=t("./handler/MouseHandler"),j=t("./handler/PanHandler"),k=t("./handler/ZoomHandler"),l=t("./Cell"),C=t("./Viewport"),A=Symbol(),R=Symbol(),M=Symbol(),L=Symbol(),D=Symbol(),I=Symbol(),F=Symbol(),z=Symbol(),a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(N,i),r(N.prototype,[{key:"destroy",value:function(){var e=this;return cancelAnimationFrame(this.frameRequest),this.frameRequest=null,this[D].forEach(function(t){t.disable()}),this.layers.forEach(function(t){e.remove(t)}),this.ctx=null,this.container.removeChild(this.canvas),this.canvas=null,this.container=null,this.renderBuffer=null,this}},{key:"setDirty",value:function(){this[z]=!0}},{key:"isDirty",value:function(){return this[z]||this.isPanning()||this.isZooming()}},{key:"clearDirty",value:function(){this[z]=!1}},{key:"add",value:function(t){if(!t)throw"No argument provided";if(-1!==this.layers.indexOf(t))throw"Provided layer is already attached to the plot";return this.layers.push(t),t.onAdd(this),this.setDirty(),this}},{key:"remove",value:function(t){if(!t)throw"No argument provided";var e=this.layers.indexOf(t);if(-1===e)throw"Provided layer is not attached to the plot";return this.layers.splice(e,1),t.onRemove(this),this.setDirty(),this}},{key:"getRenderingContext",value:function(){return this.ctx}},{key:"getSortedLayers",value:function(){return this.layers.sort(function(t,e){return t.getZIndex()-e.getZIndex()})}},{key:"getZoom",value:function(){return this.zoom}},{key:"getTargetZoom",value:function(){return this.isZooming()?this.zoomAnimation.targetZoom:this.zoom}},{key:"getViewport",value:function(){return this.viewport}},{key:"getTargetViewport",value:function(){return this.isZooming()?this.zoomAnimation.targetViewport:this.viewport}},{key:"getViewportPosition",value:function(){return this.viewport.getPosition()}},{key:"getTargetViewportPosition",value:function(){return this.getTargetViewport().getPosition()}},{key:"getViewportCenter",value:function(){return this.viewport.getCenter()}},{key:"getTargetViewportCenter",value:function(){return this.getTargetViewport().getCenter()}},{key:"getTargetVisibleCoords",value:function(){var t=Math.round(this.getTargetZoom());return this.getTargetViewport().getVisibleCoords(t,this.wraparound)}},{key:"getVisibleCoords",value:function(){var t=Math.round(this.zoom);return this.viewport.getVisibleCoords(t,this.wraparound)}},{key:"getPixelExtent",value:function(){return Math.pow(2,this.zoom)*this.tileSize}},{key:"getTargetPixelExtent",value:function(){return Math.pow(2,this.getTargetZoom())*this.tileSize}},{key:"getViewportPixelSize",value:function(){return this.viewport.getPixelSize(this.zoom,this.tileSize)}},{key:"getTargetViewportPixelSize",value:function(){return this.getTargetViewport().getPixelSize(this.zoom,this.tileSize)}},{key:"getViewportPixelOffset",value:function(){return this.viewport.getPixelOffset(this.zoom,this.tileSize)}},{key:"getTargetViewportPixelOffset",value:function(){return this.getTargetViewport().getPixelOffset(this.zoom,this.tileSize)}},{key:"mouseToPlotCoord",value:function(t){var e=this.getPixelExtent(),n=this.getViewportPixelSize(),r=this.getContainer().getBoundingClientRect(),o=t.pageX-r.left,i=t.pageY-r.top;return{x:this.viewport.x+o/e,y:this.viewport.y+(n.height-i)/e}}},{key:"mouseToViewportPixel",value:function(t){var e=this.getViewportPixelSize(),n=this.getContainer().getBoundingClientRect(),r=t.pageX-n.left,o=t.pageY-n.top;return{x:r,y:e.height-o}}},{key:"viewportPixelToPlotCoord",value:function(t){var e=this.getPixelExtent();return{x:t.x/e,y:t.y/e}}},{key:"plotCoordToViewportPixel",value:function(t){var e=this.plot.getPixelExtent();return{x:t.x*e,y:t.y*e}}},{key:"getOrthoMatrix",value:function(){var t=this.getViewportPixelSize(),e=t.width,n=t.height,r=1/(0-e),o=1/(0-n),i=new Float32Array(16);return i[0]=-2*r,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=-1,i[11]=0,i[12]=(0+e)*r,i[13]=(n+0)*o,i[14]=-0,i[15]=1,i}},{key:"panTo",value:function(t,e){var n=!(1<arguments.length&&void 0!==e)||e;return this.cancelPan(),this.cancelZoom(),this[D].get(M).panTo(t,n),this.setDirty(),this}},{key:"zoomTo",value:function(t,e){var n=!(1<arguments.length&&void 0!==e)||e;return this.cancelPan(),this.cancelZoom(),this[D].get(L).zoomTo(t,n),this.setDirty(),this}},{key:"zoomToPosition",value:function(t,e,n){var r=!(2<arguments.length&&void 0!==n)||n;return this.cancelPan(),this.cancelZoom(),this[D].get(L).zoomToPosition(t,e,r),this.setDirty(),this}},{key:"fitToBounds",value:function(t){var e=this.getTargetZoom(),n=this.getTargetViewport(),r=n.width/t.getWidth(),o=n.height/t.getHeight(),i=Math.min(r,o),a=Math.log2(i)+e;a=m(a,this.minZoom,this.maxZoom),this.continuousZoom||(a=Math.floor(a));var u=t.getCenter();return this.zoomTo(a,!1),this.panTo(u,!1),this.setDirty(),this}},{key:"isPanning",value:function(){return!!this.panAnimation}},{key:"isZooming",value:function(){return!!this.zoomAnimation}},{key:"cancelPan",value:function(){return!(!this.isPanning()||(this.panAnimation.cancel(),this.panAnimation=null))}},{key:"cancelZoom",value:function(){return!(!this.isZooming()||(this.zoomAnimation.cancel(),this.zoomAnimation=null))}},{key:"enablePanning",value:function(){this[D].get(M).enable()}},{key:"disablePanning",value:function(){this[D].get(M).disable()}},{key:"enableZooming",value:function(){this[D].get(L).enable()}},{key:"disableZooming",value:function(){this[D].get(L).disable()}},{key:"getHighlighted",value:function(){for(var t=this.layers,e=0;e<t.length;e++){var n=t[e].getHighlighted();if(n)return n}return null}},{key:"isHighlighted",value:function(t){for(var e=this.layers,n=0;n<e.length;n++)if(e[n].isHighlighted(t))return!0;return!1}},{key:"getSelected",value:function(){for(var t=[],e=this.layers,n=0;n<e.length;n++)for(var r=e[n].getSelected(),o=0;o<r.length;o++)t.push(r[o]);return t}},{key:"isSelected",value:function(t){for(var e=this.layers,n=0;n<e.length;n++)if(e[n].isSelected(t))return!0;return!1}},{key:"getContainer",value:function(){return this.container}}]),N);function N(t){var e,n,r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(t){if(!(t instanceof N))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(r=p(N).call(this))||"object"!==h(r)&&"function"!=typeof r?y(n):r).container=document.querySelector(t),!e.container)throw"Element could not be found for selector ".concat(t);if(e.pixelRatio=window.devicePixelRatio,e.canvas=document.createElement("canvas"),e.canvas.style.width="".concat(e.container.offsetWidth,"px"),e.canvas.style.height="".concat(e.container.offsetHeight,"px"),e.canvas.width=e.container.offsetWidth*e.pixelRatio,e.canvas.height=e.container.offsetHeight*e.pixelRatio,e.container.appendChild(e.canvas),e.ctx=e.canvas.getContext("webgl",o.contextAttributes)||e.canvas.getContext("experimental-webgl",o.contextAttributes),!e.ctx&&!o.noContext)throw"Unable to create a WebGLRenderingContext, please ensure your browser supports WebGL";e.ctx?e.renderBuffer=new T(e.ctx,e.canvas.width,e.canvas.height):e.renderBuffer=null,e.tileSize=b(o.tileSize,256),e.minZoom=b(o.minZoom,0),e.maxZoom=b(o.maxZoom,24),e.zoom=b(o.zoom,0),e.zoom=m(e.zoom,e.minZoom,e.maxZoom);var i=Math.pow(2,e.zoom),a=e.canvas.offsetWidth/i,u=e.canvas.offsetHeight/i;e.viewport=new C(0,0,a,u);var s=b(o.center,{x:.5,y:.5});e.viewport.centerOn(s),e.cell=null,v(y(e)),e.wraparound=b(o.wraparound,!1);var l=b(o.panThrottle,100),c=b(o.resizeThrottle,200),f=b(o.zoomThrottle,400);return e.panRequest=g(d,l,{leading:!1}),e.resizeRequest=g(d,c,{leading:!1}),e.zoomRequest=g(d,f,{leading:!1}),e.layers=[],e.frameRequest=null,e[D]=new Map,e[D].set(A,new E(y(e),o)),e[D].set(R,new P(y(e),o)),e[D].set(M,new j(y(e),o)),e[D].set(L,new k(y(e),o)),e[D].forEach(function(t){t.enable()}),e[I]=new w(y(e)),e[I].delegate(_.CLICK),e[I].delegate(_.DBL_CLICK),e[I].delegate(_.MOUSE_MOVE),e[I].delegate(_.MOUSE_UP),e[I].delegate(_.MOUSE_DOWN),e[F]=new x(y(e)),e[F].broadcast(_.ZOOM_START),e[F].broadcast(_.ZOOM),e[F].broadcast(_.ZOOM_END),e[F].broadcast(_.PAN_START),e[F].broadcast(_.PAN),e[F].broadcast(_.PAN_END),e.dirtyChecking=b(o.dirtyChecking,!0),e[z]=!0,function t(e){var n=Date.now();e.emit(_.FRAME,new O(e,n)),function(t){var e={width:t.container.offsetWidth,height:t.container.offsetHeight},n=t.getViewportPixelSize(),r=t.viewport.getCenter();if(n.width!==e.width||n.height!==e.height||t.pixelRatio!==window.devicePixelRatio){t.pixelRatio=window.devicePixelRatio,t.canvas.style.width=e.width+"px",t.canvas.style.height=e.height+"px",t.canvas.width=e.width*t.pixelRatio,t.canvas.height=e.height*t.pixelRatio,t.renderBuffer&&t.renderBuffer.resize(e.width*t.pixelRatio,e.height*t.pixelRatio);var o=t.getPixelExtent();t.viewport.width=e.width/o,t.viewport.height=e.height/o,t.viewport.centerOn(r),t.resizeRequest(),t.setDirty(),t.emit(_.RESIZE,new S(t,n,e))}}(e),e.dirtyChecking&&!e.isDirty()||(e.clearDirty(),e.isZooming()&&e.zoomAnimation.update(n)&&(e.zoomAnimation=null),e.isPanning()&&(e.panAnimation.update(n)&&(e.panAnimation=null),e.panRequest()),function(t){if(t.wraparound){var e=Math.ceil(t.viewport.width/1);1<t.viewport.x&&(t.viewport.x-=e,t.isPanning()&&(t.panAnimation.start.x-=e)),t.viewport.x+t.viewport.width<0&&(t.viewport.x+=e,t.isPanning()&&(t.panAnimation.start.x+=e))}}(e),v(e),function(t){var e=t.getRenderingContext();if(e){e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT);var n=t.getViewportPixelSize();e.viewport(0,0,n.width*t.pixelRatio,n.height*t.pixelRatio)}}(e),e.getSortedLayers().forEach(function(t){t.isHidden()||t.draw(n)})),e.frameRequest=requestAnimationFrame(function(){t(e)})}(y(e)),e}e.exports=a},{"../event/Event":137,"../event/EventBroadcaster":138,"../event/EventDelegator":139,"../event/EventType":140,"../event/ResizeEvent":142,"../webgl/RenderBuffer":190,"./Cell":161,"./Viewport":163,"./handler/ClickHandler":167,"./handler/MouseHandler":169,"./handler/PanHandler":170,"./handler/ZoomHandler":171,events:2,"lodash/clamp":107,"lodash/defaultTo":109,"lodash/throttle":133}],163:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){var r=t.getTileBounds(e),o=Math.pow(2,e)-1,i=new c(n?-1/0:0,n?1/0:o,0,o);if(r.overlaps(i)){var a=n?r.left:Math.max(0,r.left),u=n?r.right:Math.min(o,r.right),s=Math.max(0,r.bottom),l=Math.min(o,r.top);return new c(a,u,s,l)}}function i(t,e,n,r){return t<=r&&r<=e||(r<t?r+Math.ceil((t-r)/n)*n<=e:t<=r-Math.ceil((r-e)/n)*n)}var c=t("../geometry/Bounds"),u=t("../layer/tile/TileCoord"),o=(r(l.prototype,[{key:"getTileBounds",value:function(t){var e=1/Math.pow(2,t);return new c(Math.floor(this.x/e),Math.ceil((this.x+this.width)/e)-1,Math.floor(this.y/e),Math.ceil((this.y+this.height)/e)-1)}},{key:"getVisibleCoords",value:function(t,e){var n=a(this,t,1<arguments.length&&void 0!==e&&e);if(!n)return[];for(var r=[],o=n.left;o<=n.right;o++)for(var i=n.bottom;i<=n.top;i++)r.push(new u(t,o,i));return r}},{key:"isInView",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e,r=a(this,t.z,n);if(!r)return!1;var o=Math.pow(2,t.z);return i(r.left,r.right,o,t.x)&&i(r.bottom,r.top,o,t.y)}},{key:"zoomToPos",value:function(t,e,n,r){var o=!(3<arguments.length&&void 0!==r)||r,i=Math.pow(2,e-t),a=this.width/i,u=this.height/i,s=new l(n.x-(n.x-this.x)/i,n.y-(n.y-this.y)/i,a,u);return o||s.centerOn(n),s}},{key:"getPosition",value:function(){return{x:this.x,y:this.y}}},{key:"getCenter",value:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}}},{key:"getPixelSize",value:function(t,e){var n=Math.pow(2,t)*e;return{width:Math.round(this.width*n),height:Math.round(this.height*n)}}},{key:"getPixelOffset",value:function(t,e){var n=Math.pow(2,t)*e;return{x:this.x*n,y:this.y*n}}},{key:"centerOn",value:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}}]),l);function l(t,e,n,r){!function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),this.x=t,this.y=e,this.width=n,this.height=r}e.exports=o},{"../geometry/Bounds":145,"../layer/tile/TileCoord":157}],164:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=(r(i.prototype,[{key:"getT",value:function(t){return 0<this.duration?Math.min(1,(t-this.timestamp)/this.duration):1}},{key:"update",value:function(t){return!0}},{key:"cancel",value:function(){}},{key:"finish",value:function(){}}]),i);function i(t){!function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.timestamp=Date.now(),this.duration=t.duration,this.plot=t.plot}e.exports=o},{}],165:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=t("../../event/EventType"),s=t("../../event/Event"),l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,t("./Animation")),o(c.prototype,[{key:"update",value:function(t){var e=this.getT(t),n=1-Math.pow(1-e,1/this.easing),r=this.plot;r.viewport.x=this.start.x+this.delta.x*n,r.viewport.y=this.start.y+this.delta.y*n;var o=new s(r);return e<1?(r.emit(u.PAN,o),!1):(r.emit(u.PAN_END,o),!0)}},{key:"cancel",value:function(){var t=this.plot;t.emit(u.PAN_END,new s(t))}},{key:"finish",value:function(){var t=this.plot;t.viewport.x=this.end.x,t.viewport.y=this.end.y,t.emit(u.PAN_END,new s(t))}}]),c);function c(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,i(c).call(this,e))).start=e.start,t.delta=e.delta,t.end={x:t.start.x+t.delta.x,y:t.start.y+t.delta.y},t.easing=e.easing,t}e.exports=l},{"../../event/Event":137,"../../event/EventType":140,"./Animation":164}],166:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=t("../../event/EventType"),s=t("../../event/Event"),l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,t("./Animation")),o(c.prototype,[{key:"update",value:function(t){var e=this.getT(t),n=this.targetZoom-this.prevZoom,r=this.prevZoom+n*e,o=this.plot;o.zoom=r,o.viewport=this.prevViewport.zoomToPos(this.prevZoom,o.zoom,this.targetPos);var i=new s(o);return e<1?(o.emit(u.ZOOM,i),!1):(o.emit(u.ZOOM_END,i),!0)}},{key:"cancel",value:function(){var t=this.plot;t.continuousZoom||(t.zoom=Math.round(t.zoom),t.viewport=this.prevViewport.zoomToPos(this.prevZoom,t.zoom,this.targetPos));var e=new s(t);t.emit(u.ZOOM_END,e)}},{key:"finish",value:function(){var t=this.plot;t.zoom=this.targetZoom,t.viewport=this.targetViewport;var e=new s(t);t.emit(u.ZOOM_END,e)}}]),c);function c(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,i(c).call(this,e))).prevZoom=e.prevZoom,t.targetZoom=e.targetZoom,t.prevViewport=e.prevViewport,t.targetViewport=e.targetViewport,t.targetPos=e.targetPos,t}e.exports=l},{"../../event/Event":137,"../../event/EventType":140,"./Animation":164}],167:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e,n){return new a(e,n,t.mouseToPlot(n),t.mouseToViewPx(n))}var c=t("../../event/EventType"),a=t("../../event/MouseEvent"),f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(h,t("./DOMHandler")),o(h.prototype,[{key:"enable",value:function(){var o=this;if(this.enabled)return this;var i=this.plot,a=null;this.mousedown=function(t){a=o.mouseToViewPx(t)},this.mouseup=function(t){if(a){var e=o.mouseToViewPx(t),n=a.x-e.x,r=a.y-e.y;n*n+r*r<225&&(i.setDirty(),t.preventDefault(),o.plot.emit(c.CLICK,l(o,i,t))),a=null}},this.dblclick=function(t){i.setDirty(),t.preventDefault(),o.plot.emit(c.DBL_CLICK,l(o,i,t))};var t=i.getContainer();return t.addEventListener("mousedown",this.mousedown),t.addEventListener("mouseup",this.mouseup),t.addEventListener("dblclick",this.dblclick),u(s(h.prototype),"enable",this).call(this)}},{key:"disable",value:function(){if(!this.enabled)return this;var t=this.plot.getContainer();return t.removeEventListener("mousedown",this.mousedown),t.removeEventListener("mouseup",this.mouseup),t.removeEventListener("dblclick",this.dblclick),this.mousedown=null,this.mouseup=null,this.dblclick=null,u(s(h.prototype),"disable",this).call(this)}}]),h);function h(t){return function(t){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,s(h).call(this,t))}e.exports=f},{"../../event/EventType":140,"../../event/MouseEvent":141,"./DOMHandler":168}],168:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=(r(i.prototype,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"mouseToPlot",value:function(t){return this.plot.mouseToPlotCoord(t)}},{key:"mouseToViewPx",value:function(t){return this.plot.mouseToViewportPixel(t)}},{key:"viewPxToPlot",value:function(t){return this.plot.viewportPixelToPlotCoord(t)}},{key:"plotToViewPx",value:function(t){return this.plot.plotCoordToViewportPixel(t)}},{key:"isLeftButton",value:function(t){return t.which?1===t.which:0===t.button}},{key:"isMiddleButton",value:function(t){return t.which?2===t.which:1===t.button}},{key:"isRightButton",value:function(t){return t.which?3===t.which:2===t.button}}]),i);function i(t){!function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.plot=t,this.enabled=!1}e.exports=o},{}],169:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,n){return new c(e,n,t.mouseToPlot(n),t.mouseToViewPx(n))}var l=t("../../event/EventType"),c=t("../../event/MouseEvent"),f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(h,t("./DOMHandler")),o(h.prototype,[{key:"enable",value:function(){var e=this;if(this.enabled)return this;var n=this.plot;this.mousedown=function(t){n.setDirty(),t.preventDefault(),n.emit(l.MOUSE_DOWN,s(e,n,t))},this.mouseup=function(t){n.setDirty(),t.preventDefault(),n.emit(l.MOUSE_UP,s(e,n,t))},this.mousemove=function(t){n.setDirty(),t.preventDefault(),n.emit(l.MOUSE_MOVE,s(e,n,t))},this.mouseover=function(t){n.setDirty(),t.preventDefault(),n.emit(l.MOUSE_OVER,s(e,n,t))},this.mouseout=function(t){n.setDirty(),t.preventDefault(),n.emit(l.MOUSE_OUT,s(e,n,t))},this.wheel=function(t){n.setDirty(),t.preventDefault()};var t=n.getContainer();return t.addEventListener("mousedown",this.mousedown),t.addEventListener("mouseup",this.mouseup),t.addEventListener("mousemove",this.mousemove),t.addEventListener("mouseover",this.mouseover),t.addEventListener("mouseout",this.mouseout),t.addEventListener("wheel",this.wheel),i(a(h.prototype),"enable",this).call(this)}},{key:"disable",value:function(){if(!this.enabled)return this;var t=this.plot.getContainer();return t.removeEventListener("mousedown",this.mousedown),t.removeEventListener("mouseup",this.mouseup),t.removeEventListener("mousemove",this.mousemove),t.removeEventListener("mouseover",this.mouseover),t.removeEventListener("mouseout",this.mouseout),t.removeEventListener("wheel",this.wheel),this.mousedown=null,this.mouseup=null,this.mousemove=null,this.mouseover=null,this.mouseout=null,this.wheel=null,i(a(h.prototype),"disable",this).call(this)}}]),h);function h(t){return function(t){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,a(h).call(this,t))}e.exports=f},{"../../event/EventType":140,"../../event/MouseEvent":141,"./DOMHandler":168}],170:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){t.isZooming()||(t.viewport.x+=e.x,t.viewport.y+=e.y,t.panRequest(),t.emit(g.PAN,new _(t)))}var l=t("lodash/defaultTo"),b=t("../animation/PanAnimation"),g=t("../../event/EventType"),_=t("../../event/Event"),c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(x,t("./DOMHandler")),o(x.prototype,[{key:"enable",value:function(){var f=this;if(this.enabled)return this;var h=this.plot,p=!1,y=null,d=null,v=[],m=[];return this.mousedown=function(t){f.isLeftButton(t)&&(p=!0,y=f.mouseToViewPx(t),d=Date.now(),f.inertia&&(h.panAnimation=null,v=[],m=[]))},this.mousemove=function(t){if(p){var e=f.mouseToViewPx(t),n=Date.now();0===v.length&&h.emit(g.PAN_START,new _(h)),f.inertia&&(v.push(e),m.push(n),50<n-m[0]&&(v.shift(),m.shift()));var r={x:y.x-e.x,y:y.y-e.y};s(h,f.viewPxToPlot(r)),d=n,y=e}},this.mouseup=function(t){if(p=!1,!h.isZooming()&&f.isLeftButton(t)&&0!==v.length)if(f.inertia){for(var e=Date.now();50<e-m[0];)v.shift(),m.shift();if(m.length<2)h.emit(g.PAN_END,new _(h));else{var n=f.inertiaDeceleration,r=f.inertiaEasing,o=y.x-v[0].x,i=y.y-v[0].y,a=(d-m[0]||1)/1e3,u=r/a*o,s=r/a*i,l=Math.sqrt(u*u+s*s)/(n*r),c={x:Math.round(-l/2*u),y:Math.round(-l/2*s)};h.panAnimation=new b({plot:h,start:h.getViewportPosition(),delta:f.viewPxToPlot(c),easing:r,duration:1e3*l})}}else h.emit(g.PAN_END,new _(h))},h.getContainer().addEventListener("mousedown",this.mousedown),document.addEventListener("mousemove",this.mousemove),document.addEventListener("mouseup",this.mouseup),i(a(x.prototype),"enable",this).call(this)}},{key:"disable",value:function(){return this.enabled?(this.plot.getContainer().removeEventListener("mousedown",this.mousedown),document.removeEventListener("mousemove",this.mousemove),document.removeEventListener("mouseup",this.mouseup),this.mousedown=null,this.mousemove=null,this.mouseup=null,i(a(x.prototype),"disable",this).call(this)):this}},{key:"panTo",value:function(t,e){var n=!(1<arguments.length&&void 0!==e)||e,r=this.plot,o=r.getViewportCenter(),i={x:t.x-o.x,y:t.y-o.y};n?(r.emit(g.PAN_START,new _(r)),r.panAnimation=new b({plot:r,start:r.getViewportPosition(),delta:i,easing:this.inertiaEasing,duration:800})):(r.emit(g.PAN_START,new _(r)),s(r,i),r.emit(g.PAN_END,new _(r)))}}]),x);function x(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t){if(!(t instanceof x))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,a(x).call(this,t))).inertia=l(n.inertia,!0),e.inertiaEasing=l(n.inertiaEasing,.2),e.inertiaDeceleration=l(n.inertiaDeceleration,3400),e}e.exports=c},{"../../event/Event":137,"../../event/EventType":140,"../animation/PanAnimation":165,"./DOMHandler":168,"lodash/defaultTo":109}],171:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e,n,r,o){var i,a,u,s,l,c,f=!(4<arguments.length&&void 0!==o)||o,h=(i=n,a=t.zoom,u=t.zoomAnimation,s=t.minZoom,l=t.maxZoom,c=u?u.targetZoom+i:a+i,m(c,s,l)),p=t.viewport.zoomToPos(t.zoom,h,e,f),y=t.getTargetZoom(),d=t.getTargetViewport();h===y&&p.x===d.x&&p.y===d.y||(t.panAnimation=null,0<r&&(t.zoomAnimation=new _({plot:t,duration:r,prevZoom:t.zoom,targetZoom:h,prevViewport:new x(t.viewport.x,t.viewport.y,t.viewport.width,t.viewport.height),targetViewport:p,targetPos:e})),t.emit(b.ZOOM_START,new g(t)),0===r&&(t.zoom=h,t.viewport=p,t.emit(b.ZOOM_END,new g(t))),t.zoomRequest())}function h(t,e,n,r,o){if(0!==r){var i=(f=r,h=o,p=t.deltaPerZoom,y=t.maxConcurrentZooms,d=f/p,h||(d=0<f?Math.ceil(d):Math.floor(d)),m(d,-y,y)),a=t.zoomDuration;o&&(u=e.zoomAnimation,s=r,l=Date.now(),c=l-w,w=l,s%4.000244140625!=0&&(Math.abs(s)<4||(!u||0===u.duration)&&c<40))&&(a=0),v(e,n,i,a)}var u,s,l,c,f,h,p,y,d}var m=t("lodash/clamp"),a=t("lodash/defaultTo"),p=t("../../util/Browser"),b=t("../../event/EventType"),g=t("../../event/Event"),_=t("../animation/ZoomAnimation"),x=t("../Viewport"),u=t("./DOMHandler"),w=Date.now(),s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(y,u),o(y.prototype,[{key:"enable",value:function(){var i=this;if(this.enabled)return this;var a=this.plot,u=0,s=null,l=null;this.dblclick=function(t){var e=i.mouseToPlot(t);v(a,e,1,i.zoomDuration)},this.wheel=function(t){var e,n,r=(e=a,0===(n=t).deltaMode?p.firefox?-n.deltaY/e.pixelRatio:-n.deltaY:1===n.deltaMode?20*-n.deltaY:60*-n.deltaY);if(i.continuousZoom||!(Math.abs(r)<4)){if(u+=r,i.continuousZoom){var o=i.mouseToPlot(t);h(i,a,o,u,!0),u=0}else l=t,s=s||setTimeout(function(){var t=i.mouseToPlot(l);h(i,a,t,u,!1),u=0,l=s=null},i.zoomDebounce);t.preventDefault(),t.stopPropagation()}};var t=a.getContainer();return t.addEventListener("dblclick",this.dblclick),t.addEventListener("wheel",this.wheel),c(f(y.prototype),"enable",this).call(this)}},{key:"disable",value:function(){if(!this.enabled)return this;var t=this.plot.getContainer();return t.removeEventListener("dblclick",this.dblclick),t.removeEventListener("wheel",this.wheel),this.dblclick=null,this.wheel=null,c(f(y.prototype),"disable",this).call(this)}},{key:"zoomTo",value:function(t,e){var n=!(1<arguments.length&&void 0!==e)||e,r=this.plot;v(r,this.plot.getViewportCenter(),t-r.zoom,n?this.zoomDuration:0)}},{key:"zoomToPosition",value:function(t,e,n){var r=!(2<arguments.length&&void 0!==n)||n,o=this.plot;v(o,e,t-o.zoom,r?this.zoomDuration:0,!1)}}]),y);function y(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,f(y).call(this,t))).continuousZoom=a(n.continuousZoom,!1),e.zoomDuration=a(n.zoomDuration,250),e.maxConcurrentZooms=a(n.maxConcurrentZooms,4),e.deltaPerZoom=a(n.deltaPerZoom,300),e.zoomDebounce=a(n.zoomDebounce,100),e}e.exports=s},{"../../event/Event":137,"../../event/EventType":140,"../../util/Browser":185,"../Viewport":163,"../animation/ZoomAnimation":166,"./DOMHandler":168,"lodash/clamp":107,"lodash/defaultTo":109}],172:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(s,t("events")),o(s.prototype,[{key:"onAdd",value:function(t){return this}},{key:"onRemove",value:function(t){return this}},{key:"pick",value:function(t){return null}},{key:"clear",value:function(){return this}},{key:"draw",value:function(t){return this}}]),s);function s(){return function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,i(s).call(this))}e.exports=u},{events:2}],173:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(s,t("../Renderer")),o(s.prototype,[{key:"onAdd",value:function(t){if(!t)throw"No overlay provided as argument";return this.overlay=t,this}},{key:"onRemove",value:function(t){if(!t)throw"No overlay provided as argument";return this.overlay=null,this}}]),s);function s(){var t;return function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,i(s).call(this))).overlay=null,t}e.exports=u},{"../Renderer":172}],174:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("../../webgl/shader/Shader"),l=t("../../event/EventType"),c=t("./OverlayRenderer"),f=Symbol(),h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(p,c),o(p.prototype,[{key:"onAdd",value:function(t){var e=this;return i(a(p.prototype),"onAdd",this).call(this,t),this.gl=this.overlay.plot.getRenderingContext(),this.refreshBuffers(),this[f]=function(){e.refreshBuffers()},this.overlay.on(l.REFRESH,this[f]),this}},{key:"onRemove",value:function(t){return this.overlay.removeListener(l.REFRESH,this[f]),this[f]=null,this.gl=null,i(a(p.prototype),"onRemove",this).call(this,t),this}},{key:"refreshBuffers",value:function(){throw"`refreshBuffers` must be overridden"}},{key:"createShader",value:function(t){return new s(this.gl,t)}},{key:"getOrthoMatrix",value:function(){return this.overlay.plot.getOrthoMatrix()}}]),p);function p(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,a(p).call(this,e))).gl=null,t[f]=null,t}e.exports=h},{"../../event/EventType":140,"../../webgl/shader/Shader":191,"./OverlayRenderer":173}],175:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lodash/defaultTo"),l=t("../../../webgl/vertex/VertexBuffer"),c=t("../WebGLOverlayRenderer"),f={vert:"\n\t\tprecision highp float;\n\t\tattribute vec2 aPosition;\n\t\tattribute vec2 aNormal;\n\t\tuniform vec2 uViewOffset;\n\t\tuniform float uScale;\n\t\tuniform float uLineWidth;\n\t\tuniform float uPixelRatio;\n\t\tuniform float uPointRadius;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tvoid main() {\n\t\t\tvec2 wPosition = (aPosition * uScale) - uViewOffset;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t\tgl_PointSize = uPointRadius * 2.0 * uPixelRatio;\n\t\t}\n\t\t",frag:"\n\t\t#ifdef GL_OES_standard_derivatives\n\t\t\t#extension GL_OES_standard_derivatives : enable\n\t\t#endif\n\t\tprecision highp float;\n\t\tuniform vec4 uPointColor;\n\t\tuniform float uOpacity;\n\t\tvoid main() {\n\t\t\tvec2 cxy = 2.0 * gl_PointCoord - 1.0;\n\t\t\tfloat radius = dot(cxy, cxy);\n\t\t\tfloat alpha = 1.0;\n\t\t\t#ifdef GL_OES_standard_derivatives\n\t\t\t\tfloat delta = fwidth(radius);\n\t\t\t\talpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, radius);\n\t\t\t#else\n\t\t\t\tif (radius > 1.0) {\n\t\t\t\t\tdiscard;\n\t\t\t\t}\n\t\t\t#endif\n\t\t\tgl_FragColor = vec4(uPointColor.rgb, uPointColor.a * alpha * uOpacity);\n\t\t}\n\t\t"},h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(p,c),o(p.prototype,[{key:"onAdd",value:function(t){return i(a(p.prototype),"onAdd",this).call(this,t),this.ext=this.gl.getExtension("OES_standard_derivatives"),this.shader=this.createShader(f),this}},{key:"onRemove",value:function(t){return this.shader=null,this.ext=null,this.points=null,i(a(p.prototype),"onRemove",this).call(this,t),this}},{key:"refreshBuffers",value:function(){var t=this.overlay.getClippedGeometry();t&&0<t.length?this.points=function(t,e){var n=function(t){for(var e=new Float32Array(2*t.length),n=0;n<t.length;n++){var r=t[n];e[2*n]=r.x,e[2*n+1]=r.y}return e}(e);return new l(t,n,{0:{size:2,type:"FLOAT"}},{mode:"POINTS",count:e.length})}(this.gl,t):this.points=null}},{key:"draw",value:function(){if(!this.points)return this;var t=this.gl,e=this.shader,n=this.points,r=this.overlay.plot,o=r.cell,i=this.getOrthoMatrix(),a=Math.pow(2,r.zoom-o.zoom),u=this.overlay.opacity,s=o.project(r.viewport,r.zoom);return t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),e.use(),e.setUniform("uProjectionMatrix",i),e.setUniform("uViewOffset",[s.x,s.y]),e.setUniform("uScale",a),e.setUniform("uPointColor",this.pointColor),e.setUniform("uPointRadius",this.pointRadius),e.setUniform("uPixelRatio",r.pixelRatio),e.setUniform("uOpacity",u),n.bind(),n.draw(),this}}]),p);function p(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,a(p).call(this,e))).pointColor=s(e.pointColor,[1,0,1,1]),t.pointRadius=s(e.pointRadius,4),t.shader=null,t.ext=null,t.points=null,t}e.exports=h},{"../../../webgl/vertex/VertexBuffer":198,"../WebGLOverlayRenderer":174,"lodash/defaultTo":109}],176:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("earcut"),l=t("lodash/defaultTo"),c=t("../../../webgl/vertex/VertexBuffer"),f=t("../../../webgl/vertex/IndexBuffer"),h=t("../WebGLOverlayRenderer"),p={vert:"\n\t\tprecision highp float;\n\t\tattribute vec2 aPosition;\n\t\tuniform vec2 uViewOffset;\n\t\tuniform float uScale;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tvoid main() {\n\t\t\tvec2 wPosition = (aPosition * uScale) - uViewOffset;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\t\tuniform vec4 uPolygonColor;\n\t\tuniform float uOpacity;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(uPolygonColor.rgb, uPolygonColor.a * uOpacity);\n\t\t}\n\t\t"},y=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(d,h),o(d.prototype,[{key:"onAdd",value:function(t){return i(a(d.prototype),"onAdd",this).call(this,t),this.shader=this.createShader(p),this}},{key:"onRemove",value:function(t){return i(a(d.prototype),"onRemove",this).call(this,t),this.shader=null,this}},{key:"refreshBuffers",value:function(){var e=this,t=this.overlay.getClippedGeometry();this.polygons=t?t.map(function(t){return function(t,e){var n=function(t){for(var e=new Float32Array(2*t.length),n=0;n<t.length;n++)e[2*n]=t[n].x,e[2*n+1]=t[n].y;return e}(e),r=s(n),o=new c(t.gl,n,{0:{size:2,type:"FLOAT"}}),i=n.length<Math.pow(2,16);return{vertex:o,index:new f(t.gl,i?new Uint16Array(r):new Uint32Array(r),{mode:"TRIANGLES",type:i?"UNSIGNED_SHORT":"UNSIGNED_INT",count:r.length})}}(e,t)}):null}},{key:"draw",value:function(){if(!this.polygons)return this;var t=this.gl,e=this.shader,n=this.polygons,r=this.overlay.plot,o=r.cell,i=this.getOrthoMatrix(),a=Math.pow(2,r.zoom-o.zoom),u=this.overlay.opacity,s=o.project(r.viewport,r.zoom);return t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),e.use(),e.setUniform("uProjectionMatrix",i),e.setUniform("uViewOffset",[s.x,s.y]),e.setUniform("uScale",a),e.setUniform("uPolygonColor",this.polygonColor),e.setUniform("uOpacity",u),n.forEach(function(t){t.vertex.bind(),t.index.draw()}),this}}]),d);function d(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,a(d).call(this,e))).polygonColor=l(e.polygonColor,[1,.4,.1,.8]),t.shader=null,t.polygons=null,t}e.exports=y},{"../../../webgl/vertex/IndexBuffer":196,"../../../webgl/vertex/VertexBuffer":198,"../WebGLOverlayRenderer":174,earcut:1,"lodash/defaultTo":109}],177:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e){return{x:t.x*e,y:t.y*e}}function w(t){return{x:-t.y,y:t.x}}function O(t){return{x:-t.x,y:-t.y}}function S(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function T(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return{x:t.x/e,y:t.y/e}}function E(t,e){return{x:t.x+e.x,y:t.y+e.y}}function P(t,e){return{x:t.x-e.x,y:t.y-e.y}}function d(t,e){return x(E(t,e),.5)}var s=t("lodash/defaultTo"),l=t("../../../webgl/vertex/VertexBuffer"),c=t("../WebGLOverlayRenderer"),f={vert:"\n\t\tprecision highp float;\n\t\tattribute vec2 aPosition;\n\t\tattribute vec2 aNormal;\n\t\tuniform vec2 uViewOffset;\n\t\tuniform float uScale;\n\t\tuniform float uLineWidth;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tvoid main() {\n\t\t\tvec2 wPosition = (aPosition * uScale) - uViewOffset + aNormal * uLineWidth;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\t\tuniform vec4 uLineColor;\n\t\tuniform float uOpacity;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(uLineColor.rgb, uLineColor.a * uOpacity);\n\t\t}\n\t\t"},j=1e-6,k=function(t,e,n,r,o,i){var a=Math.atan2(n.y-t.y,n.x-t.x),u=Math.atan2(e.y-t.y,e.x-t.x),s=a;a<u?u-a>=Math.PI-j&&(u-=2*Math.PI):a-u>=Math.PI-j&&(a-=2*Math.PI);var l=u-a;if(Math.abs(l)>=Math.PI-j&&Math.abs(l)<=Math.PI+j){var c=P(t,r);0===c.x?0<c.y&&(l=-l):c.x>=-j&&(l=-l)}for(var f=Math.ceil(16*Math.abs(l/Math.PI)),h=l/f,p={x:0,y:0},y=0;y<f;y++){var d={x:Math.cos(s+h*y),y:Math.sin(s+h*y)},v={x:Math.cos(s+h*(1+y)),y:Math.sin(s+h*(1+y))};o.push(t),o.push(t),o.push(t),i.push(p),i.push(d),i.push(v)}};function v(t,e,n,r,o,i){var a,u,s,l=P(e,t),c=P(n,e);l=w(l),c=w(c),0<(a=t,s=n,((u=e).x-a.x)*(s.y-a.y)-(s.x-a.x)*(u.y-a.y))&&(l=O(l),c=O(c)),l=T(l),c=T(c),l=x(l,i),c=x(c,i);var f=function(t,e,n,r){var o=e.y-t.y,i=t.x-e.x,a=r.y-n.y,u=n.x-r.x,s=o*u-a*i;if(-j<s&&s<j)return null;var l=o*t.x+i*t.y,c=a*n.x+u*n.y;return{x:(u*l-i*c)/s,y:(o*c-a*l)/s}}(E(l,t),E(l,e),E(c,n),E(c,e)),h=null,p=Number.MAX_VALUE,y=null;f&&(p=S(h=P(f,e)),y=O(x(h,1/i)));var d=S(P(t,e)),v=S(P(e,n)),m=T(l),b=O(m),g=T(c),_=O(g);d<p||v<p?(r.push(t),r.push(t),r.push(e),o.push(m),o.push(b),o.push(m),r.push(t),r.push(e),r.push(e),o.push(b),o.push(m),o.push(b),k(e,E(e,l),E(e,c),n,r,o),r.push(n),r.push(e),r.push(e),o.push(g),o.push(_),o.push(g),r.push(n),r.push(e),r.push(n),o.push(g),o.push(_)):(r.push(t),r.push(t),r.push(e),o.push(m),o.push(b),o.push(y),r.push(t),r.push(e),r.push(e),o.push(m),o.push(y),o.push(m),r.push(e),r.push(e),r.push(e),o.push(m),o.push({x:0,y:0}),o.push(y),k(e,E(e,l),E(e,c),P(e,h),r,o),r.push(e),r.push(e),r.push(e),o.push({x:0,y:0}),o.push(g),o.push(y),r.push(n),r.push(e),r.push(e),o.push(g),o.push(y),o.push(g),r.push(n),r.push(e),r.push(n),o.push(g),o.push(y)),o.push(_)}var h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(p,c),o(p.prototype,[{key:"onAdd",value:function(t){return i(a(p.prototype),"onAdd",this).call(this,t),this.shader=this.createShader(f),this}},{key:"onRemove",value:function(t){return i(a(p.prototype),"onRemove",this).call(this,t),this.shader=null,this}},{key:"refreshBuffers",value:function(){var e=this,t=this.overlay.getClippedGeometry();this.lines=t?t.map(function(t){return function(t,e){var n=function(t,e){if(t.length<2)throw"A valid polyline must consist of at least 2 points";var n,r,o=e/2,i=[],a=[],u=[],s=!1;if(2===t.length)v(t[0],d(t[0],t[1]),t[1],i,a,o);else{if(n=t[0],r=t[t.length-1],n.x===r.x&&n.y===r.y){var l=d(t.shift(),t[0]);t.unshift(l),t.push(l),s=!0}for(var c=0;c<t.length-1;c++)0===c?u.push(t[0]):c===t.length-2?u.push(t[t.length-1]):u.push(d(t[c],t[c+1]));for(var f=1;f<u.length;f++)v(u[f-1],t[f],u[f],i,a,o)}if(!s){var h=t[0],p=t[1],y=w(P(p,h));k(h,E(h,y),P(h,y),p,i,a),h=t[t.length-1],y=w(P(p=t[t.length-2],h)),k(h,E(h,y),P(h,y),p,i,a)}return{positions:i,normals:a}}(e,t.lineWidth),r=function(t,e){for(var n=new Float32Array(4*t.length),r=0;r<t.length;r++){var o=t[r],i=e[r];n[4*r]=o.x,n[4*r+1]=o.y,n[4*r+2]=i.x,n[4*r+3]=i.y}return n}(n.positions,n.normals);return new l(t.gl,r,{0:{size:2,type:"FLOAT",byteOffset:0},1:{size:2,type:"FLOAT",byteOffset:8}},{mode:"TRIANGLES",count:n.positions.length})}(e,t)}):null}},{key:"draw",value:function(){if(!this.lines)return this;var t=this.gl,e=this.shader,n=this.lines,r=this.overlay.plot,o=r.cell,i=this.getOrthoMatrix(),a=Math.pow(2,r.zoom-o.zoom),u=this.overlay.opacity,s=o.project(r.viewport,r.zoom);return t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),e.use(),e.setUniform("uProjectionMatrix",i),e.setUniform("uViewOffset",[s.x,s.y]),e.setUniform("uScale",a),e.setUniform("uLineWidth",this.lineWidth/2),e.setUniform("uLineColor",this.lineColor),e.setUniform("uOpacity",u),n.forEach(function(t){t.bind(),t.draw()}),this}}]),p);function p(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,a(p).call(this,e))).lineColor=s(e.lineColor,[1,.4,.1,.8]),t.lineWidth=s(e.lineWidth,2),t.shader=null,t.lines=null,t}e.exports=h},{"../../../webgl/vertex/VertexBuffer":198,"../WebGLOverlayRenderer":174,"lodash/defaultTo":109}],178:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){var n=1/Math.pow(2,e.z-t.z);return[e.x*n-t.x,e.y*n-t.y,n,n]}var o,i,a=(i=[{key:"fromTile",value:function(t,e,n,r,o){var i=n*r;return new y(t,n,[e.x*i-o.x,e.y*i-o.y],[0,0,1,1])}},{key:"fromAncestor",value:function(t,e,n,r,o,i,a){var u=n*r,s=[0,0];if(a===i)s[0]=e.x*u-o.x,s[1]=e.y*u-o.y;else{var l=1/Math.pow(2,a.z-i.z),c=a.x*l-i.x,f=a.y*l-i.y;s[0]=(e.x+c)*u-o.x,s[1]=(e.y+f)*u-o.y,n*=l}return new y(t,n,s,p(t.coord,a))}},{key:"fromDescendant",value:function(t,e,n,r,o,i){var a=n*r,u=1/Math.pow(2,t.coord.z-i.z),s=t.coord.x*u-i.x,l=t.coord.y*u-i.y;return new y(t,n*u,[(e.x+s)*a-o.x,(e.y+l)*a-o.y],[0,0,1,1])}},{key:"fromAncestorPartial",value:function(t,e,n,r,o){var i=t.tile,a=t.target,u=t.relative,s=n*r,l=[0,0];if(u===t.target)l[0]=e.x*s-o.x,l[1]=e.y*s-o.y;else{var c=1/Math.pow(2,u.z-a.z),f=u.x*c-a.x,h=u.y*c-a.y;l[0]=(e.x+f)*s-o.x,l[1]=(e.y+h)*s-o.y,n*=c}return new y(i,n,l,p(i.coord,u))}},{key:"fromDescendantPartial",value:function(t,e,n,r,o){var i=t.tile,a=t.target,u=n*r,s=1/Math.pow(2,i.coord.z-a.z),l=i.coord.x*s-a.x,c=i.coord.y*s-a.y;return new y(i,n*s,[(e.x+l)*u-o.x,(e.y+c)*u-o.y],[0,0,1,1])}}],r((o=y).prototype,[{key:"toCanvas",value:function(t,e){var n=this.uvOffset;n[1]=1-n[2]-n[1];var r=this.tileOffset;return r[1]=t.height-r[1]-e*this.scale,this}}]),r(o,i),y);function y(t,e,n,r){!function(t){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}(this),this.tile=t,this.hash=t.coord.hash,this.scale=e,this.tileOffset=n,this.uvOffset=r}e.exports=a},{}],179:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=t("../../event/EventType"),f=t("../../geometry/RTreePyramid"),u=t("../Renderer"),v=t("./TileRenderable"),h=Symbol(),p=Symbol(),s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(l,u),o(l.prototype,[{key:"onAdd",value:function(t){if(!t)throw"No layer provided as argument";return this.layer=t,this}},{key:"onRemove",value:function(t){if(!t)throw"No layer provided as argument";return this.layer=null,this}},{key:"createRTreePyramid",value:function(t){var u=this,e=0<arguments.length&&void 0!==t?t:{},s=e.createCollidables;if(!s)throw"`options.createCollidables` argument is missing";function n(t){var e=t.tile,n=e.coord,r=u.layer.plot.tileSize,o=n.x*r,i=n.y*r,a=s(e,o,i);l.insert(n,a)}function r(t){l.remove(t.tile.coord)}var l=new f({nodeCapacity:e.nodeCapacity});return this.layer.on(c.TILE_ADD,n),this.layer.on(c.TILE_REMOVE,r),this[h].set(l,n),this[p].set(l,r),l}},{key:"destroyRTreePyramid",value:function(t){this.layer.removeListener(c.TILE_ADD,this[h].get(t)),this.layer.removeListener(c.TILE_REMOVE,this[p].get(t)),this[h].delete(t),this[p].delete(t)}},{key:"getRenderables",value:function(){for(var t=this.layer.plot,e=this.layer.pyramid,n=t.tileSize,r=t.zoom,o=t.getViewportPixelOffset(),i=t.getVisibleCoords(),a=[],u=0;u<i.length;u++){var s=i[u],l=s.normalize(),c=e.get(l);if(c){var f=Math.pow(2,r-s.z),h=v.fromTile(c,s,f,n,o);a.push(h)}}return a}},{key:"getRenderablesLOD",value:function(){for(var t=this.layer.plot,e=this.layer.pyramid,n=t.tileSize,r=t.zoom,o=t.getViewportPixelOffset(),i=t.getVisibleCoords(),a=[],u=0;u<i.length;u++){var s=i[u],l=s.normalize(),c=Math.pow(2,r-s.z),f=e.getAvailableLOD(l);if(f)for(var h=0;h<f.length;h++){var p,y=f[h],d=y.tile;p=d.coord.z===s.z?v.fromTile(d,s,c,n,o):d.coord.z<s.z?v.fromAncestorPartial(y,s,c,n,o):v.fromDescendantPartial(y,s,c,n,o),a.push(p)}}return a}}]),l);function l(){var t;return function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,i(l).call(this)))[h]=new Map,t[p]=new Map,t.layer=null,t}e.exports=s},{"../../event/EventType":140,"../../geometry/RTreePyramid":148,"../Renderer":172,"./TileRenderable":178}],180:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){t.set(e.coord.hash,e.data)}function l(t,e){t.delete(e.coord.hash)}function c(t,e){t.set(e.coord.hash,e.data,e.data.length/t.stride)}function f(t,e){t.delete(e.coord.hash)}var h=t("lodash/defaultTo"),p=t("../../event/EventType"),y=t("../../webgl/shader/Shader"),d=t("../../webgl/texture/TextureArray"),v=t("../../webgl/vertex/VertexAtlas"),m=t("./TileRenderer"),b=Symbol(),g=Symbol(),_=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(x,m),o(x.prototype,[{key:"onAdd",value:function(t){return i(a(x.prototype),"onAdd",this).call(this,t),this.gl=this.layer.plot.getRenderingContext(),this}},{key:"onRemove",value:function(t){return this.gl=null,i(a(x.prototype),"onRemove",this).call(this,t),this}},{key:"getOrthoMatrix",value:function(){return this.layer.plot.getOrthoMatrix()}},{key:"createShader",value:function(t){return new y(this.gl,t)}},{key:"createTextureArray",value:function(t){function e(t){i(o,t.tile)}function n(t){a(o,t.tile)}var r=0<arguments.length&&void 0!==t?t:{},o=new d(this.gl,{format:r.format,type:r.type,filter:r.filter,invertY:r.invertY,premultiplyAlpha:r.premultiplyAlpha},{numChunks:this.layer.pyramid.getCapacity(),chunkSize:r.chunkSize}),i=h(r.onAdd,s),a=h(r.onRemove,l);return this.layer.on(p.TILE_ADD,e),this.layer.on(p.TILE_REMOVE,n),this[b].set(o,e),this[g].set(o,n),o}},{key:"destroyTextureArray",value:function(t){this.layer.removeListener(p.TILE_ADD,this[b].get(t)),this.layer.removeListener(p.TILE_REMOVE,this[g].get(t)),this[b].delete(t),this[g].delete(t)}},{key:"createVertexAtlas",value:function(t){function e(t){i(o,t.tile)}function n(t){a(o,t.tile)}var r=0<arguments.length&&void 0!==t?t:{},o=new v(this.gl,r.attributePointers,{numChunks:this.layer.pyramid.getCapacity(),chunkSize:r.chunkSize}),i=h(r.onAdd,c),a=h(r.onRemove,f);return this.layer.on(p.TILE_ADD,e),this.layer.on(p.TILE_REMOVE,n),this[b].set(o,e),this[g].set(o,n),o}},{key:"destroyVertexAtlas",value:function(t){this.layer.removeListener(p.TILE_ADD,this[b].get(t)),this.layer.removeListener(p.TILE_REMOVE,this[g].get(t)),this[b].delete(t),this[g].delete(t)}}]),x);function x(){var t;return function(t){if(!(t instanceof x))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,a(x).call(this))).gl=null,t[b]=new Map,t[g]=new Map,t}e.exports=_},{"../../event/EventType":140,"../../webgl/shader/Shader":191,"../../webgl/texture/TextureArray":195,"../../webgl/vertex/VertexAtlas":197,"./TileRenderer":179,"lodash/defaultTo":109}],181:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("../../../webgl/vertex/VertexBuffer"),l=t("../WebGLTileRenderer"),c={vert:"\n\t\tprecision highp float;\n\t\tattribute vec2 aPosition;\n\t\tattribute vec2 aTextureCoord;\n\t\tuniform vec4 uTextureCoordOffset;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform float uScale;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tvarying vec2 vTextureCoord;\n\t\tvoid main() {\n\t\t\tvTextureCoord = vec2(\n\t\t\t\tuTextureCoordOffset.x + (aTextureCoord.x * uTextureCoordOffset.z),\n\t\t\t\tuTextureCoordOffset.y + (aTextureCoord.y * uTextureCoordOffset.w));\n\t\t\tvec2 wPosition = (aPosition * uScale) + uTileOffset;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\t\tuniform sampler2D uTextureSampler;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vTextureCoord;\n\t\tvoid main() {\n\t\t\tvec4 color = texture2D(uTextureSampler, vec2(vTextureCoord.x, 1.0 - vTextureCoord.y));\n\t\t\tgl_FragColor = vec4(color.rgb, color.a * uOpacity);\n\t\t}\n\t\t"},f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(h,l),o(h.prototype,[{key:"onAdd",value:function(t){return i(a(h.prototype),"onAdd",this).call(this,t),this.quad=function(t,e,n){var r=new Float32Array(24);return r[0]=0,r[1]=0,r[2]=n,r[3]=0,r[4]=n,r[5]=n,r[6]=0,r[7]=0,r[8]=n,r[9]=n,r[10]=0,r[11]=n,r[12]=0,r[13]=0,r[14]=1,r[15]=0,r[16]=1,r[17]=1,r[18]=0,r[19]=0,r[20]=1,r[21]=1,r[22]=0,r[23]=1,new s(t,r,{0:{size:2,type:"FLOAT",byteOffset:0},1:{size:2,type:"FLOAT",byteOffset:48}},{count:6})}(this.gl,0,t.plot.tileSize),this.shader=this.createShader(c),this.array=this.createTextureArray({chunkSize:t.plot.tileSize}),this}},{key:"onRemove",value:function(t){return this.destroyTextureArray(this.array),this.array=null,this.quad=null,this.shader=null,i(a(h.prototype),"onRemove",this).call(this,t),this}},{key:"draw",value:function(){var t=this.gl,e=this.shader,n=this.array,r=this.quad,o=this.getRenderablesLOD(),i=this.getOrthoMatrix();e.use(),e.setUniform("uProjectionMatrix",i),e.setUniform("uTextureSampler",0),e.setUniform("uOpacity",this.layer.opacity),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),r.bind();for(var a=0;a<o.length;a++){var u=o[a];n.bind(u.hash,0),e.setUniform("uTextureCoordOffset",u.uvOffset),e.setUniform("uScale",u.scale),e.setUniform("uTileOffset",u.tileOffset),r.draw()}return r.unbind(),this}}]),h);function h(){var t;return function(t){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,a(h).call(this))).quad=null,t.shader=null,t.array=null,t}e.exports=f},{"../../../webgl/vertex/VertexBuffer":198,"../WebGLTileRenderer":180}],182:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lodash/defaultTo"),l=t("../../../webgl/vertex/VertexBuffer"),c=t("../WebGLTileRenderer"),f={vert:"\n\t\tprecision highp float;\n\t\tattribute vec2 aPosition;\n\t\tattribute vec2 aOffset;\n\t\tattribute float aRadius;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform float uScale;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tvoid main() {\n\t\t\tvec2 wPosition = (aPosition * aRadius) + (aOffset * uScale) + uTileOffset;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\t\tuniform vec4 uColor;\n\t\tvoid main() {\n\t\t\tgl_FragColor = uColor;\n\t\t}\n\t\t"},h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(p,c),o(p.prototype,[{key:"onAdd",value:function(t){return i(a(p.prototype),"onAdd",this).call(this,t),this.shape=function(t){var e=2*Math.PI/5,n=e/2,r=e/4,o=new Float32Array(24);o[0]=0;for(var i=o[1]=0;i<5;i++){var a=i*e,u=.4*Math.cos(a-r),s=.4*Math.sin(a-r);o[4*i+2]=u,o[4*i+1+2]=s,u=1*Math.cos(a+n-r),s=1*Math.sin(a+n-r),o[4*i+2+2]=u,o[4*i+3+2]=s}return o[o.length-2]=o[2],o[o.length-1]=o[3],new l(t,o,{0:{size:2,type:"FLOAT"}},{mode:"TRIANGLE_FAN",count:o.length/2})}(this.gl),this.shader=this.createShader(f),this.atlas=this.createVertexAtlas({chunkSize:16384,attributePointers:{1:{size:2,type:"FLOAT"},2:{size:1,type:"FLOAT"}}}),this}},{key:"onRemove",value:function(t){return this.destroyVertexAtlas(this.atlas),this.atlas=null,this.shape=null,this.shader=null,i(a(p.prototype),"onRemove",this).call(this,t),this}},{key:"draw",value:function(){var t=this.gl,e=this.shader,n=this.atlas,r=this.shape,o=this.getRenderables(),i=this.getOrthoMatrix();t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),e.use(),e.setUniform("uProjectionMatrix",i),e.setUniform("uColor",this.color),r.bind(),n.bindInstanced();for(var a=0;a<o.length;a++){var u=o[a];e.setUniform("uScale",u.scale),e.setUniform("uTileOffset",u.tileOffset),n.drawInstanced(u.hash,r.mode,r.count)}return n.unbindInstanced(),r.unbind(),this}}]),p);function p(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,a(p).call(this))).color=s(e.color,[1,.4,.1,.8]),t.shape=null,t.shader=null,t.atlas=null,t}e.exports=h},{"../../../webgl/vertex/VertexBuffer":198,"../WebGLTileRenderer":180,"lodash/defaultTo":109}],183:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,n){for(var r=t.data,o=new Array(r.length/3),i=0;i<r.length;i+=3)o[i/3]=new f(r[i],r[i+1],r[i+2],e,n,t);return o}function l(t,e,n,r,o,i){var a=r.tile.coord,u=Math.pow(2,n.zoom-a.z),s=n.getViewportPixelOffset(),l=[(a.x*n.tileSize+r.x)*u-s.x,(a.y*n.tileSize+r.y)*u-s.y];e.setUniform("uTileOffset",l),e.setUniform("uScale",u),e.setUniform("uColor",o),e.setUniform("uRadiusOffset",i+r.radius),t.bind(),t.draw(),t.unbind()}var c=t("lodash/defaultTo"),f=t("../../../geometry/CircleCollidable"),h=t("../../../webgl/vertex/VertexBuffer"),p=t("../WebGLTileRenderer"),y={vert:"\n\t\tprecision highp float;\n\t\tattribute vec2 aPosition;\n\t\tattribute float aRadius;\n\t\tuniform float uRadiusOffset;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform float uScale;\n\t\tuniform float uPixelRatio;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tvoid main() {\n\t\t\tvec2 wPosition = (aPosition * uScale) + uTileOffset;\n\t\t\tgl_PointSize = (aRadius + uRadiusOffset) * uScale * 2.0 * uPixelRatio;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t}\n\t\t",frag:"\n\t\t#ifdef GL_OES_standard_derivatives\n\t\t\t#extension GL_OES_standard_derivatives : enable\n\t\t#endif\n\t\tprecision highp float;\n\t\tuniform vec4 uColor;\n\t\tvoid main() {\n\t\t\tvec2 cxy = 2.0 * gl_PointCoord - 1.0;\n\t\t\tfloat radius = dot(cxy, cxy);\n\t\t\tfloat alpha = 1.0;\n\t\t\t#ifdef GL_OES_standard_derivatives\n\t\t\t\tfloat delta = fwidth(radius);\n\t\t\t\talpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, radius);\n\t\t\t#else\n\t\t\t\tif (radius > 1.0) {\n\t\t\t\t\tdiscard;\n\t\t\t\t}\n\t\t\t#endif\n\t\t\tgl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\n\t\t}\n\t\t"},d=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(v,p),o(v.prototype,[{key:"onAdd",value:function(t){return i(a(v.prototype),"onAdd",this).call(this,t),this.ext=this.gl.getExtension("OES_standard_derivatives"),this.point=function(t){var e=new Float32Array(2);return e[0]=0,e[1]=0,new h(t,e,{0:{size:2,type:"FLOAT"}},{mode:"POINTS",count:1})}(this.gl),this.shader=this.createShader(y),this.tree=this.createRTreePyramid({nodeCapacity:32,createCollidables:s}),this.atlas=this.createVertexAtlas({chunkSize:16384,attributePointers:{0:{size:2,type:"FLOAT"},1:{size:1,type:"FLOAT"}}}),this}},{key:"onRemove",value:function(t){return this.destroyVertexAtlas(this.atlas),this.destroyRTreePyramid(this.tree),this.atlas=null,this.shader=null,this.point=null,this.tree=null,this.ext=null,i(a(v.prototype),"onRemove",this).call(this,t),this}},{key:"pick",value:function(t){return this.layer.plot.isZooming()?null:this.tree.searchPoint(t.x,t.y,this.layer.plot.zoom,this.layer.plot.getPixelExtent())}},{key:"draw",value:function(){var e=this,t=this.gl,n=this.layer,r=n.plot,o=this.getOrthoMatrix(),i=this.shader;r.renderBuffer.bind(),r.renderBuffer.clear(),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE),i.use(),i.setUniform("uProjectionMatrix",o),i.setUniform("uPixelRatio",r.pixelRatio),function(t,e,n,r){e.setUniform("uColor",r),e.setUniform("uRadiusOffset",0),t.bind();for(var o=0;o<n.length;o++){var i=n[o];e.setUniform("uScale",i.scale),e.setUniform("uTileOffset",i.tileOffset),t.draw(i.hash,"POINTS")}t.unbind()}(this.atlas,i,this.getRenderables(),this.color),n.getSelected().forEach(function(t){l(e.point,i,r,t,e.color,4)});var a=n.getHighlighted();return a&&!n.isSelected(a)&&l(this.point,i,r,a,this.color,2),r.renderBuffer.unbind(),r.renderBuffer.blitToScreen(this.layer.opacity),this}}]),v);function v(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof v))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,a(v).call(this))).color=c(e.color,[1,.4,.1,.8]),t.shader=null,t.point=null,t.tree=null,t.atlas=null,t.ext=null,t}e.exports=d},{"../../../geometry/CircleCollidable":146,"../../../webgl/vertex/VertexBuffer":198,"../WebGLTileRenderer":180,"lodash/defaultTo":109}],184:[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(t){return U(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":U(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lodash/defaultTo"),l=t("../WebGLTileRenderer"),c={vert:"\n\t\tprecision highp float;\n\t\tattribute vec2 aPosition;\n\t\tattribute float aRadius;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform float uScale;\n\t\tuniform float uPixelRatio;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tvoid main() {\n\t\t\tvec2 wPosition = (aPosition * uScale) + uTileOffset;\n\t\t\tgl_PointSize = aRadius * 2.0 * uPixelRatio;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t}\n\t\t",frag:"\n\t\t#ifdef GL_OES_standard_derivatives\n\t\t\t#extension GL_OES_standard_derivatives : enable\n\t\t#endif\n\t\tprecision highp float;\n\t\tuniform vec4 uColor;\n\t\tvoid main() {\n\t\t\tvec2 cxy = 2.0 * gl_PointCoord - 1.0;\n\t\t\tfloat radius = dot(cxy, cxy);\n\t\t\tfloat alpha = 1.0;\n\t\t\t#ifdef GL_OES_standard_derivatives\n\t\t\t\tfloat delta = fwidth(radius);\n\t\t\t\talpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, radius);\n\t\t\t#else\n\t\t\t\tif (radius > 1.0) {\n\t\t\t\t\tdiscard;\n\t\t\t\t}\n\t\t\t#endif\n\t\t\tgl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\n\t\t}\n\t\t"},f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(h,l),o(h.prototype,[{key:"onAdd",value:function(t){return i(a(h.prototype),"onAdd",this).call(this,t),this.ext=this.gl.getExtension("OES_standard_derivatives"),this.shader=this.createShader(c),this.atlas=this.createVertexAtlas({chunkSize:16384,attributePointers:{0:{size:2,type:"FLOAT"},1:{size:1,type:"FLOAT"}}}),this}},{key:"onRemove",value:function(t){return this.destroyVertexAtlas(this.atlas),this.atlas=null,this.shader=null,this.ext=null,i(a(h.prototype),"onRemove",this).call(this,t),this}},{key:"draw",value:function(){var t=this.gl,e=this.shader,n=this.atlas,r=this.layer.plot,o=this.getRenderables(),i=this.getOrthoMatrix();r.renderBuffer.bind(),r.renderBuffer.clear(),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE),e.use(),e.setUniform("uProjectionMatrix",i),e.setUniform("uColor",this.color),e.setUniform("uPixelRatio",r.pixelRatio),n.bind();for(var a=0;a<o.length;a++){var u=o[a];e.setUniform("uScale",u.scale),e.setUniform("uTileOffset",u.tileOffset),n.draw(u.hash,"POINTS")}return n.unbind(),r.renderBuffer.unbind(),r.renderBuffer.blitToScreen(this.layer.opacity),this}}]),h);function h(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}(this,a(h).call(this))).color=s(e.color,[1,.4,.1,.8]),t.shader=null,t.atlas=null,t.ext=null,t}e.exports=f},{"../WebGLTileRenderer":180,"lodash/defaultTo":109}],185:[function(t,e,n){var r=(navigator&&navigator.userAgent||"").toLowerCase(),o=(navigator&&navigator.vendor||"").toLowerCase();e.exports={firefox:!!r.match(/(?:firefox|fxios)\/(\d+)/),chrome:!(!/google inc/.test(o)||!r.match(/(?:chrome|crios)\/(\d+)/)),ie:!!r.match(/(?:msie |trident.+?; rv:)(\d+)/),edge:!!r.match(/edge\/(\d+)/),opera:!!r.match(/(?:^opera.+?version|opr)\/(\d+)/),safari:!!r.match(/version\/(\d+).+?safari/)}},{}],186:[function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){if(e){var n=e.value;t[l]&&t[l](n.value,n.key),t[h]--,t[c].delete(n.key),t[f].removeNode(e)}}var a=t("lodash/defaultTo"),u=t("./LinkedList"),s=Symbol(),l=Symbol(),c=Symbol(),f=Symbol(),h=Symbol(),p=(o(d.prototype,[{key:"getCapacity",value:function(){return this[s]}},{key:"getLength",value:function(){return this[h]}},{key:"forEach",value:function(t){for(var e=this[f].head;null!==e;){var n=e.next;t(e.value.value,e.value.key),e=n}}},{key:"clear",value:function(){var e=this;this[l]&&this[f]&&this[f].forEach(function(t){e[l](t.value,t.key)}),this[c]=new Map,this[f]=new u,this[h]=0}},{key:"set",value:function(t,e){if(this[c].has(t)){var n=this[c].get(t).value;return this[l]&&this[l](n.value,t),n.value=e,void this.get(t)}var r=new y(t,e);this[h]++,this[f].unshift(r),this[c].set(t,this[f].head),this[h]>this[s]&&i(this,this[f].tail)}},{key:"has",value:function(t){return!!this[c].has(t)}},{key:"get",value:function(t){var e=this[c].get(t);if(e)return this[f].unshiftNode(e),e.value.value}},{key:"peek",value:function(t){var e=this[c].get(t);if(e)return e.value.value}},{key:"delete",value:function(t){i(this,this[c].get(t))}}]),d),y=function t(e,n){r(this,t),this.key=e,this.value=n};function d(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};r(this,d),this[s]=a(Math.max(1,t.capacity),256),this[l]=a(t.onRemove,null),this.clear()}e.exports=p},{"./LinkedList":187,"lodash/defaultTo":109}],187:[function(t,e,n){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=(r(u.prototype,[{key:"push",value:function(t){return this.tail=new a(t,this.tail,null,this),this.head||(this.head=this.tail),this.length++,this.length}},{key:"unshift",value:function(t){return this.head=new a(t,null,this.head,this),this.tail||(this.tail=this.head),this.length++,this.length}},{key:"pop",value:function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}}},{key:"shift",value:function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}}},{key:"get",value:function(t){var e,n;for(e=0,n=this.head;null!==n&&e<t;e++)n=n.next;if(e===t&&null!==n)return n.value}},{key:"forEach",value:function(t){for(var e=this.head,n=0;null!==e;n++)t(e.value,n),e=e.next}},{key:"map",value:function(t){for(var e=new Array(this.length),n=0,r=this.head;null!==r;n++)e[n]=t(r.value,n),r=r.next;return e}},{key:"pushNode",value:function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;return t.list=this,(t.prev=e)&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++,this.length}}},{key:"unshiftNode",value:function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;return t.list=this,(t.next=e)&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++,this.length}}},{key:"removeNode",value:function(t){if(t.list!==this)throw"Removing node which does not belong to this list";var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,this.length}}]),u),a=function t(e,n,r,o){i(this,t),this.list=o,this.value=e,n?(n.next=this).prev=n:this.prev=null,r?(r.prev=this).next=r:this.next=null};function u(){i(this,u),this.tail=null,this.head=null,this.length=0}e.exports=o},{}],188:[function(t,e,n){e.exports=function(t,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){var t=r.response;if(t)n(null,t);else{var e="Unable to load ArrayBuffer from URL: `".concat(event.path[0].currentSrc,"`");n(e,null)}},r.onerror=function(t){var e="Unable to load ArrayBuffer from URL: `".concat(t.path[0].currentSrc,"`");n(e,null)},r.withCredentials=!0,r.send(null)}},{}],189:[function(t,e,n){e.exports=function(t,n){var e=new Image;e.onload=function(){n(null,e)},e.onerror=function(t){var e="Unable to load image from URL: `".concat(t.path[0].currentSrc,"`");n(e,null)},e.crossOrigin="anonymous",e.src=t}},{}],190:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=t("./texture/Texture"),l=t("./shader/Shader"),c=t("./vertex/VertexBuffer"),f={vert:"\n\t\tprecision highp float;\n\t\tattribute vec3 aVertexPosition;\n\t\tattribute vec2 aTextureCoord;\n\t\tvarying vec2 vTextureCoord;\n\t\tvoid main(void) {\n\t\t\tvTextureCoord = aTextureCoord;\n\t\t\tgl_Position = vec4(aVertexPosition, 1.0);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\t\tuniform float uOpacity;\n\t\tuniform sampler2D uTextureSampler;\n\t\tvarying vec2 vTextureCoord;\n\t\tvoid main(void) {\n\t\t\tvec4 color = texture2D(uTextureSampler, vTextureCoord);\n\t\t\tgl_FragColor = vec4(color.rgb, color.a * uOpacity);\n\t\t}\n\t\t"},o=(r(h.prototype,[{key:"bind",value:function(){var t=this.gl;return t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),this}},{key:"unbind",value:function(){var t=this.gl;return t.bindFramebuffer(t.FRAMEBUFFER,null),this}},{key:"clear",value:function(){return this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this}},{key:"blitToScreen",value:function(t){return function(t,e,n,r,o){n.use(),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),n.setUniform("uOpacity",o),n.setUniform("uTextureSampler",0),e.bind(0),r.bind(),r.draw(),r.unbind()}(this.gl,this.texture,this.shader,this.quad,t),this}},{key:"resize",value:function(t,e){return this.texture.resize(t,e),this}}]),h);function h(t,e,n){var r,o,i,a,u;!function(t){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),this.gl=t,this.framebuffer=t.createFramebuffer(),this.shader=new l(t,f),this.quad=(a=t,(u=new Float32Array(24))[0]=-1,u[1]=-1,u[2]=1,u[3]=-1,u[4]=1,u[5]=1,u[6]=-1,u[7]=-1,u[8]=1,u[9]=1,u[10]=-1,u[11]=1,u[12]=0,u[13]=0,u[14]=1,u[15]=0,u[16]=1,u[17]=1,u[18]=0,u[19]=0,u[20]=1,u[21]=1,u[22]=0,u[23]=1,new c(a,u,{0:{size:2,type:"FLOAT",byteOffset:0},1:{size:2,type:"FLOAT",byteOffset:48}},{count:6})),this.texture=new s(t,null,{width:e,height:n,filter:"NEAREST",invertY:!1,premultiplyAlpha:!1}),r=this.gl,o=this.framebuffer,i=this.texture,r.bindFramebuffer(r.FRAMEBUFFER,o),r.framebufferTexture2D(r.FRAMEBUFFER,r["COLOR_ATTACHMENT".concat(0)],r.TEXTURE_2D,i.texture,0),r.bindFramebuffer(r.FRAMEBUFFER,null)}e.exports=o},{"./shader/Shader":191,"./texture/Texture":194,"./vertex/VertexBuffer":198}],191:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){var r=t.createShader(t[n]);if(t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))return r;var o=e.split("\n"),i=o.length.toString().length+1,a=o.map(function(t,e){return"".concat(function(t){var e=i-(t=t.toString()).length;t+=":";for(var n=0;n<e;n++)t+=" ";return t}(e+1)," ").concat(t)}).join("\n"),u=t.getShaderInfoLog(r);throw"An error occurred compiling the shader:\n\n".concat(u.slice(0,u.length-1),"\n").concat(a)}var v=t("lodash/map"),m=t("./parseShader"),b={bool:"uniform1i","bool[]":"uniform1iv",float:"uniform1f","float[]":"uniform1fv",int:"uniform1i","int[]":"uniform1iv",uint:"uniform1i","uint[]":"uniform1iv",vec2:"uniform2fv","vec2[]":"uniform2fv",ivec2:"uniform2iv","ivec2[]":"uniform2iv",vec3:"uniform3fv","vec3[]":"uniform3fv",ivec3:"uniform3iv","ivec3[]":"uniform3iv",vec4:"uniform4fv","vec4[]":"uniform4fv",ivec4:"uniform4iv","ivec4[]":"uniform4iv",mat2:"uniformMatrix2fv","mat2[]":"uniformMatrix2fv",mat3:"uniformMatrix3fv","mat3[]":"uniformMatrix3fv",mat4:"uniformMatrix4fv","mat4[]":"uniformMatrix4fv",sampler2D:"uniform1i",samplerCube:"uniform1i"},o=(r(i.prototype,[{key:"use",value:function(){return this.gl.useProgram(this.program),this}},{key:"setUniform",value:function(t,e){var n=this.uniforms.get(t);if(!n)throw"No uniform found under name `".concat(t,"`");if(null==e)throw"Value passed for uniform `".concat(t,"` is undefined or null");return"mat2"===n.type||"mat3"===n.type||"mat4"===n.type?this.gl[n.func](n.location,!1,e):this.gl[n.func](n.location,e),this}}]),i);function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),!e.vert)throw"Vertex shader argument `vert` has not been provided";if(!e.frag)throw"Fragment shader argument `frag` has not been provided";this.gl=t,this.program=null,this.attributes=new Map,this.uniforms=new Map,function(t,e){var n,r,o,i,a,u,s,l=t.gl,c=(n=e.define,v(n,function(t,e){return"#define ".concat(e," ").concat(t)}).join("\n")+(e.common||"")),f=c+e.vert,h=c+e.frag,p=d(l,f,"VERTEX_SHADER"),y=d(l,h,"FRAGMENT_SHADER");if(i=t,m([f,h],["uniform","attribute"]).forEach(function(t){if("attribute"===t.qualifier)i.attributes.set(t.name,{type:t.type,index:i.attributes.size});else{var e=t.type+(1<t.count?"[]":"");i.uniforms.set(t.name,{type:t.type,func:b[e]})}}),t.program=l.createProgram(),l.attachShader(t.program,p),l.attachShader(t.program,y),o=(r=t).gl,r.attributes.forEach(function(t,e){o.bindAttribLocation(r.program,t.index,e)}),l.linkProgram(t.program),!l.getProgramParameter(t.program,l.LINK_STATUS))throw"An error occured linking the shader:\n".concat(l.getProgramInfoLog(t.program));u=(a=t).gl,(s=a.uniforms).forEach(function(t,e){var n=u.getUniformLocation(a.program,e);null===n?s.delete(e):t.location=n})}(this,e)}e.exports=o},{"./parseShader":192,"lodash/map":127}],192:[function(t,e,n){var s=t("./preprocess"),l=/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,c=/(\r\n|\n|\r)/gm,f=/\s{2,}/g,h=/(\s*)(\[)(\s*)(\d+)(\s*)(\])(\s*)/g,p=/([a-zA-Z_][a-zA-Z0-9_]*)(?:\[(\d+)\])?/,y=/\bprecision\s+\w+\s+\w+;/g,d=/\b(highp|mediump|lowp)\s+/g;e.exports=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length||0===a.length)return[];t=Array.isArray(t)?t:[t],a=Array.isArray(a)?a:[a];var e,u=[];return t.forEach(function(t){var e,n,r,o,i;t=t.replace(l,""),t=(t=(t=s(t)).replace(y,"").replace(d,"")).replace(c," ").replace(f," ").replace(h,"$2$4$6"),u=u.concat((e=a,n=t.split(";"),r=e.join("|"),o=new RegExp("\\b("+r+")\\b.*"),i=[],n.forEach(function(t){var e=t.match(o);e&&(i=i.concat(function(t){var e=t.split(",").map(function(t){return t.trim()}),n=e.shift().split(" "),o=n.shift(),i=n.shift();return n.concat(e).map(function(t){return e=o,n=i,r=t.match(p),{qualifier:e,type:n,name:r[1],count:void 0===r[2]?1:parseInt(r[2],10)};var e,n,r})}(e[0])))}),i))}),e={},u.filter(function(t){return!e[t.name]&&(e[t.name]=!0)})}},{"./preprocess":193}],193:[function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function a(t,e,n){if(void 0===e)return"!"===t[0]?!("true"===t||1<=t):"true"===t||1<=t;switch(e){case"==":return t===n;case"!=":return t!==n;case">":return n<t;case">=":return n<=t;case"<":return t<n;case"<=":return t<=n}throw"Unrecognized logical operator `".concat(e,"`")}var u="__DEFINED__",s=/#define\b/i,l=/#undef\b/i,c=/#if\b/i,f=/#ifdef\b/i,h=/#ifndef\b/i,p=/#else\b/i,y=/#elif\b/i,d=/#endif\b/i,v=/#define\s+(\w+)(\s(\w*)?)?/i,m=/#undef\s+(\w+)/i,b=/#if\s+\(?\s*(!?\s*\w+)\s*(==|!=|>=|<=|<|>)?\s*(\w*)\s*\)?/i,g=/#ifdef\s+(\w+)/i,_=/#ifndef\s+(\w+)/i,x=/#elif\s+\(?\s*(!?\s*\w+)\s*(==|!=|>=|<=|<|>)?\s*(\w*)\s*\)?/i,w=/#([\W\w\s\d])(?:.*\\r?\n)*.*$/gm,O=(i(E,[{key:"eval",value:function(){var t;switch(this.type){case"if":return a((t=b.exec(this.conditional))[1],t[2],t[3]);case"ifdef":return(t=g.exec(this.conditional))[1]===u;case"ifndef":return(t=_.exec(this.conditional))[1]!==u;case"elif":return a((t=x.exec(this.conditional))[1],t[2],t[3])}throw"Unrecognized conditional type `".concat(this.type,"`")}}]),E),S=(i(T,[{key:"addElse",value:function(t){this.current=new O("else",t),this.else=this.current}},{key:"addElif",value:function(t){this.current=new O("elif",t),this.elif.push(this.current)}},{key:"addBody",value:function(t,e){this.current.body.push({string:t.trim(),line:e})}},{key:"nest",value:function(t){(t.parent=this).current.children.push(t)}},{key:"extract",value:function(){var e=[];if(this.if.eval())return e=e.concat(this.if.body),this.if.children.forEach(function(t){e=e.concat(t.extract())}),e;for(var t=0;t<this.elif.length;t++){var n=this.elif[t];if(n.eval()){e=e.concat(n.body);for(var r=0;r<n.children.length;r++){var o=n.children[r];e=e.concat(o.extract())}return e}}return this.else?(e=e.concat(this.else.body),this.else.children.forEach(function(t){e=e.concat(t.extract())}),e):[]}},{key:"eval",value:function(){return this.extract().sort(function(t,e){return t.line-e.line}).map(function(t){return t.string}).join("\n")}}]),T);function T(t,e,n){r(this,T),this.if=new O(t,e),this.elif=[],this.else=null,this.parent=null,this.current=this.if,this.startLine=n,this.endLine=null}function E(t,e){r(this,E),this.type=t,this.conditional=e.trim(),this.body=[],this.children=[]}e.exports=function(t){for(var e=t.split("\n"),n=function(t){var i=[],a=null;if(t.forEach(function(t,e){if(t.match(c)){var n=new S("if",t,e);a?a.nest(n):i.push(n),a=n}else if(t.match(f)){var r=new S("ifdef",t,e);a?a.nest(r):i.push(r),a=r}else if(t.match(h)){var o=new S("ifndef",t,e);a?a.nest(o):i.push(o),a=o}else if(t.match(y)){if(!a)throw"Invalid preprocessor syntax, unexpected `#elif`";a.addElif(t)}else if(t.match(p)){if(!a)throw"Invalid preprocessor syntax, unexpected `#else`";a.addElse(t)}else if(t.match(d)){if(!a)throw"Invalid preprocessor syntax, unexpected `#endif`";a.endLine=e,a=a.parent}else a&&a.addBody(t,e)}),a)throw"Invalid preprocessor syntax, missing expected `#endif`";return i}(e=function(t){var i=new Map,a=[];return t.forEach(function(n){if(n.match(s)){var t=v.exec(n);i.set(t[1],t[2]||u)}else if(n.match(l)){var e=m.exec(n);i.delete(e[1])}else if(n.match(f)){var r=g.exec(n);i.has(r[1])&&(n=n.replace(r[1],u)),a.push(n)}else if(n.match(h)){var o=_.exec(n);i.has(o[1])&&(n=n.replace(o[1],u)),a.push(n)}else i.forEach(function(t,e){n=n.replace(e,t)}),a.push(n)}),a}(e)),r=n.length-1;0<=r;r--){var o=n[r],i=o.eval();0<i.length?e.splice(o.startLine,o.endLine-o.startLine+1,i):e.splice(o.startLine,o.endLine-o.startLine+1)}return e.join("\n").replace(w,"")}},{}],194:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=t("lodash/defaultTo"),i=(r(a.prototype,[{key:"bind",value:function(t){var e=0<arguments.length&&void 0!==t?t:0,n=this.gl;return n.activeTexture(n["TEXTURE".concat(e)]),n.bindTexture(n.TEXTURE_2D,this.texture),this}},{key:"unbind",value:function(){var t=this.gl;return t.bindTexture(t.TEXTURE_2D,null),this}},{key:"bufferData",value:function(t,e,n){var r=this.gl;return r.bindTexture(r.TEXTURE_2D,this.texture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.invertY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t&&t.width&&t.height?(this.width=t.width,this.height=t.height,r.texImage2D(r.TEXTURE_2D,0,r[this.format],r[this.format],r[this.type],t)):(this.width=e||this.width,this.height=n||this.height,r.texImage2D(r.TEXTURE_2D,0,r[this.format],this.width,this.height,0,r[this.format],r[this.type],t)),this}},{key:"bufferSubData",value:function(t,e,n,r,o){var i=1<arguments.length&&void 0!==e?e:0,a=2<arguments.length&&void 0!==n?n:0,u=3<arguments.length&&void 0!==r?r:void 0,s=4<arguments.length&&void 0!==o?o:void 0,l=this.gl;return l.bindTexture(l.TEXTURE_2D,this.texture),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,this.invertY),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t.width&&t.height?l.texSubImage2D(l.TEXTURE_2D,0,i,a,l[this.format],l[this.type],t):l.texSubImage2D(l.TEXTURE_2D,0,i,a,u,s,l[this.format],l[this.type],t),this}},{key:"resize",value:function(t,e){return this.bufferData(null,t,e),this}}]),a);function a(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.gl=t,this.texture=t.createTexture(),this.format=o(n.format,"RGBA"),this.type=o(n.type,"UNSIGNED_BYTE"),this.filter=o(n.filter,"LINEAR"),this.wrap=o(n.wrap,"CLAMP_TO_EDGE"),this.invertY=o(n.invertY,!1),this.premultiplyAlpha=o(n.premultiplyAlpha,!1),this.bufferData(e,n.width,n.height),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t[this.wrap]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t[this.wrap]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[this.filter]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[this.filter])}e.exports=i},{"lodash/defaultTo":109}],195:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=t("lodash/defaultTo"),o=(r(y.prototype,[{key:"has",value:function(t){return this.used.has(t)}},{key:"get",value:function(t){return this.used.get(t)}},{key:"set",value:function(t,e){if(this.has(t))throw"Tile of coord ".concat(t," already exists in the array");if(0===this.available.length)throw"No available texture chunks in array";var n=this.available.pop(),r=this.gl;r.bindTexture(r.TEXTURE_2D,n.texture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.invertY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e.width&&e.height?r.texImage2D(r.TEXTURE_2D,0,r[this.format],r[this.format],r[this.type],e):r.texImage2D(r.TEXTURE_2D,0,r[this.format],this.chunkSize,this.chunkSize,0,r[this.format],r[this.type],e),this.used.set(t,n)}},{key:"delete",value:function(t){if(!this.has(t))throw"Tile of coord ".concat(t," does not exist in the array");var e=this.used.get(t);return this.used.delete(t),this.available.push(e),this}},{key:"bind",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:0;if(!this.has(t))throw"Tile of coord ".concat(t," does not exist in the array");var r=this.gl,o=this.used.get(t);return r.activeTexture(r["TEXTURE".concat(n)]),r.bindTexture(r.TEXTURE_2D,o.texture),this}},{key:"unbind",value:function(){return this}}]),y);function y(t){var e,n,r,o,i,a,u,s,l,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(t){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}(this),this.gl=t,this.chunkSize=p(f.chunkSize,256),this.numChunks=p(f.numChunks,256),this.format=p(c.format,"RGBA"),this.type=p(c.type,"UNSIGNED_BYTE"),this.filter=p(c.filter,"LINEAR"),this.wrap=p(c.wrap,"CLAMP_TO_EDGE"),this.invertY=p(c.invertY,!1),this.premultiplyAlpha=p(c.premultiplyAlpha,!1),this.available=new Array(this.numChunks);for(var h=0;h<this.numChunks;h++)this.available[h]={texture:(e=this.gl,n=this.format,r=this.chunkSize,o=this.type,i=this.filter,a=this.wrap,u=this.invertY,s=this.premultiplyAlpha,l=e.createTexture(),e.bindTexture(e.TEXTURE_2D,l),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,u),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),e.texImage2D(e.TEXTURE_2D,0,e[n],r,r,0,e[n],e[o],null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e[a]),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e[a]),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e[i]),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e[i]),l)};this.used=new Map}e.exports=o},{"lodash/defaultTo":109}],196:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=t("lodash/defaultTo"),i=(r(a.prototype,[{key:"bufferData",value:function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)}},{key:"bufferSubData",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:0,r=this.gl;return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.buffer),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,n,t),this}},{key:"draw",value:function(){var t=this.gl;return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),t.drawElements(t[this.mode],this.count,t[this.type],this.byteOffset),this}}]),a);function a(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.gl=t,this.type=o(n.type,"UNSIGNED_SHORT"),this.mode=o(n.mode,"TRIANGLES"),this.count=o(n.count,0),this.byteOffset=o(n.byteOffset,0),e instanceof WebGLBuffer?this.buffer=e:(this.buffer=t.createBuffer(),e&&this.bufferData(e))}e.exports=i},{"lodash/defaultTo":109}],197:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(n,t,r){var o=0;t.forEach(function(t,e){n.byteOffsets[e]=r+o,o+=v[t.type]*t.size})}var y=t("lodash/defaultTo"),d=t("lodash/forIn"),v={BYTE:1,UNSIGNED_BYTE:1,SHORT:2,UNSIGNED_SHORT:2,FIXED:4,FLOAT:4},o=(r(m.prototype,[{key:"has",value:function(t){return this.used.has(t)}},{key:"get",value:function(t){return this.used.get(t)}},{key:"set",value:function(t,e,n){if(this.has(t))throw"Tile of coord ".concat(t," already exists in the atlas");if(0===this.available.length)throw"No available vertex chunks in atlas";if(n>this.chunkSize)throw"Data count of ".concat(n," is greater that allocated size of ").concat(this.chunkSize);var r=this.available.pop();if(0<(r.count=n)){var o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,this.buffer),o.bufferSubData(o.ARRAY_BUFFER,r.chunkByteOffset,e)}this.used.set(t,r)}},{key:"delete",value:function(t){if(!this.has(t))throw"Tile of coord ".concat(t," does not exist in the atlas");var e=this.used.get(t);return this.used.delete(t),this.available.push(e),this}},{key:"bind",value:function(){var n=this.gl;return n.bindBuffer(n.ARRAY_BUFFER,this.buffer),this.pointers.forEach(function(t,e){n.enableVertexAttribArray(e),n.vertexAttribPointer(e,t.size,n[t.type],!1,t.byteStride,t.byteOffset)}),this}},{key:"bindInstanced",value:function(){var n=this.gl,r=this.ext;return n.bindBuffer(n.ARRAY_BUFFER,this.buffer),this.pointers.forEach(function(t,e){n.enableVertexAttribArray(e),r.vertexAttribDivisorANGLE(e,1)}),this}},{key:"unbind",value:function(){var n=this.gl;return this.pointers.forEach(function(t,e){n.disableVertexAttribArray(e)}),this}},{key:"unbindInstanced",value:function(){var n=this.gl,r=this.ext;return this.pointers.forEach(function(t,e){n.disableVertexAttribArray(e),r.vertexAttribDivisorANGLE(e,0)}),this}},{key:"draw",value:function(t,e,n,r){var o=2<arguments.length&&void 0!==n?n:0,i=3<arguments.length&&void 0!==r?r:0;if(!this.has(t))throw"Tile of coord ".concat(t," does not exist in the atlas");var a=this.gl,u=this.used.get(t);0<u.count&&a.drawArrays(a[e],u.chunkOffset+o,i||u.count)}},{key:"drawInstanced",value:function(t,e,n){if(!this.has(t))throw"Tile of coord ".concat(t," does not exist in the atlas");var r=this.gl,o=this.ext,i=this.used.get(t);this.pointers.forEach(function(t,e){r.vertexAttribPointer(e,t.size,r[t.type],!1,t.byteStride,i.byteOffsets[e])}),0<i.count&&o.drawArraysInstancedANGLE(r[e],0,n,i.count)}}]),m);function m(t,e){var n,r,o,i,a,u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(function(t){if(!(t instanceof m))throw new TypeError("Cannot call a class as a function")}(this),this.gl=t,this.ext=t.getExtension("ANGLE_instanced_arrays"),!this.ext)throw"ANGLE_instanced_arrays WebGL extension is not supported";if(this.chunkSize=y(u.chunkSize,16384),this.numChunks=y(u.numChunks,256),!e)throw"No attribute pointers provided";this.pointers=(o=e,i=new Map,a=0,d(o,function(t,e){i.set(e,{type:t.type,size:t.size,byteOffset:a,byteStride:0}),a+=v[t.type]*t.size}),i.forEach(function(t){t.byteStride=a}),i),this.stride=(n=this.pointers,r=0,n.forEach(function(t){r+=t.size}),r),this.available=new Array(this.numChunks);for(var s=function(t,e){var n=0;return t.forEach(function(t){n+=v[t.type]*t.size*e}),n}(this.pointers,this.chunkSize),l=0;l<this.numChunks;l++){var c=l*s,f={count:0,chunkOffset:l*this.chunkSize,chunkByteOffset:c,byteOffsets:{}};p(f,this.pointers,c),this.available[l]=f}this.used=new Map,this.buffer=t.createBuffer();var h=s*this.numChunks;t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,h,t.DYNAMIC_DRAW)}e.exports=o},{"lodash/defaultTo":109,"lodash/forIn":111}],198:[function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=t("lodash/defaultTo"),u=t("lodash/forIn"),s={BYTE:1,UNSIGNED_BYTE:1,SHORT:2,UNSIGNED_SHORT:2,FIXED:4,FLOAT:4},o=(r(l.prototype,[{key:"bufferData",value:function(t){var e=this.gl;return e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),this}},{key:"bufferSubData",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:0,r=this.gl;return r.bindBuffer(r.ARRAY_BUFFER,this.buffer),r.bufferSubData(r.ARRAY_BUFFER,n,t),this}},{key:"bind",value:function(){var n=this,r=this.gl;return r.bindBuffer(r.ARRAY_BUFFER,this.buffer),this.pointers.forEach(function(t,e){r.vertexAttribPointer(e,t.size,r[t.type],!1,n.byteStride,t.byteOffset),r.enableVertexAttribArray(e)}),this}},{key:"unbind",value:function(){var n=this.gl;return this.pointers.forEach(function(t,e){n.disableVertexAttribArray(e)}),this}},{key:"draw",value:function(){var t=this.gl;return t.drawArrays(t[this.mode],this.indexOffset,this.count),this}}]),l);function l(t,e){var n,r,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};!function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),this.gl=t,this.mode=a(i.mode,"TRIANGLES"),this.count=a(i.count,0),this.indexOffset=a(i.indexOffset,0),this.pointers=(n=o,r=new Map,u(n,function(t,e){var n=parseInt(e,10);t.byteOffset=a(t.byteOffset,0),r.set(n,t)}),r),this.byteStride=function(t){if(1===t.size)return 0;var o=0,i=0,a=0;return t.forEach(function(t){var e=t.byteOffset,n=t.size,r=t.type;i+=n*s[r],o<e&&(a=(o=e)+n*s[r])}),i<=o?0:a}(this.pointers),e instanceof WebGLBuffer?this.buffer=e:(this.buffer=t.createBuffer(),e&&this.bufferData(e))}e.exports=o},{"lodash/defaultTo":109,"lodash/forIn":111}]},{},[144])(144)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],207:[function(t,e,n){"use strict";e.exports={Map:t("./map/Map"),Layer:t("./layer/exports"),Renderer:t("./render/exports"),Requestor:t("./request/Requestor"),ColorRamp:t("./render/color/ColorRamp"),Request:t("./layer/request/Request")}},{"./layer/exports":216,"./layer/request/Request":217,"./map/Map":230,"./render/color/ColorRamp":232,"./render/exports":238,"./request/Requestor":263}],208:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=t("lumo"),c=t("lodash/defaultTo"),f=t("../request/Request"),h=Symbol(),p=Symbol(),y=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this,e))).pipeline=c(e.pipeline,""),t.uri=c(e.uri,""),t.xyz=c(e.xyz,!1),t.transform=c(e.transform,null),t[p]=null,t.clearExtrema(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,l.TileLayer),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"setPipeline",value:function(t){this.pipeline=t}},{key:"setURI",value:function(t){this.uri=t}},{key:"setRequestor",value:function(t){this.requestTile=f.requestJSON(t)}},{key:"useXYZ",value:function(){this.xyz=!0}},{key:"useTMS",value:function(){this.xyz=!1}},{key:"onAdd",value:function(t){var e=this;this[h]=function(t){e.transform&&(t.tile.data=e.transform(t.tile.data)),e.updateExtrema(t.tile.coord,t.tile.data)&&e.renderer&&e.renderer.redraw&&(clearTimeout(e[p]),e[p]=setTimeout(function(){!e.isHidden()&&e.renderer&&e.renderer.redraw&&e.renderer.redraw(!0),e[p]=null},800))},this.on(l.TILE_ADD,this[h]),a(u(n.prototype),"onAdd",this).call(this,t)}},{key:"onRemove",value:function(t){clearTimeout(this[p]),this[p]=null,this.removeListener(l.TILE_ADD,this[h]),this[h]=null,a(u(n.prototype),"onRemove",this).call(this,t)}},{key:"clearExtrema",value:function(){this.extremas=new Map}},{key:"getExtrema",value:function(t){var e=0<arguments.length&&void 0!==t?t:Math.round(this.plot.zoom),n=null;return this.extremas.has(e)?n=this.extremas.get(e):(n={min:1/0,max:-1/0},this.extremas.set(e,n)),n}},{key:"updateExtrema",value:function(t,e){var n=this.getExtrema(t.z),r=this.extractExtrema(e),o=!1;return r.min<n.min&&(o=!0,n.min=r.min),r.max>n.max&&(o=!0,n.max=r.max),o}},{key:"extractExtrema",value:function(){return{min:1/0,max:-1/0}}}]),n}();e.exports=y},{"../request/Request":217,"lodash/defaultTo":161,lumo:206}],209:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lumo"),l=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,a(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,s.TileLayer),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"requestTile",value:function(t,e){e(null,{})}}]),e}();e.exports=l},{lumo:206}],210:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=t("lumo"),c=t("lodash/defaultTo"),f=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this,e))).boundsLimit=c(e.boundsLimit,null),t.bounds=new Map,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,l.Overlay),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"onAdd",value:function(t){a(u(n.prototype),"onAdd",this).call(this,t)}},{key:"onRemove",value:function(t){a(u(n.prototype),"onRemove",this).call(this,t)}},{key:"enableDrawing",value:function(){this.plot&&(this.renderer.setBoundsLimit(this.boundsLimit),this.renderer.enableDrawing())}},{key:"disableDrawing",value:function(){this.plot&&this.renderer.disableDrawing()}},{key:"addBounds",value:function(t,e){return this.bounds.set(t,e),this.plot&&(this.refresh(),this.renderer&&this.renderer.redraw()),this}},{key:"modifyBounds",value:function(t,e){if(!this.bounds.has(t))throw"No bounds exists for id `".concat(t,"`");var n=this.bounds.get(t);return n.left=e.left,n.right=e.right,n.bottom=e.bottom,n.top=e.top,this.plot&&(this.refresh(),this.renderer&&this.renderer.redraw()),this}},{key:"removeBounds",value:function(t){return this.bounds.delete(t),this.plot&&(this.refresh(),this.renderer&&this.renderer.redraw()),this}},{key:"clearBounds",value:function(){return this.clear(),this.bounds=new Map,this.plot&&(this.refresh(),this.renderer&&this.renderer.redraw()),this}},{key:"clipGeometry",value:function(t){return function(r,t){var o=new Map;return t.forEach(function(t,e){var n=r.bounds.intersection(t);n&&(n.id=e,o.set(e,n))}),o}(t,this.bounds)}}]),n}();e.exports=f},{"lodash/defaultTo":161,lumo:206}],211:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("events"),l=t("lodash/defaultTo"),c=function(){function r(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=i(this,a(r).call(this))).delegate=t,e.layers=l(n.layers,[]),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(r,s),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(r,[{key:"onAdd",value:function(e){if(!e)throw"No plot argument provided";return this.plot=e,this.layers.forEach(function(t){e.add(t)}),this}},{key:"onRemove",value:function(e){if(!e)throw"No plot argument provided";return this.layers.forEach(function(t){e.remove(t)}),this.plot=null,this}},{key:"add",value:function(t){if(!t)throw"No layer argument provided";if(-1!==this.layers.indexOf(t))throw"Provided layer is already attached to the group";return this.layers.push(t),this.plot&&this.plot.addLayer(t),this}},{key:"remove",value:function(t){if(!t)throw"No layer argument provided";var e=this.layers.indexOf(t);if(-1===e)throw"Provided layer is not attached to the group";return this.layers.splice(e,1),this.plot&&this.plot.removeLayer(t),this}},{key:"has",value:function(t){return-1!==this.layers.indexOf(t)}},{key:"show",value:function(){this.layers.forEach(function(t){t.show()})}},{key:"hide",value:function(){this.layers.forEach(function(t){t.hide()})}},{key:"isHidden",value:function(){return this.delegate.isHidden()}},{key:"mute",value:function(){this.layers.forEach(function(t){t.mute()})}},{key:"unmute",value:function(){this.layers.forEach(function(t){t.unmute()})}},{key:"isMuted",value:function(){return this.delegate.isMuted()}},{key:"enable",value:function(){this.show(),this.unmute()}},{key:"disable",value:function(){this.hide(),this.mute()}},{key:"isDisabled",value:function(){return this.delegate.isDisabled()}},{key:"setZIndex",value:function(e,n){var r=0;this.layers.forEach(function(t){t.setZIndex(e+r),n&&(r+=1)})}},{key:"getZIndex",value:function(){return this.delegate.getZIndex()}},{key:"setOpacity",value:function(e){this.layers.forEach(function(t){t.setOpacity(e)})}},{key:"getOpacity",value:function(){return this.delegate.getOpacity()}},{key:"isFiltered",value:function(){return this.delegate.isFiltered()}},{key:"addFilter",value:function(e,n){this.layers.forEach(function(t){t.addFilter(e,n)})}},{key:"removeFilter",value:function(e){this.layers.forEach(function(t){t.removeFilter(e)})}},{key:"clearFilters",value:function(){this.layers.forEach(function(t){t.clearFilters()})}},{key:"setQuery",value:function(e){this.layers.forEach(function(t){t.setQuery(e)})}},{key:"clearQuery",value:function(){this.layers.forEach(function(t){t.clearQuery()})}},{key:"refresh",value:function(){this.layers.forEach(function(t){t.refresh()})}},{key:"draw",value:function(){}},{key:"pick",value:function(){}},{key:"requestTiles",value:function(){}}]),r}();e.exports=c},{events:1,"lodash/defaultTo":161}],212:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lodash/isEmpty"),l=t("lodash/isFunction"),c=t("./Base"),f=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,a(n).call(this,e))).query=null,t.filters=new Map,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(n,c),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"addFilter",value:function(t,e){this.filters.set(t,e),this.clearExtrema()}},{key:"removeFilter",value:function(t){this.filters.has(t)&&(this.filters.delete(t),this.clearExtrema())}},{key:"isFiltered",value:function(){return 0<this.filters.size}},{key:"clearFilters",value:function(){this.filters.clear()}},{key:"setQuery",value:function(t){if(s(t)&&!l(t))throw"Query object is empty";this.query=t,this.clearExtrema()}},{key:"getQuery",value:function(){var e=this;if(s(this.query)&&!l(this.query)&&0===this.filters.size)return null;var n=l(this.query)?this.query(this):this.query||[];return Array.isArray(n)||(n=[n]),this.filters.forEach(function(t){0<n.length&&n.push("AND"),n.push(l(t)?t(e):t)}),n}},{key:"clearQuery",value:function(){this.query=void 0,this.clearExtrema()}}]),n}();e.exports=f},{"./Base":208,"lodash/isEmpty":172,"lodash/isFunction":173}],213:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=t("lodash/defaultTo"),f=t("lodash/isNil"),h=t("./Group"),o=function(){function o(t,e){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=a(this,s(o).call(this,r)),f(t)||f(t.addFilter))throw"LivePair 'parent' argument must be a Live layer";if(f(e)||f(e.addFilter))throw"LivePair 'child' argument must be a Live layer";return n.hideParentWhenFiltered=c(r.hideParentWhenFiltered,!1),n.parent=t,n.child=e,n.layers.push(t),n.layers.push(e),n.temporaryFilters=new Map,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(o,h),function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(o,[{key:"enable",value:function(){return this.hidden=!1,this.muted=!1,0!==this.temporaryFilters.size&&this.hideParentWhenFiltered||(this.parent.show(),this.parent.unmute()),0<this.temporaryFilters.size&&(this.child.show(),this.child.unmute()),this}},{key:"disable",value:function(){return this.hidden=!0,this.muted=!0,this.parent.hide(),this.parent.mute(),this.child.hide(),this.child.mute(),this}},{key:"addFilter",value:function(t,e,n){2<arguments.length&&void 0!==n&&n?(this.hideParentWhenFiltered&&this.parent.disable(),this.temporaryFilters.set(t,e),this.child.addFilter(t,e),this.isHidden()||this.child.enable()):u(s(o.prototype),"addFilter",this).call(this,t,e)}},{key:"removeFilter",value:function(t,e){1<arguments.length&&void 0!==e&&e?(this.temporaryFilters.delete(t),this.child.removeFilter(t),0===this.temporaryFilters.size&&(this.child.disable(),this.hideParentWhenFiltered&&(this.isHidden()||this.parent.enable()))):u(s(o.prototype),"removeFilter",this).call(this,t)}},{key:"isHidden",value:function(){return this.parent.isHidden()}},{key:"isMuted",value:function(){return this.parent.isMuted()}},{key:"isDisabled",value:function(){return this.parent.isDisabled()}},{key:"getZIndex",value:function(){return this.parent.getZIndex()}},{key:"getOpacity",value:function(){return this.parent.getOpacity()}},{key:"isFiltered",value:function(){return this.parent.isFiltered()||this.child.isFiltered()}}]),o}();e.exports=o},{"./Group":211,"lodash/defaultTo":161,"lodash/isNil":176}],214:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lumo"),l=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,a(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,s.TileLayer),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"requestTile",value:function(t,e){e(null,{})}}]),e}();e.exports=l},{lumo:206}],215:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,n){function e(e){t.layers.forEach(function(t){t.emit(n,e)})}t.on(n,e),t.broadcasts.set(n,e)}function l(t,e){var n=t.broadcasts.get(e);t.removeListener(e,n),t.broadcasts.delete(e)}function c(e){var t=e.layers.filter(function(t){return t!==e.swap&&!t.isDisabled()});return y(t,function(t){return t.getZIndex()})}var f=t("lumo"),h=t("events"),p=t("lodash/defaultTo"),y=t("lodash/maxBy"),d=t("lodash/reduce"),v=t("lodash/isEmpty"),m=function(){function r(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),e=i(this,a(r).call(this)),!t)throw"'swap' argument is missing";return e.swap=t,e.hidden=p(n.hidden,!1),e.muted=p(n.muted,!1),e.opacity=p(n.opacity,1),e.zIndex=p(n.zIndex,0),e.layers=p(n.layers,[]),e.layers.unshift(t),e.activeLayer=null,e.broadcasts=new Map,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(r,h),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(r,[{key:"onAdd",value:function(t){var e=this;if(!t)throw"No plot argument provided";return this.plot=t,this.layers.forEach(function(t){t.onAdd(e.plot)}),s(this,f.CLICK),s(this,f.DBL_CLICK),s(this,f.MOUSE_OVER),s(this,f.MOUSE_OUT),s(this,f.MOUSE_MOVE),s(this,f.MOUSE_UP),s(this,f.MOUSE_DOWN),s(this,f.DBL_CLICK),s(this,f.DBL_CLICK),s(this,f.PAN_START),s(this,f.PAN),s(this,f.PAN_END),s(this,f.ZOOM_START),s(this,f.ZOOM),s(this,f.ZOOM_END),this}},{key:"onRemove",value:function(e){if(!e)throw"No plot argument provided";return l(this,f.CLICK),l(this,f.DBL_CLICK),l(this,f.MOUSE_OVER),l(this,f.MOUSE_OUT),l(this,f.MOUSE_MOVE),l(this,f.MOUSE_UP),l(this,f.MOUSE_DOWN),l(this,f.PAN_START),l(this,f.PAN),l(this,f.PAN_END),l(this,f.ZOOM_START),l(this,f.ZOOM),l(this,f.ZOOM_END),this.layers.forEach(function(t){t.onRemove(e)}),this.plot=null,this}},{key:"add",value:function(t,e){if(!e)throw"No layer argument provided";if(-1!==this.layers.indexOf(e))throw"Provided layer is already attached to the swap";return this.layers.push(e),this.plot&&e.onAdd(this.plot),this}},{key:"remove",value:function(t,e){if(!e)throw"No layer argument provided";var n=this.layers.indexOf(e);if(-1===n)throw"Provided layer is not attached to the swap";return this.layers.splice(n,1),this.plot&&e.onRemove(this.plot),this}},{key:"setActiveLayer",value:function(t){this.activeLayer&&(this.activeLayer.disable(),this.activeLayer=null),t&&(this.activeLayer=t,this.activeLayer.enable())}},{key:"setSwapFunc",value:function(t){this.swapFunc&&(this.swap.removeListener("load",this.swapFunc),this.swap.removeListener("zoomend",this.swapFunc),this.swap.removeListener("panend",this.swapFunc)),this.swapFunc=t,this.swap.on("load",t),this.swap.on("zoomend",t),this.swap.on("panend",t)}},{key:"has",value:function(t){return-1!==this.layers.indexOf(t)}},{key:"show",value:function(){return this.hidden=!1,this.layers.forEach(function(t){t.show()}),this}},{key:"hide",value:function(){return this.hidden=!0,this.layers.forEach(function(t){t.hide()}),this}},{key:"isHidden",value:function(){return this.hidden}},{key:"mute",value:function(){this.muted=!0,this.swap.mute(),this.activeLayer&&this.activeLayer.mute()}},{key:"unmute",value:function(){if(this.muted&&(this.muted=!1,this.swap.unmute(),this.activeLayer&&this.activeLayer.unmute(),this.plot)){var t=this.plot.getTargetVisibleCoords();this.requestTiles(t)}}},{key:"isMuted",value:function(){return this.muted}},{key:"enable",value:function(){this.show(),this.unmute()}},{key:"disable",value:function(){this.hide(),this.mute()}},{key:"isDisabled",value:function(){return this.muted&&this.hidden}},{key:"setZIndex",value:function(e){this.zIndex=e,this.layers.forEach(function(t){t.setZIndex(e)})}},{key:"highlight",value:function(e){this.layers.forEach(function(t){t.highlight&&t.highlight(e)})}},{key:"unhighlight",value:function(){this.layers.forEach(function(t){t.unhighlight&&t.unhighlight()})}},{key:"getHighlighted",value:function(){var t=c(this);return t&&t.getHighlighted?t.getHighlighted():null}},{key:"isHighlighted",value:function(t){return this.getHighlighted()===t}},{key:"select",value:function(e,n){this.layers.forEach(function(t){t.select&&t.select(e,n)})}},{key:"unselect",value:function(e){this.layers.forEach(function(t){t.unselect&&t.unselect(e)})}},{key:"unselectAll",value:function(){this.layers.forEach(function(t){t.unselectAll&&t.unselectAll()})}},{key:"getSelected",value:function(){var t=c(this);return t&&t.getSelected?t.getSelected():null}},{key:"isSelected",value:function(t){var e=this.getSelected();return!v(e)&&-1!==e.indexOf(t)}},{key:"clear",value:function(){this.layers.forEach(function(t){t.clear()})}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"setZIndex",value:function(e,n){this.zIndex=e,this.layers.forEach(function(t){t.setZIndex(e,n)})}},{key:"setOpacity",value:function(e){this.opacity=e,this.layers.forEach(function(t){t.setOpacity(e)})}},{key:"getOpacity",value:function(){return this.opacity}},{key:"isFiltered",value:function(){return d(this.layers,function(t,e){return t||e.isFiltered()},!1)}},{key:"addFilter",value:function(e,n){this.layers.forEach(function(t){t.addFilter(e,n)})}},{key:"removeFilter",value:function(e){this.layers.forEach(function(t){t.removeFilter(e)})}},{key:"clearFilters",value:function(){this.layers.forEach(function(t){t.clearFilters()})}},{key:"setQuery",value:function(e){this.layers.forEach(function(t){t.setQuery(e)})}},{key:"clearQuery",value:function(){this.layers.forEach(function(t){t.clearQuery()})}},{key:"draw",value:function(e){return this.hidden||this.layers.forEach(function(t){t.isHidden()||t.draw(e)}),this}},{key:"refresh",value:function(){this.layers.forEach(function(t){t.refresh()})}},{key:"requestTiles",value:function(e){if(this.muted)return this;this.layers.forEach(function(t){t.requestTiles(e)})}},{key:"pick",value:function(t){var e=c(this);return e?e.pick(t):null}}]),r}();e.exports=m},{events:1,"lodash/defaultTo":161,"lodash/isEmpty":172,"lodash/maxBy":189,"lodash/reduce":196,lumo:206}],216:[function(t,e,n){"use strict";e.exports={Debug:t("./core/Debug"),Drilldown:t("./core/Drilldown"),Base:t("./core/Base"),Live:t("./core/Live"),Group:t("./core/Group"),Stub:t("./core/Stub"),Swap:t("./core/Swap"),LivePair:t("./core/LivePair"),Count:t("./type/Count"),Community:t("./type/Community"),Heatmap:t("./type/Heatmap"),Macro:t("./type/Macro"),Micro:t("./type/Micro"),MacroEdge:t("./type/MacroEdge"),Rest:t("./type/Rest"),TopTermCount:t("./type/TopTermCount"),TermsFrequencyCount:t("./type/TermsFrequencyCount"),BinnedTopHits:t("./type/BinnedTopHits")}},{"./core/Base":208,"./core/Debug":209,"./core/Drilldown":210,"./core/Group":211,"./core/Live":212,"./core/LivePair":213,"./core/Stub":214,"./core/Swap":215,"./type/BinnedTopHits":218,"./type/Community":220,"./type/Count":221,"./type/Heatmap":223,"./type/Macro":224,"./type/MacroEdge":225,"./type/Micro":226,"./type/Rest":227,"./type/TermsFrequencyCount":228,"./type/TopTermCount":229}],217:[function(t,e,n){"use strict";var s=t("jquery"),c=t("lodash/forIn");function r(a,u){return function(n,r){var o=this,i={pipeline:this.pipeline,uri:this.uri,coord:{z:n.z,x:n.x,y:this.xyz?Math.pow(2,n.z)-1-n.y:n.y},tile:this.getTile(),query:this.getQuery?this.getQuery():null};a.get(i).then(function(t){if(function(t,e){var n=t.plot;if(!n)return!0;var r=Math.round(n.getTargetZoom()),o=n.getTargetViewport();return e.z!==r||!o.isInView(e,n.wraparound)}(o,n))r(new Error("stale tile"),null);else{var e=s.ajax({url:t,method:"POST",contentType:"application/json",data:JSON.stringify(i),dataType:u,xhrFields:{withCredentials:!0},beforeSend:function(t){return a.httpAuthentication&&t.setRequestHeader("Authorization",a.httpAuthentication),!0}}).done(function(t){a.xhr.delete(a.getHash(i)),r(null,t)}).fail(function(t){var e;if(t.responseText){var n=JSON.parse(t.responseText);e=new Error(n.error||n.message)}else e=t.statusText?new Error(t.statusText):new Error("Request failed");console["abort"===e?"warn":"error"](e.message),a.xhr.delete(a.getHash(i)),r(e,null)});a.xhr.set(a.getHash(i),e)}}).catch(function(t){t&&console.error(t.message),r(t,null)})}}s.ajaxTransport("+arraybuffer",function(s){var l;return{send:function(t,e){var n=s.url,r=s.type,o=s.async||!0,i=s.data||null,a=s.username||null,u=s.password||null;(l=new XMLHttpRequest).addEventListener("load",function(){var t={};t[s.dataType]=l.response,e(l.status,l.statusText,t,l.getAllResponseHeaders())}),l.open(r,n,o,a,u),c(t,function(t,e){l.setRequestHeader(e,t)}),l.responseType="arraybuffer",l.withCredentials=!0,l.send(i)},abort:function(){l.abort()}}}),e.exports={requestJSON:function(t){return r(t,"json")},requestArrayBuffer:function(t){return r(t,"arraybuffer")}}},{jquery:2,"lodash/forIn":164}],218:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lodash/defaultTo"),l=t("./Bivariate"),c=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,a(n).call(this,e))).lod=0,t.sortField=s(e.sortField,null),t.sortOrder=s(e.sortOrder,"desc"),t.hitsCount=s(e.hitsCount,1),t.includeFields=s(e.includeFields,null),t.resolution=s(e.resolution,32),function(t){return t&&0==(t&t-1)}(t.resolution)||(t.resolution=32),t.transform=function(t){return{points:new Float32Array(t.points),hits:t.hits.filter(function(t){return null!==t})}},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(n,l),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"setSortField",value:function(t){this.sortField=t}},{key:"setSortOrder",value:function(t){this.sortOrder=t}},{key:"setHitsCount",value:function(t){this.hitsCount=t}},{key:"setIncludeFields",value:function(t){this.includeFields=t}},{key:"getTile",value:function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},0<arguments.length&&void 0!==t?t:"binned-top-hits",{xField:this.xField,yField:this.yField,left:this.left,right:this.right,bottom:this.bottom,top:this.top,resolution:this.resolution,sortField:this.sortField,sortOrder:this.sortOrder,hitsCount:this.hitsCount,includeFields:this.includeFields})}}]),n}();e.exports=c},{"./Bivariate":219,"lodash/defaultTo":161}],219:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=t("lodash/defaultTo"),c=t("lodash/isString"),f=t("lodash/isNumber"),h=t("../core/Live");var a=function(){function a(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=u(this,s(a).call(this,e))).xField=l(e.xField,"x"),t.yField=l(e.xField,"y");var n=l(e.left,0),r=l(e.right,Math.pow(2,32)),o=l(e.bottom,0),i=l(e.top,Math.pow(2,32));return t.setBounds(n,r,o,i),t.resolution=e.resolution,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(a,h),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(a,[{key:"setXField",value:function(t){if(!c(t))throw"xField argument ".concat(t," must be of type String");this.xField=t}},{key:"setYField",value:function(t){if(!c(t))throw"yField argument ".concat(t," must be of type String");this.yField=t}},{key:"setBounds",value:function(t,e,n,r){if(!f(t))throw"left argument ".concat(t," is invalid");if(!f(e))throw"right argument ".concat(e," is invalid");if(!f(n))throw"bottom argument ".concat(n," is invalid");if(!f(r))throw"top argument ".concat(r," is invalid");this.left=t,this.right=e,this.bottom=n,this.top=r}},{key:"setResolution",value:function(t){if(!f(t))throw"resolution argument ".concat(t," must be of type Number");if(!function(t){return t&&0==(t&t-1)}(t))throw"resolution argument ".concat(t," must be a power-of-two");this.resolution=t}}]),a}();e.exports=a},{"../core/Live":212,"lodash/defaultTo":161,"lodash/isNumber":177,"lodash/isString":181}],220:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lodash/get"),l=t("lodash/minBy"),c=t("lodash/maxBy"),f=t("./Micro"),h=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,a(n).call(this,e))).lod=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(n,f),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"extractExtrema",value:function(t){var e=t.hits;if(!e||0===e.length)return{min:1/0,max:-1/0};var n=this.sortField,r=l(e,function(t){return s(t,n)}),o=c(e,function(t){return s(t,n)});return{min:s(r,n),max:s(o,n)}}}]),n}();e.exports=h},{"./Micro":226,"lodash/get":165,"lodash/maxBy":189,"lodash/minBy":192}],221:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("./Bivariate"),l=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,a(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,s),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"getTile",value:function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},0<arguments.length&&void 0!==t?t:"count",{xField:this.xField,yField:this.yField,left:this.left,right:this.right,bottom:this.bottom,top:this.top})}}]),e}();e.exports=l},{"./Bivariate":219}],222:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e,n){if(!a(n))throw"".concat(e," argument ").concat(n," must be of type String");t[e]=n}var c=t("lodash/defaultTo"),a=t("lodash/isString"),f=t("lodash/isNumber"),h=t("../core/Live"),p=function(){function a(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=u(this,s(a).call(this,e))).srcXField=c(e.srcXField,"srcXField"),t.srcYField=c(e.srcYField,"srcYField"),t.dstXField=c(e.dstXField,"dstXField"),t.dstYField=c(e.dstYField,"dstYField"),t.weightField=c(e.weightField,"weightField"),t.requireSrc=c(e.requireSrc,!0),t.requireDst=c(e.requireDst,!1);var n=c(e.left,0),r=c(e.right,Math.pow(2,32)),o=c(e.bottom,0),i=c(e.top,Math.pow(2,32));return t.setBounds(n,r,o,i),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(a,h),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(a,[{key:"setSrcXField",value:function(t){l(this,"srcXField",t)}},{key:"setSrcYField",value:function(t){l(this,"srcYField",t)}},{key:"setDstXField",value:function(t){l(this,"dstXField",t)}},{key:"setDstYField",value:function(t){l(this,"dstYField",t)}},{key:"setWeightField",value:function(t){l(this,"weightField",t)}},{key:"setRequireSrc",value:function(t){this.requireSrc=!!t}},{key:"setRequireDst",value:function(t){this.requireDst=!!t}},{key:"setBounds",value:function(t,e,n,r){if(!f(t))throw"left argument ".concat(t," is invalid");if(!f(e))throw"right argument ".concat(e," is invalid");if(!f(n))throw"bottom argument ".concat(n," is invalid");if(!f(r))throw"top argument ".concat(r," is invalid");this.left=t,this.right=e,this.bottom=n,this.top=r}}]),a}();e.exports=p},{"../core/Live":212,"lodash/defaultTo":161,"lodash/isNumber":177,"lodash/isString":181}],223:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lodash/min"),l=t("lodash/max"),c=t("./Bivariate"),f=t("../request/Request"),h=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,a(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,c),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"setRequestor",value:function(t){this.requestTile=f.requestArrayBuffer(t)}},{key:"extractExtrema",value:function(t){var e=new Uint32Array(t);return{min:s(e),max:l(e)}}},{key:"getTile",value:function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},0<arguments.length&&void 0!==t?t:"heatmap",{xField:this.xField,yField:this.yField,left:this.left,right:this.right,bottom:this.bottom,top:this.top,resolution:this.resolution})}}]),e}();e.exports=h},{"../request/Request":217,"./Bivariate":219,"lodash/max":188,"lodash/min":191}],224:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lodash/defaultTo"),l=t("./Bivariate"),c=t("../request/Request"),f=function(){function e(){var o,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=i(this,a(e).call(this,t))).lod=s(t.lod,4),o.transform=function(t){if(0<o.lod){var e=new DataView(t),n=e.getUint32(0,!0),r=e.getUint32(4,!0)/4;return{points:new Float32Array(t,8,n/4),offsets:new Uint32Array(t,8+n,r)}}return new Float32Array(t)},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,l),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"setRequestor",value:function(t){this.requestTile=c.requestArrayBuffer(t)}},{key:"setLOD",value:function(t){this.lod=t}},{key:"getTile",value:function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},0<arguments.length&&void 0!==t?t:"macro",{xField:this.xField,yField:this.yField,left:this.left,right:this.right,bottom:this.bottom,top:this.top,resolution:this.resolution,lod:this.lod})}}]),e}();e.exports=f},{"../request/Request":217,"./Bivariate":219,"lodash/defaultTo":161}],225:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lodash/defaultTo"),l=t("./Edge"),c=t("../request/Request"),f=function(){function e(){var o,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=i(this,a(e).call(this,t))).lod=s(t.lod,4),o.sortField=s(t.sortField,null),o.sortOrder=s(t.sortOrder,"desc"),o.hitsCount=s(t.hitsCount,10),o.transform=function(t){if(0<o.lod){var e=new DataView(t),n=e.getUint32(0,!0),r=e.getUint32(4,!0)/4;return{edges:new Float32Array(t,8,n/4),offsets:new Uint32Array(t,8+n,r)}}return new Float32Array(t)},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,l),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"setRequestor",value:function(t){this.requestTile=c.requestArrayBuffer(t)}},{key:"extractExtrema",value:function(t){for(var e=1/0,n=-1/0,r=2;r<t.length;r+=3){var o=t[r];o<e&&(e=o),n<o&&(n=o)}return{min:e,max:n}}},{key:"setLOD",value:function(t){this.lod=t}},{key:"setSortField",value:function(t){this.sortField=t}},{key:"setSortOrder",value:function(t){this.sortOrder=t}},{key:"setHitsCount",value:function(t){this.hitsCount=t}},{key:"getTile",value:function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},0<arguments.length&&void 0!==t?t:"macro-edge",{srcXField:this.srcXField,srcYField:this.srcYField,dstXField:this.dstXField,dstYField:this.dstYField,requireSrc:this.requireSrc,requireDst:this.requireDst,weightField:this.weightField,left:this.left,right:this.right,bottom:this.bottom,top:this.top,lod:this.lod,sortField:this.sortField,sortOrder:this.sortOrder,hitsCount:this.hitsCount})}}]),e}();e.exports=f},{"../request/Request":217,"./Edge":222,"lodash/defaultTo":161}],226:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lodash/defaultTo"),l=t("./Bivariate"),c=function(){function n(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=i(this,a(n).call(this,t))).lod=s(t.lod,4),e.sortField=s(t.sortField,null),e.sortOrder=s(t.sortOrder,"desc"),e.hitsCount=s(t.hitsCount,10),e.includeFields=s(t.includeFields,null),e.transform=function(t){return 0<e.lod?{points:new Float32Array(t.points),offsets:t.offsets,hits:t.hits}:{points:new Float32Array(t.points),hits:t.hits}},e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(n,l),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"setLOD",value:function(t){this.lod=t}},{key:"setSortField",value:function(t){this.sortField=t}},{key:"setSortOrder",value:function(t){this.sortOrder=t}},{key:"setHitsCount",value:function(t){this.hitsCount=t}},{key:"setIncludeFields",value:function(t){this.includeFields=t}},{key:"getTile",value:function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},0<arguments.length&&void 0!==t?t:"micro",{xField:this.xField,yField:this.yField,left:this.left,right:this.right,bottom:this.bottom,top:this.top,lod:this.lod,sortField:this.sortField,sortOrder:this.sortOrder,hitsCount:this.hitsCount,includeFields:this.includeFields})}}]),n}();e.exports=c},{"./Bivariate":219,"lodash/defaultTo":161}],227:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lodash"),l=t("lodash/defaultTo"),c=t("../core/Base"),f=t("../../render/webgl/Image"),h=t("../request/Request"),p=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,a(n).call(this,e))).ext=l(e.ext,"png"),t.scheme=l(e.scheme,"http"),t.endpoint=l(e.endpoint,"endpoint"),s.isNil(t.renderer)&&t.setRenderer(new f),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(n,c),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"setRequestor",value:function(t){this.requestTile=h.requestArrayBuffer(t)}},{key:"setExt",value:function(t){this.ext=t}},{key:"setScheme",value:function(t){this.scheme=t}},{key:"setEndpoint",value:function(t){this.endpoint=t}},{key:"getTile",value:function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},0<arguments.length&&void 0!==t?t:"rest",{ext:this.ext,endpoint:this.endpoint,scheme:this.scheme})}}]),n}();e.exports=p},{"../../render/webgl/Image":249,"../core/Base":208,"../request/Request":217,lodash:186,"lodash/defaultTo":161}],228:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lodash/values"),l=t("./Bivariate"),c=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,a(n).call(this,e))).termsField=e.termsField,t.fieldType=e.fieldType,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(n,l),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"extractExtrema",value:function(t){for(var e=s(t),n=1/0,r=-1/0,o=0;o<e.length;o++){var i=e[o];r<i&&(r=i),i<n&&(n=i)}return{min:n,max:r}}},{key:"setTermsField",value:function(t){this.termsField=t}},{key:"setFieldType",value:function(t){this.fieldType=t}},{key:"getTile",value:function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},0<arguments.length&&void 0!==t?t:"terms-frequency-count",{xField:this.xField,yField:this.yField,left:this.left,right:this.right,bottom:this.bottom,top:this.top,termsField:this.termsField,terms:this.terms,fieldType:this.fieldType})}}]),n}();e.exports=c},{"./Bivariate":219,"lodash/values":205}],229:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lodash/values"),l=t("lodash/defaultTo"),c=t("./Bivariate"),f=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,a(n).call(this,e))).termsField=e.termsField,t.termsCount=l(e.termsCount,10),t.fieldType=e.fieldType,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(n,c),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"extractExtrema",value:function(t){for(var e=s(t),n=1/0,r=-1/0,o=0;o<e.length;o++){var i=e[o];r<i&&(r=i),i<n&&(n=i)}return{min:n,max:r}}},{key:"setTermsField",value:function(t){this.termsField=t}},{key:"setTermsCount",value:function(t){this.termsCount=t}},{key:"setFieldType",value:function(t){this.fieldType=t}},{key:"getTile",value:function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},0<arguments.length&&void 0!==t?t:"top-term-count",{xField:this.xField,yField:this.yField,left:this.left,right:this.right,bottom:this.bottom,top:this.top,termsField:this.termsField,termsCount:this.termsCount,fieldType:this.fieldType})}}]),n}();e.exports=f},{"./Bivariate":219,"lodash/defaultTo":161,"lodash/values":205}],230:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=t("lumo"),s=function(){function n(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),o(this,i(n).call(this,t,e))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,u.Plot),n}();e.exports=s},{lumo:206}],231:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("lodash/clamp"),l=t("lodash/defaultTo"),_=t("../color/ColorRamp"),x=t("../transform/Transform"),c=t("../dom/CanvasRenderer"),w={},f=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,a(n).call(this,e))).transform=l(e.transform,"log10"),t.range=l(e.range,{min:0,max:1}),t.colorRamp=l(e.colorRamp,"verdant"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(n,c),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"setTransform",value:function(t){this.transform!==t&&(this.transform=t,this.plot&&this.renderer.redraw(!0))}},{key:"getTransform",value:function(){return this.transform}},{key:"setValueRange",value:function(t,e){this.range.min===t&&this.range.max===e||(this.range={min:s(t,0,1),max:s(e,0,1)},this.plot&&this.renderer.redraw(!0))}},{key:"getValueRange",value:function(){return[this.range[0],this.range[1]]}},{key:"setColorRamp",value:function(t){this.colorRamp!==t&&(this.colorRamp=t,this.plot&&this.renderer.redraw(!0))}},{key:"getColorRamp",value:function(){return this.colorRamp}},{key:"getColorRampFunc",value:function(){return _.getFunc(this.colorRamp)}},{key:"blitCanvas",value:function(t,e,n,r,o,i,a){if(!w[n]){var u=document.createElement("canvas");u.height=n,u.width=n,w[n]=u}for(var s=w[n],l=s.getContext("2d"),c=l.getImageData(0,0,n,n),f=c.data,h=_.getFunc(a),p=[0,0,0,0],y=n*n,d=0;d<e.length;d++){var v=e[d];if(0===v)p[0]=0,p[1]=0,p[2]=0,p[3]=0;else{var m=x.transform(v,r,o);h(x.interpolate(m,i),p)}var b=4*(y-(n-d%n)-Math.floor(d/n)*n);f[b]=p[0],f[1+b]=p[1],f[2+b]=p[2],f[3+b]=p[3]}l.putImageData(c,0,0);var g=t.getContext("2d");return g.imageSmoothingEnabled=!1,g.drawImage(s,0,0,n,n,0,0,t.width,t.height),t}},{key:"drawTile",value:function(t,e){this.blitCanvas(t,new Uint32Array(e.data),this.layer.resolution,this.transform,this.layer.getExtrema(),this.range,this.colorRamp)}}]),n}();e.exports=f},{"../color/ColorRamp":232,"../dom/CanvasRenderer":233,"../transform/Transform":244,"lodash/clamp":158,"lodash/defaultTo":161}],232:[function(t,e,n){"use strict";var f=t("lodash/map"),h=t("lodash/sum");function p(t){var e=(t[0]+16)/116,n=e+t[1]/500,r=e-t[2]/200;n=.206893034<n?n*n*n:(n-4/29)/7.787037,e=.206893034<e?e*e*e:(e-4/29)/7.787037,r=.206893034<r?r*r*r:(r-4/29)/7.787037;var o=3.2404542*(n*=.95047)+-1.5371385*(e*=1)+-.4985314*(r*=1.08883),i=-.969266*n+1.8760108*e+.041556*r,a=.0556434*n+-.2040259*e+1.0572252*r;return o=.00304<o?1.055*Math.pow(o,1/2.4)-.055:12.92*o,i=.00304<i?1.055*Math.pow(i,1/2.4)-.055:12.92*i,a=.00304<a?1.055*Math.pow(a,1/2.4)-.055:12.92*a,[Math.max(Math.min(o,1),0),Math.max(Math.min(i,1),0),Math.max(Math.min(a,1),0),t[3]]}function r(t){var e=new Uint8Array(1024),n=f(t,function(t){return function(t){var e=.04045<t[0]?Math.pow((t[0]+.055)/1.055,2.4):t[0]/12.92,n=.04045<t[1]?Math.pow((t[1]+.055)/1.055,2.4):t[1]/12.92,r=.04045<t[2]?Math.pow((t[2]+.055)/1.055,2.4):t[2]/12.92,o=.4124564*e+.3575761*n+.1804375*r,i=.2126729*e+.7151522*n+.072175*r,a=.0193339*e+.119192*n+.9503041*r;return i/=1,a/=1.08883,o=.008856<(o/=.95047)?Math.pow(o,1/3):7.787037*o+16/116,[116*(i=.008856<i?Math.pow(i,1/3):7.787037*i+16/116)-16,500*(o-i),200*(i-(a=.008856<a?Math.pow(a,1/3):7.787037*a+16/116)),t[3]]}([t[0]/255,t[1]/255,t[2]/255,t[3]/255])}),r=f(n,function(t,e,n){return 0<e?function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])+(t[3]-e[3])*(t[3]-e[3]))}(t,n[e-1]):0}),o=h(r);r=f(r,function(t){return t/o});for(var i,a,u,s=0,l=0,c=0;c<256;c++)(i=c/255)>s+r[l+1]&&l+1<n.length-1&&(s+=r[l+=1]),a=(i-s)/r[l+1],u=p([n[l][0]+(n[l+1][0]-n[l][0])*a,n[l][1]+(n[l+1][1]-n[l][1])*a,n[l][2]+(n[l+1][2]-n[l][2])*a,n[l][3]+(n[l+1][3]-n[l][3])*a]),e[4*c]=255*u[0],e[4*c+1]=255*u[1],e[4*c+2]=255*u[2],e[4*c+3]=255*u[3];return e}function o(r){return function(t,e){var n=Math.floor(t*(r.length/4-1));return e[0]=r[4*n],e[1]=r[4*n+1],e[2]=r[4*n+2],e[3]=r[4*n+3],e}}function a(t){if(!_[t])throw"Color table ".concat(t," does not exist");return _[t]}var i,u,s=r([[4,32,64,80],[8,64,129,127],[8,104,172,255],[43,140,190,255],[78,179,211,255],[123,204,196,255],[168,221,181,255],[204,235,197,255],[224,243,219,255],[247,252,240,255]]),l=r([[64,0,19,80],[128,0,38,127],[189,0,38,255],[227,26,28,255],[252,78,42,255],[253,141,60,255],[254,178,76,255],[254,217,118,255],[255,237,160,255]]),c=r([[0,64,38,80],[0,90,50,127],[35,132,67,255],[65,171,93,255],[120,198,121,255],[173,221,142,255],[217,240,163,255],[247,252,185,255],[255,255,229,255]]),y=r([[38,26,64,80],[68,47,114,127],[225,43,2,255],[2,220,1,255],[255,210,2,255],[255,255,255,255]]),d=r([[0,22,64,80],[0,57,102,127],[49,61,102,255],[225,43,2,255],[255,210,2,255],[255,255,255,255]]),v=r([[0,0,0,127],[64,64,64,255],[255,255,255,255]]),m=r([[132,84,15,255],[166,123,62,255],[201,163,109,255],[236,203,156,255],[255,255,255,255]]),b=((u=[]).push((i=[255,255,255,255])[0]),u.push(i[1]),u.push(i[2]),u.push(i[3]),u),g={cool:s,hot:l,verdant:c,spectral:y,temperature:d,gold:m,grey:v,flat:b},_={cool:o(s),hot:o(l),verdant:o(c),spectral:o(y),temperature:o(d),gold:o(m),grey:o(v),flat:o(b)};e.exports={hasRamp:function(t){return!!_[t]},getTable:function(t){if(!g[t])throw"Color table ".concat(t," does not exist");return g[t]},getFunc:a,getBuckets:function(t,e){for(var n=a(t),r=[],o=[],i=0;i<e;i++)n(i/(e-1),o),r.push([o[0]/255,o[1]/255,o[2]/255,o[3]/255]);return r},createRamp:function(t,e){return g[t]=r(e),_[t]=o(g[t]),_[t]},NUM_GRADIENT_STEPS:256}},{"lodash/map":187,"lodash/sum":200}],233:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("./DOMRenderer"),l=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,a(t).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(t,s),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"createContainer",value:function(){var t=document.createElement("div");return t.style.position="absolute",t.style.left=0,t.style.bottom=0,t}},{key:"createTile",value:function(t){var e=document.createElement("canvas");return e.style.position="absolute",e.style.width="".concat(t,"px"),e.style.height="".concat(t,"px"),e}},{key:"positionTile",value:function(t,e,n){t.style.left="".concat(e,"px"),t.style.bottom="".concat(n,"px")}}]),t}();e.exports=l},{"./DOMRenderer":234}],234:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){for(var n=t.getVisibleCoords(),r=new Map,o=0;o<n.length;o++){var i=n[o];r.set(i.hash,i)}var a=new Map;return e.forEach(function(t,e){r.has(e)||a.set(e,t)}),a}function c(n,t,r,e,o,i){for(var a=5<arguments.length&&void 0!==i&&i,u=e.tileSize,s=e.cell,l=document.createDocumentFragment(),c=function(t,e){for(var n=t.getVisibleCoords(),r=[],o=0;o<n.length;o++){var i=n[o],a=i.normalize(),u=e.get(a);u&&r.push({coord:i,tile:u})}return r}(e,o),f=0;f<c.length;f++){var h=c[f],p=h.coord;r.has(p.hash)||function(){var t=n.createTile(u),e=s.project(p.getPosition(),p.z);n.positionTile(t,e.x,e.y,u),a||(t.style.transition="opacity ".concat(400,"ms"),t.style.opacity="0.0"),n.drawTile(t,h.tile),l.append(t),a||setTimeout(function(){t.style.opacity=1},40),r.set(p.hash,{coord:p,elem:t})}()}0<l.children.length&&(t.appendChild(l),n.emit(d.DOM_POST_DRAW,new y.Event(c)))}var y=t("lumo"),d=t("../event/EventType"),f=Symbol(),h=Symbol(),p=Symbol(),v=function(){function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this))).tiles=null,t.container=null,t[h]=null,t[p]=null,t[f]=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,y.TileRenderer),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"onAdd",value:function(t){var e=this;return a(u(n.prototype),"onAdd",this).call(this,t),this.tiles=new Map,this[f]=function(t){!function(n,r){var o=n.layer.plot.tileSize;n.tiles.forEach(function(t){var e=r.project(t.coord.getPosition(),t.coord.z);n.positionTile(t.elem,e.x,e.y,o)})}(e,t.target)},this.layer.plot.on(y.CELL_UPDATE,this[f]),this.container=this.createContainer(),this.layer.plot.container.appendChild(this.container),this}},{key:"onRemove",value:function(t){return this.layer.plot.removeListener(y.CELL_UPDATE,this[f]),this[f]=null,this.layer.plot.container.removeChild(this.container),this.container=null,this.tiles=null,a(u(n.prototype),"onRemove",this).call(this,t),this}},{key:"createContainer",value:function(){throw"`createContainer` not implemented"}},{key:"createTile",value:function(){throw"`createTile` not implemented"}},{key:"positionTile",value:function(){throw"`positionTile` not implemented"}},{key:"draw",value:function(){var t=this,e=this.layer,n=e.plot,r=this.tiles,o=this.container,i=l(n,r);0<r.size&&i.size===r.size?(this[p]&&(clearTimeout(this[p]),this[p]=null),r.clear(),o.innerHTML=""):this[p]||(this[p]=setTimeout(function(){t[p]=null,function(t,n,r,e){l(e,r).forEach(function(t,e){r.delete(e),n.removeChild(t.elem)})}(0,t.container,t.tiles,t.layer.plot)},400)),this[h]||(this[h]=setTimeout(function(){t[h]=null,c(t,t.container,t.tiles,t.layer.plot,t.layer.pyramid,!1)},400));var a=n.cell.project(n.viewport,n.zoom),u=Math.round(n.getTargetZoom()),s=Math.pow(2,u-n.zoom);return o.style.transform="translate3d(".concat(-a.x,"px,").concat(a.y,"px,0) scale(").concat(s,")"),o.style.opacity=e.getOpacity(),o.style.zIndex=e.getZIndex(),this}},{key:"clear",value:function(){return a(u(n.prototype),"clear",this).call(this),this.container&&(this.container.innerHTML=""),this.tiles&&this.tiles.clear(),this[h]&&(clearTimeout(this[h]),this[h]=null),this[p]&&(clearTimeout(this[p]),this[p]=null),this}},{key:"redraw",value:function(t){var e=0<arguments.length&&void 0!==t&&t;return this.clear(),c(this,this.container,this.tiles,this.layer.plot,this.layer.pyramid,this.layer,e),this}},{key:"drawTile",value:function(){}}]),n}();e.exports=v},{"../event/EventType":237,lumo:206}],235:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("./DOMRenderer"),l=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,a(t).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(t,s),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"createContainer",value:function(){var t=document.createElement("div");return t.style.position="absolute",t.style.left=0,t.style.bottom=0,t}},{key:"createTile",value:function(t){var e=document.createElement("div");return e.style.position="absolute",e.style.width="".concat(t,"px"),e.style.height="".concat(t,"px"),e}},{key:"positionTile",value:function(t,e,n){t.style.left="".concat(e,"px"),t.style.bottom="".concat(n,"px")}}]),t}();e.exports=l},{"./DOMRenderer":234}],236:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("./DOMRenderer"),l="http://www.w3.org/2000/svg",c=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,a(t).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(t,s),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"createContainer",value:function(){var t=document.createElementNS(l,"svg");return t.style.position="absolute",t.style.overflow="visible",t.style.left=0,t.style.bottom=-20,t.setAttribute("width",20),t.setAttribute("height",20),t}},{key:"createTile",value:function(){return document.createElementNS(l,"g")}},{key:"positionTile",value:function(t,e,n,r){t.setAttribute("transform","translate(".concat(e,",").concat(-n-r,")"))}}]),t}();e.exports=c},{"./DOMRenderer":234}],237:[function(t,e,n){"use strict";e.exports={DOM_POST_DRAW:"postdraw",DRILLDOWN_EDIT_START:"drilldowneditstart",DRILLDOWN_EDIT:"drilldownedit",DRILLDOWN_EDIT_END:"drilldowneditend",DRILLDOWN_REMOVE:"drilldownremove"}},{}],238:[function(t,e,n){"use strict";var r=t("lumo"),o={DOM:t("./dom/DOMRenderer"),HTML:t("./dom/HTMLRenderer"),SVG:t("./dom/SVGRenderer"),Canvas:t("./dom/CanvasRenderer"),WebGL:r.WebGLRenderer},i={CommunityLabel:t("./html/CommunityLabel"),Debug:t("./html/Debug"),WordCloud:t("./html/WordCloud"),Drilldown:t("./html/Drilldown")},a={Heatmap:t("./canvas/Heatmap")},u={Community:t("./webgl/Community"),CommunityBucket:t("./webgl/CommunityBucket"),Heatmap:t("./webgl/Heatmap"),Image:t("./webgl/Image"),Micro:t("./webgl/Micro"),Macro:t("./webgl/Macro"),MacroEdge:t("./webgl/MacroEdge"),Repeat:t("./webgl/Repeat"),BinnedTopHits:t("./webgl/BinnedTopHits")};e.exports={Core:o,Canvas:a,HTML:i,WebGL:u}},{"./canvas/Heatmap":231,"./dom/CanvasRenderer":233,"./dom/DOMRenderer":234,"./dom/HTMLRenderer":235,"./dom/SVGRenderer":236,"./html/CommunityLabel":239,"./html/Debug":240,"./html/Drilldown":241,"./html/WordCloud":242,"./webgl/BinnedTopHits":245,"./webgl/Community":246,"./webgl/CommunityBucket":247,"./webgl/Heatmap":248,"./webgl/Image":249,"./webgl/Macro":250,"./webgl/MacroEdge":251,"./webgl/Micro":252,"./webgl/Repeat":253,lumo:206}],239:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t,e,n,r){var o="".concat(e,"pt ").concat(n),i=y.getContext("2d");i.font=o;var a=i.measureText(t);return Math.floor(a.width)+1+r}function l(t,e){return e.offsetHeight-t.offsetHeight}function S(t){if(t){var e=Math.round(255*t[0]),n=Math.round(255*t[1]),r=Math.round(255*t[2]),o=3<t.length?t[3]:1;return"rgba(".concat(e,",").concat(n,",").concat(r,",").concat(o,")")}return"white"}var T=t("jquery"),c=t("lumo"),E=t("lodash/get"),f=t("lodash/defaultTo"),h=t("../dom/HTMLRenderer"),p=t("../event/EventType"),P=t("../transform/Transform"),y=document.createElement("canvas"),d=Symbol(),v=Symbol(),m=Symbol(),b=Symbol(),g=Symbol(),_=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this,e))).transform=f(e.transform,"log10"),t.minFontSize=f(e.minFontSize,10),t.maxFontSize=f(e.maxFontSize,18),t.fontFamily=f(e.fontFamily,"'Helvetica Neue',sans-serif"),t.fontColor=f(e.color,[1,1,1]),t.minOpacity=f(e.minOpacity,.6),t.maxOpacity=f(e.maxOpacity,1),t.labelMaxLength=f(e.labelMaxLength,256),t.labelThreshold=f(e.labelThreshold,.6),t.labelField=f(e.labelField,"metadata"),t.labelDeconflict=f(e.labelDeconflict,!0),t.labelOffset=f(e.labelOffset,[0,0]),t[d]=null,t[v]=null,t[m]=null,t[g]=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,h),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"onAdd",value:function(t){var e=this;a(u(n.prototype),"onAdd",this).call(this,t),this[v]=function(t){e.onMouseOver(t)},this[m]=function(t){e.onMouseOut(t)},this[b]=function(t){e.onClick(t)},this.labelDeconflict&&(this[g]=function(a){return function(){var t=new c.RTree({collisionType:c.RECTANGLE,nodeCapacity:64}),e=a.find(".community-label");e.sort(l);for(var n=0;n<e.length;n++){var r=e[n],o=T(r).offset();if(t.searchRectangle(o.left,o.left+r.offsetWidth,o.top,o.top+r.offsetHeight))r.style.visibility="hidden";else{r.style.visibility="visible";var i=new c.RectangleCollidable(o.left,o.left+r.offsetWidth,o.top,o.top+r.offsetHeight,0,0,null,null);t.insert([i])}}}}(T(this.container)),this.on(p.DOM_POST_DRAW,this[g])),T(this.container).on("mouseover",this[v]),T(this.container).on("mouseout",this[m]),T(this.container).on("click",this[b])}},{key:"onRemove",value:function(t){T(this.container).off("mouseover",this[v]),T(this.container).off("mouseout",this[m]),T(this.container).off("click",this[b]),this.labelDeconflict&&(this.removeListener(c.POST_DRAW,this[g]),this[g]=null),this[v]=null,this[m]=null,this[b]=null,a(u(n.prototype),"onRemove",this).call(this,t)}},{key:"onMouseOver",value:function(t){var e=T(t.target).data("community");e&&(this[d]=e)}},{key:"onMouseOut",value:function(){this[d]=null}},{key:"onClick",value:function(){}},{key:"pick",value:function(){return this[d]}},{key:"drawTile",value:function(t,e){var n=e.data.hits,r=e.data.points;if(n){for(var o=this.layer,i=o.sortField,a=o.getExtrema(e.coord.z),u=T(),s=0;s<n.length;s++){var l=n[s],c=E(l,this.labelField);if(c){var f=E(l,i),h=P.transform(f,this.transform,a);if(!(h<this.labelThreshold)){var p=(h-this.labelThreshold)/(1-this.labelThreshold),y=Math.ceil(100*p),d=this.minFontSize+p*(this.maxFontSize-this.minFontSize),v=this.minOpacity+p*(this.maxOpacity-this.minOpacity),m=d+4,b=Math.min(O(c,d,this.fontFamily,10),this.labelMaxLength),g=S(this.fontColor),_=r[2*s]-b/2+this.labelOffset[0]*(b/2),x=r[2*s+1]-m/2+this.labelOffset[1]*(m/2),w=T('\n\t\t\t\t<div class="community-label" style="\n\t\t\t\t\tleft: '.concat(_,"px;\n\t\t\t\t\tbottom: ").concat(x,"px;\n\t\t\t\t\topacity: ").concat(v,";\n\t\t\t\t\tz-index: ").concat(y,";\n\t\t\t\t\twidth: ").concat(b,"px;\n\t\t\t\t\theight: ").concat(m,"pt;\n\t\t\t\t\tfont-size: ").concat(d,"pt;\n\t\t\t\t\tfont-family: ").concat(this.fontFamily,";\n\t\t\t\t\tcolor: ").concat(g,";\n\t\t\t\t\tline-height: ").concat(d,'pt;">').concat(c,"</div>\n\t\t\t\t"));w.data("community",l),u=u.add(w)}}}T(t).empty().append(u)}}}]),n}();e.exports=_},{"../dom/HTMLRenderer":235,"../event/EventType":237,"../transform/Transform":244,jquery:2,"lodash/defaultTo":161,"lodash/get":165,lumo:206}],240:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=t("jquery"),l=t("../dom/HTMLRenderer"),c=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,a(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,l),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"drawTile",value:function(t,e){s(t).empty().css({"border-left":"1px solid rgba(255, 255, 255, 0.5)","border-top":"1px solid rgba(255, 255, 255, 0.5)"}).append('<div style="position: absolute; top:10px; left:10px;">('.concat(e.coord.z,", ").concat(e.coord.x,", ").concat(e.coord.y,")</div>"))}}]),e}();e.exports=c},{"../dom/HTMLRenderer":235,jquery:2}],241:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){var n=t.getClippedGeometry(),r=new Map;return e.forEach(function(t,e){n.has(e)||r.set(e,t)}),r}function c(t,e){var n=e.project({x:t.left,y:t.bottom}),r=e.project({x:t.right,y:t.top});return new d.Bounds(n.x,r.x,n.y,r.y)}function f(t,e){var n=document.createElement("div");return n.className+=" drilldown-box drilldown-".concat(t),n.style.position="absolute",n.style.left="".concat(e.left,"px"),n.style.bottom="".concat(e.bottom,"px"),n.style.width="".concat(e.getWidth(),"px"),n.style.height="".concat(e.getHeight(),"px"),n}function h(o,t,e,n,i){var a=e.cell,u=document.createDocumentFragment(),r=n.getClippedGeometry(a);r.forEach(function(t,e){if(!i.has(e)){var n=c(t,a),r=f(t.id,n);o.mode===C?o.drawBounds(r,t):M(o,r,t,!0),u.append(r),i.set(e,{bounds:t,elem:r})}}),0<u.children.length&&(t.appendChild(u),o.emit(v.DOM_POST_DRAW,new d.Event(r)))}function p(t){return t.which?1===t.which:0===t.button}var y=t("jquery"),d=t("lumo"),v=t("../event/EventType"),m=Symbol(),b=Symbol(),g=Symbol(),_=Symbol(),x=Symbol(),w=Symbol(),O=Symbol(),S=Symbol(),T=Symbol(),E=Symbol(),P=Symbol(),j=Symbol(),k=Symbol(),C=Symbol(),A=Symbol(),R=Symbol(),M=function(t,e,n,r){var o=3<arguments.length&&void 0!==r&&r,i=document.createElement("div"),a=document.createElement("div"),u=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div");i.className="drilldown-handle top left",a.className="drilldown-handle bottom left",u.className="drilldown-handle top right",s.className="drilldown-handle bottom right",l.className="drilldown-handle center",c.className="drilldown-handle remove",o&&function(e,n,t,r,o,i,a,u){y(t).on("mousedown",function(t){p(t)&&(e[x]=!0,e[w]={x:n.right,y:n.bottom},e[O]=n,e.overlay.removeBounds(n.id),e.drawTempBounds(n),e.emit(v.DRILLDOWN_EDIT,new d.Event(n)),t.stopPropagation())}),y(r).on("mousedown",function(t){p(t)&&(e[x]=!0,e[w]={x:n.right,y:n.top},e[O]=n,e.overlay.removeBounds(n.id),e.drawTempBounds(n),e.emit(v.DRILLDOWN_EDIT,new d.Event(n)),t.stopPropagation())}),y(o).on("mousedown",function(t){p(t)&&(e[x]=!0,e[w]={x:n.left,y:n.bottom},e[O]=n,e.overlay.removeBounds(n.id),e.drawTempBounds(n),e.emit(v.DRILLDOWN_EDIT,new d.Event(n)),t.stopPropagation())}),y(i).on("mousedown",function(t){p(t)&&(e[x]=!0,e[w]={x:n.left,y:n.top},e[O]=n,e.overlay.removeBounds(n.id),e.drawTempBounds(n),e.emit(v.DRILLDOWN_EDIT,new d.Event(n)),t.stopPropagation())}),y(a).on("mousedown",function(t){p(t)&&(e[_]=!0,e[O]=n,e.overlay.removeBounds(n.id),e.drawTempBounds(n),e.emit(v.DRILLDOWN_EDIT,new d.Event(n)),t.stopPropagation())}),y(u).on("mousedown",function(t){t.stopPropagation()}),y(u).on("click",function(t){p(t)&&(e.overlay.removeBounds(n.id),e.emit(v.DRILLDOWN_REMOVE,new d.Event(n)),t.stopPropagation())})}(t,n,i,a,u,s,l,c),e.appendChild(i),e.appendChild(a),e.appendChild(u),e.appendChild(s),e.appendChild(l),e.appendChild(c),e.className+=" drilldown-editable"},L=function(){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=i(this,u(e).call(this))).mode=C,t.bounds=new Map,t.container=null,t.boundsLimit=null,t[b]=null,t[g]=null,t[m]=null,t[R]=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,d.OverlayRenderer),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"setBoundsLimit",value:function(t){this.boundsLimit=t}},{key:"onAdd",value:function(t){var o=this;return a(u(e.prototype),"onAdd",this).call(this,t),this[m]=function(t){!function(t,n){t.bounds.forEach(function(t){var e=c(t,n);t.elem.style.left="".concat(e.left,"px"),t.elem.style.bottom="".concat(e.bottom,"px"),t.elem.style.width="".concat(e.getWidth(),"px"),t.elem.style.height="".concat(e.getHeight(),"px")})}(o,t.target)},this.overlay.plot.on(d.CELL_UPDATE,this[m]),this.container=this.createContainer(),this.overlay.plot.container.appendChild(this.container),this[T]=function(t){if(p(t)&&(o[_]||o[x])){var e=o.overlay.plot.mouseToPlotCoord(t);if(o[_]){var n=o[O].getWidth()/2,r=o[O].getHeight()/2;o[O].left=e.x-n,o[O].right=e.x+n,o[O].bottom=e.y-r,o[O].top=e.y+r}else o[x]&&(o[O].left=o[w].x,o[O].right=o[w].x,o[O].bottom=o[w].y,o[O].top=o[w].y,o[O].extend(e));o.drawTempBounds(o[O]),o.emit(v.DRILLDOWN_EDIT,new d.Event(o[O])),t.stopPropagation()}},this[E]=function(t){p(t)&&(o[_]||o[x])&&(o[_]=!1,o[x]=!1,o.eraseTempBounds(),o.overlay.addBounds(o[O].id,o[O]),o.emit(v.DRILLDOWN_EDIT_END,new d.Event(o[O])),o[O]=null,t.stopPropagation())},document.addEventListener("mousemove",this[T]),document.addEventListener("mouseup",this[E]),this}},{key:"onRemove",value:function(t){return document.removeEventListener("mousemove",this[T]),document.removeEventListener("mouseup",this[E]),this[T]=null,this[E]=null,this.overlay.plot.removeListener(d.CELL_UPDATE,this[m]),this[m]=null,this.overlay.plot.container.removeChild(this.container),this.container=null,a(u(e.prototype),"onRemove",this).call(this,t),this}},{key:"createContainer",value:function(){var t=document.createElement("div");return t.style.position="absolute",t.style.left=0,t.style.bottom=0,t}},{key:"enableDrawing",value:function(){var n=this;this.mode=A,this.redraw(),this.overlay.plot.disablePanning(),this.overlay.plot.disableZooming();var r=!1,o=null,i=null;this[P]=function(t){p(t)&&(!n.boundsLimit||n.bounds.size<n.boundsLimit)&&(r=!0,i=n.overlay.plot.mouseToPlotCoord(t),(o=new d.Bounds(i.x,i.x,i.y,i.y)).id=n[R]++,n.drawTempBounds(o),n.emit(v.DRILLDOWN_EDIT_START,new d.Event(o)),t.stopPropagation())},this[j]=function(t){if(r&&o){o.left=i.x,o.right=i.x,o.bottom=i.y,o.top=i.y;var e=n.overlay.plot.mouseToPlotCoord(t);o.extend(e),n.drawTempBounds(o),n.emit(v.DRILLDOWN_EDIT,new d.Event(o)),t.stopPropagation()}},this[k]=function(t){p(t)&&r&&o&&(r=!1,n.eraseTempBounds(),n.overlay.addBounds(o.id,o),n.emit(v.DRILLDOWN_EDIT_END,new d.Event(o)),o=null,t.stopPropagation())},this.overlay.plot.getContainer().addEventListener("mousedown",this[P]),document.addEventListener("mousemove",this[j]),document.addEventListener("mouseup",this[k])}},{key:"disableDrawing",value:function(){this.mode=C,this.overlay.plot.getContainer().removeEventListener("mousedown",this[P]),document.removeEventListener("mousemove",this[j]),document.removeEventListener("mouseup",this[k]),this[P]=null,this[j]=null,this[k]=null,this.overlay.plot.enablePanning(),this.overlay.plot.enableZooming(),this.redraw()}},{key:"draw",value:function(){var t=this,e=this.overlay,n=e.plot,r=this.bounds,o=this.container,i=l(e,r);0<r.size&&i.size===r.size?(this[g]&&(clearTimeout(this[g]),this[g]=null),r.clear(),o.innerHTML=""):this[g]||(this[g]=setTimeout(function(){t[g]=null,function(t,n,r,e){l(e,r).forEach(function(t,e){r.delete(e),n.removeChild(t.elem)})}(0,t.container,t.bounds,t.overlay)},400)),this[b]||(this[b]=setTimeout(function(){t[b]=null,h(t,t.container,t.overlay.plot,t.overlay,t.bounds)},400));var a=n.cell.project(n.viewport,n.zoom),u=Math.round(n.getTargetZoom()),s=Math.pow(2,u-n.zoom);return o.style.transform="translate3d(".concat(-a.x,"px,").concat(a.y,"px,0) scale(").concat(s,")"),o.style.opacity=e.getOpacity(),o.style.zIndex=e.getZIndex(),this}},{key:"clear",value:function(){return a(u(e.prototype),"clear",this).call(this),this.container&&(this.container.innerHTML=""),this.bounds&&this.bounds.clear(),this[b]&&(clearTimeout(this[b]),this[b]=null),this[g]&&(clearTimeout(this[g]),this[g]=null),this[S]=null,this}},{key:"redraw",value:function(){return this.clear(),h(this,this.container,this.overlay.plot,this.overlay,this.bounds),this}},{key:"drawBounds",value:function(){}},{key:"drawTempBounds",value:function(t){var e=this.overlay.plot.cell,n=c(t,e);this.eraseTempBounds(),this[S]=f(t.id,n),this[S].className+=" drilldown-temporary",M(this,this[S],t,!1),this.container.appendChild(this[S])}},{key:"eraseTempBounds",value:function(){this[S]&&(this.container.removeChild(this[S]),this[S]=null)}}]),e}();e.exports=L},{"../event/EventType":237,jquery:2,lumo:206}],242:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e,n,r){for(var o,i,a={x:t.x,y:t.y,height:e.height,width:e.width},u=0;u<n.length;u++)if(o=a,i=n[u],2*Math.abs(o.x-i.x)<o.width+i.width&&2*Math.abs(o.y-i.y)<o.height+i.height)return!0;return!!function(t,e){return t.x+t.width/2>e.x+e.width/2||t.x-t.width/2<e.x-e.width/2||t.y+t.height/2>e.y+e.height/2||t.y-t.height/2<e.y-e.height/2}(a,r)&&(t.collisions++,t.arcLength=t.radius,!0)}function d(t,e){return e.count-t.count}function f(t,e,n){var r,o,i,a,u,s=t.layer.plot.tileSize,l={width:s-20,height:s-48,x:0,y:0},c=[];e=function(t,n,e){n=n.sort(d).slice(0,t.maxNumWords);for(var r=v('<div style="height:256px; width:256px;"></div>'),o=t.minFontSize,i=t.maxFontSize,a=t.transform,u=0;u<n.length;u++){var s=n[u];s.percent=m.transform(s.count,a,e),s.fontSize=o+s.percent*(i-o),r.append('\n\t\t\t<div class="word-cloud-label" style="\n\t\t\t\tvisibility:hidden;\n\t\t\t\tfont-size: '.concat(s.fontSize,'px;">').concat(s.text,"</div>;\n\t\t\t"))}return v("body").append(r),r.children().each(function(t,e){n[t].width=e.offsetWidth,n[t].height=e.offsetHeight}),r.remove(),n}(t,e,n);for(var f=0;f<e.length;f++)for(var h=e[f],p={radius:1,radiusInc:5,arcLength:10,x:0,y:0,t:0,collisions:0};p.collisions<1;)if(r=p,u=void 0,o=2*Math.PI,i=o*r.radius,a=(r.arcLength>i/10?i/10:r.arcLength)/r.radius,u=r.t+a,o<u&&(u%=o,r.radius=r.radius+r.radiusInc),r.t=u,r.x=r.radius*Math.cos(u),r.y=r.radius*Math.sin(u),!y(p=r,h,c,l)){c.push({text:h.text,fontSize:h.fontSize,percent:10*Math.round(100*h.percent/10),x:p.x,y:p.y,width:h.width,height:h.height});break}return c}var v=t("jquery"),h=t("lodash/map"),l=t("lodash/defaultTo"),c=t("../dom/HTMLRenderer"),m=t("../transform/Transform"),p=Symbol(),b=Symbol(),g=Symbol(),_=Symbol(),x=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this,e))).transform=l(e.transform,"log10"),t.maxNumWords=l(e.maxNumWords,10),t.minFontSize=l(e.minFontSize,10),t.maxFontSize=l(e.maxFontSize,24),t[p]=null,t[b]=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,c),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"onAdd",value:function(t){var e=this;a(u(n.prototype),"onAdd",this).call(this,t),this[p]=function(t){e.onMouseOver(t)},this[b]=function(t){e.onMouseOut(t)},this[g]=function(t){e.onClick(t)},v(this.container).on("mouseover",this[p]),v(this.container).on("mouseout",this[b]),v(this.container).on("click",this[g])}},{key:"onRemove",value:function(t){v(this.container).off("mouseover",this[p]),v(this.container).off("mouseout",this[b]),v(this.container).off("click",this[g]),this[p]=null,this[b]=null,this[g]=null,a(u(n.prototype),"onRemove",this).call(this,t)}},{key:"clearSelection",value:function(){v(this.container).removeClass("highlight"),this.highlight=null}},{key:"setHighlight",value:function(t){this.clearSelection(),v(this.container).addClass("highlight"),v('.word-cloud-label[data-word="'.concat(t,'"]')).addClass("highlight"),this.highlight=t}},{key:"onMouseOver",value:function(t){v(".word-cloud-label").removeClass("hover");var e=v(t.target).attr("data-word");e&&(v('.word-cloud-label[data-word="'.concat(e,'"]')).addClass("hover"),this[_]=e)}},{key:"onMouseOut",value:function(){v(".word-cloud-label").removeClass("hover"),this[_]=null}},{key:"onClick",value:function(t){v(".word-cloud-label").removeClass("highlight"),v(this.container).removeClass("highlight");var e=v(t.target).attr("data-word");e?this.setHighlight(e):this.clearSelection()}},{key:"pick",value:function(){return this[_]}},{key:"drawTile",value:function(t,e){for(var n=h(e.data,function(t,e){return{text:e,count:t}}),r=this.layer,o=r.getExtrema(e.coord.z),i=f(this,n,o),a=r.plot.tileSize/2,u=[],s=0;s<i.length;s++){var l=i[s],c=l.text===this.highlight?"highlight":"";u.push('\n\t\t\t\t<div class="\n\t\t\t\t\tword-cloud-label\n\t\t\t\t\tword-cloud-label-'.concat(l.percent,"\n\t\t\t\t\t").concat(c,'"\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tfont-size: ').concat(l.fontSize,"px;\n\t\t\t\t\t\tleft: ").concat(a+l.x-l.width/2,"px;\n\t\t\t\t\t\ttop: ").concat(a+l.y-l.height/2,"px;\n\t\t\t\t\t\twidth: ").concat(l.width,"px;\n\t\t\t\t\t\theight: ").concat(l.height,'px;"\n\t\t\t\t\tdata-word="').concat(l.text,'">').concat(l.text,"</div>\n\t\t\t\t"))}t.innerHTML=u.join("")}}]),n}();e.exports=x},{"../dom/HTMLRenderer":235,"../transform/Transform":244,jquery:2,"lodash/defaultTo":161,"lodash/map":187}],243:[function(t,e,n){"use strict";for(var r=[0,1],o=[0,2],i=4;i<65535;i<<=2)for(var a=0,u=r.length;a<u;a++)r.push(r[a]|i),o.push((r[a]|i)<<1);e.exports=function(t,e){return o[255&e]|r[255&t]}},{}],244:[function(t,e,n){"use strict";var a=t("lodash/clamp");var u={linear:function(t,e,n){var r=n-e;return 0==r?1:(t-e)/r},log10:function(t,e,n){var r=Math.log10(e||1),o=Math.log10(n||1);return(Math.log10(t||1)-r)/(o-r||1)},sigmoid:function(t,e,n){var r=Math.abs(e),o=Math.abs(n),i=t/(.15*Math.max(r,o));return 1/(1+Math.exp(-i))}},s={linear:function(t,e,n){var r=n-e;return 0==r?1:e+t*r},log10:function(t,e,n){var r=Math.log10(e||1),o=Math.log10(n||1);return Math.pow(10,t*o-t*r+r)},sigmoid:function(t,e,n){var r=Math.abs(e),o=Math.abs(n),i=Math.max(r,o);return 0===t?-i:1===t?i:Math.log(1/t-1)*(-.15*i)}};e.exports={transform:function(t,e,n){var r=n.min,o=n.max,i=a(t,r,o);return r!==o?u[e](i,r,o):1},untransform:function(t,e,n){var r=n.min,o=n.max,i=a(t,r,o);return r!==o?s[e](i,r,o):1},interpolate:function(t,e){var n=e.min,r=e.max;return a((t-n)/(r-n),0,1)}}},{"lodash/clamp":158}],245:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=t("lumo"),l=t("lodash/defaultTo"),c=t("./WebGLRenderer"),f=t("./shape/Point"),p=t("./shape/Quad"),y=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this,e))).point=null,t.atlas=null,t.quad=null,t.tree=null,t.color=l(e.color,[1,.4,.1,.8]),t.radius=l(e.radius,8),t.outlineColor=l(e.outlineColor,[0,0,0,1]),t.outlineWidth=l(e.outlineWidth,2),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,c),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"onAdd",value:function(t){return a(u(n.prototype),"onAdd",this).call(this,t),this.point=new f(this),this.quad=new p(this),this.atlas=this.createVertexAtlas({chunkSize:this.layer.hitsCount*(this.layer.resolution*this.layer.resolution),attributePointers:{0:{size:2,type:"FLOAT"}}}),this.tree=this.createRTreePyramid({createCollidables:function(t,e,n){for(var r=t.data,o=r.points,i=r.hits,a=i?i.length:0,u=this.radius+this.outlineWidth,s=new Array(a),l=0;l<a;l++){var c=o[2*l],f=o[2*l+1];s[l]=new h.CircleCollidable(c,f,u,e,n,t,i[l][0])}return s}.bind(this)}),this}},{key:"onRemove",value:function(t){return this.destroyVertexAtlas(this.atlas),this.destroyRTreePyramid(this.tree),this.atlas=null,this.tree=null,this.point=null,this.quad=null,a(u(n.prototype),"onRemove",this).call(this,t),this}},{key:"pick",value:function(t){return this.layer.plot.isZooming()?null:this.tree.searchPoint(t.x,t.y,this.layer.plot.zoom,this.layer.plot.getPixelExtent())}},{key:"draw",value:function(){var t=this.gl,e=this.layer,n=e.plot;n.renderBuffer.bind(),n.renderBuffer.clear(),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE_MINUS_SRC_ALPHA);for(var r=e.getSelected(),o=0;o<r.length;o++){var i=r[o];this.point.drawIndividual(i,this.radius+4,this.color,this.outlineWidth,this.outlineColor)}return e.highlighted&&!e.isSelected(e.highlighted)&&this.point.drawIndividual(e.highlighted,this.radius,this.color,this.outlineWidth,this.outlineColor),n.renderBuffer.unbind(),n.renderBuffer.blitToScreen(this.layer.getOpacity()),this}}]),n}();e.exports=y},{"./WebGLRenderer":254,"./shape/Point":258,"./shape/Quad":259,"lodash/defaultTo":161,lumo:206}],246:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var m=t("lodash/get"),b=t("lumo"),l=t("lodash/defaultTo"),c=t("./WebGLRenderer"),f=t("./shape/Ring"),h=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this,e))).atlas=null,t.ringFill=null,t.ringOutline=null,t.tree=null,t.color=l(e.color,[1,1,1,1]),t.outlineColor=l(e.outlineColor,[0,0,0,1]),t.highlightedColor=l(e.highlightedColor,[1,.5,1,1]),t.selectedColor=l(e.selectedColor,[1,.5,1,1]),t.ringWidth=l(e.ringWidth,2),t.ringOffset=l(e.ringOffset,0),t.outlineWidth=l(e.outlineWidth,1),t.radiusField=l(e.radiusField,"radius"),t.radiusCollisionTolerance=l(e.radiusCollisionTolerance,4),t.hideUntilHover=l(e.hideUntilHover,!1),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,c),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"onAdd",value:function(t){return a(u(n.prototype),"onAdd",this).call(this,t),this.ringFill=new f(this,this.ringWidth),this.ringOutline=new f(this,this.ringWidth+2*this.outlineWidth),this.atlas=this.createVertexAtlas({chunkSize:this.layer.hitsCount,attributePointers:{1:{size:2,type:"FLOAT"},2:{size:1,type:"FLOAT"}},onAdd:function(t,e){for(var n=e.coord,r=e.data,o=r.hits,i=r.points,a=i.length/2,u=this.radiusField,s=Math.pow(2,n.z),l=this.ringWidth/2+this.outlineWidth+this.ringOffset,c=new Float32Array(3*a),f=0;f<a;f++){var h=o[f],p=i[2*f],y=i[2*f+1],d=m(h,u)*s+l;c[3*f]=p,c[3*f+1]=y,c[3*f+2]=d}t.set(n.hash,c,c.length/t.stride)}.bind(this)}),this.tree=this.createRTreePyramid({createCollidables:function(t,e,n){for(var r=t.data,o=r.hits,i=r.points,a=o?o.length:0,u=Math.pow(2,t.coord.z),s=this.radiusField,l=this.ringWidth/2+this.outlineWidth+this.ringOffset,c=new Array(a),f=this.ringWidth+2*this.outlineWidth+2*this.radiusCollisionTolerance,h=0;h<a;h++){var p=o[h],y=i[2*h],d=i[2*h+1],v=m(p,s)*u+l;c[h]=new b.RingCollidable(y,d,v,f,e,n,t,p)}return c}.bind(this)}),this}},{key:"onRemove",value:function(t){return this.destroyVertexAtlas(this.atlas),this.destroyRTreePyramid(this.tree),this.tree=null,this.atlas=null,this.ringFill=null,this.ringOutline=null,a(u(n.prototype),"onRemove",this).call(this,t),this}},{key:"pick",value:function(t){return this.layer.plot.isZooming()?null:this.tree.searchPoint(t.x,t.y,this.layer.plot.zoom,this.layer.plot.getPixelExtent())}},{key:"draw",value:function(){var t=this.gl,e=this.layer,n=e.getOpacity();t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),this.hideUntilHover||(this.ringOutline.drawInstanced(this.atlas,this.outlineColor,n),this.ringFill.drawInstanced(this.atlas,this.color,n));for(var r=e.getSelected(),o=0;o<r.length;o++){var i=r[o];this.ringOutline.drawIndividual(i,this.outlineColor,n),this.ringFill.drawIndividual(i,this.selectedColor,n)}return e.highlighted&&!e.isSelected(e.highlighted)&&(this.ringOutline.drawIndividual(e.highlighted,this.outlineColor,n),this.ringFill.drawIndividual(e.highlighted,this.highlightedColor,n)),this}}]),n}();e.exports=h},{"./WebGLRenderer":254,"./shape/Ring":261,"lodash/defaultTo":161,"lodash/get":165,lumo:206}],247:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var S=t("lodash/get"),m=t("lumo"),l=t("lodash/flatten"),c=t("lodash/defaultTo"),f=t("./WebGLRenderer"),h=t("./shape/Ring"),p=t("../color/ColorRamp"),y=t("./shape/RadialQuad"),d=t("./shape/SegmentedRing"),v=function(){function r(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=i(this,u(r).call(this,e))).ringFill=null,t.ringOutline=null,t.quad=null,t.atlas=null,t.tree=null,t.outlineWidth=c(e.outlineWidth,1),t.outlineColor=c(e.outlineColor,[0,0,0,1]),t.ringWidth=c(e.ringWidth,3),t.ringOffset=c(e.ringOffset,0),t.tickWidth=c(e.tickWidth,2),t.tickHeight=c(e.tickHeight,8),t.radiusField=c(e.radiusField,"radius"),t.numBuckets=c(e.numBuckets,4),t.bucketsField=c(e.bucketsField,"buckets"),t.colorRamp=c(e.colorRamp,"verdant");var n=p.getBuckets(t.colorRamp,t.numBuckets+2);return t.colors=l(n.slice(0,t.numBuckets)),t.highlightedColors=l(n.slice(1,t.numBuckets+1)),t.selectedColors=l(n.slice(2,t.numBuckets+2)),t.radiusCollisionTolerance=c(e.radiusCollisionTolerance,4),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(r,f),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(r,[{key:"onAdd",value:function(t){a(u(r.prototype),"onAdd",this).call(this,t);var e=this.ringWidth+2*this.outlineWidth;return this.ringFill=new d(this,this.ringWidth,this.numBuckets),this.ringOutline=new h(this,e),this.quad=new y(this,-this.tickWidth/2,this.tickWidth/2,-e/2,this.tickHeight),this.atlas=this.createVertexAtlas({chunkSize:this.layer.hitsCount,attributePointers:{1:{type:"FLOAT",size:2},2:{type:"FLOAT",size:1},3:{type:"FLOAT",size:4},4:{type:"FLOAT",size:4},5:{type:"FLOAT",size:4},6:{type:"FLOAT",size:4}},onAdd:function(t,e){for(var n=e.coord,r=e.data,o=r.hits,i=r.points,a=i.length/2,u=this.radiusField,s=this.bucketsField,l=Math.pow(2,n.z),c=this.ringWidth/2+this.outlineWidth+this.ringOffset,f=t.stride,h=new Float32Array(a*f),p=0;p<a;p++){for(var y=o[p],d=i[2*p],v=i[2*p+1],m=S(y,u)*l+c,b=S(y,s),g=0,_=0;_<b.length;_++)g+=b[_];for(var x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=0,O=0;O<b.length;O++)x[O]=(w+b[O])/g,w+=b[O];h[p*f]=d,h[p*f+1]=v,h[p*f+2]=m,h[p*f+3]=x[0],h[p*f+4]=x[1],h[p*f+5]=x[2],h[p*f+6]=x[3],h[p*f+7]=x[4],h[p*f+8]=x[5],h[p*f+9]=x[6],h[p*f+10]=x[7],h[p*f+11]=x[8],h[p*f+12]=x[9],h[p*f+13]=x[10],h[p*f+14]=x[11],h[p*f+15]=x[12],h[p*f+16]=x[13],h[p*f+17]=x[14],h[p*f+18]=x[15]}t.set(n.hash,h,i.length)}.bind(this)}),this.tree=this.createRTreePyramid({createCollidables:function(t,e,n){for(var r=t.data,o=r.hits,i=r.points,a=o?o.length:0,u=Math.pow(2,t.coord.z),s=this.radiusField,l=this.ringWidth/2+this.outlineWidth+this.ringOffset,c=new Array(a),f=this.ringWidth+2*this.outlineWidth+2*this.radiusCollisionTolerance,h=0;h<a;h++){var p=o[h],y=i[2*h],d=i[2*h+1],v=S(p,s)*u+l;c[h]=new m.RingCollidable(y,d,v,f,e,n,t,p)}return c}.bind(this)}),this}},{key:"onRemove",value:function(t){return this.destroyVertexAtlas(this.atlas),this.destroyRTreePyramid(this.tree),this.tree=null,this.ringFill=null,this.ringOutline=null,this.quad=null,this.atlas=null,a(u(r.prototype),"onRemove",this).call(this,t),this}},{key:"pick",value:function(t){return this.layer.plot.isZooming()?null:this.tree.searchPoint(t.x,t.y,this.layer.plot.zoom,this.layer.plot.getPixelExtent())}},{key:"draw",value:function(){var t=this.gl,e=this.layer,n=e.getOpacity();t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),this.ringOutline.drawInstanced(this.atlas,this.outlineColor,n),this.ringFill.drawInstanced(this.atlas,this.colors,n);for(var r=e.getSelected(),o=0;o<r.length;o++){var i=r[o];this.ringFill.drawIndividual(i,this.selectedColors,n)}return e.highlighted&&!e.isSelected(e.highlighted)&&this.ringFill.drawIndividual(e.highlighted,this.highlightedColors,n),this.quad.drawInstanced(this.atlas,this.outlineColor,0,n),this}}]),r}();e.exports=v},{"../color/ColorRamp":232,"./WebGLRenderer":254,"./shape/RadialQuad":260,"./shape/Ring":261,"./shape/SegmentedRing":262,"lodash/defaultTo":161,"lodash/flatten":163,"lodash/get":165,lumo:206}],248:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=t("lodash/clamp"),c=t("lodash/defaultTo"),f=t("lumo"),h=t("./WebGLRenderer"),p=t("../color/ColorRamp"),y=t("./shader/ColorRamp"),d={common:y.common,vert:"\n\t\tattribute vec2 aPosition;\n\t\tattribute vec2 aTextureCoord;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform float uScale;\n\t\tuniform mat4 uProjectionMatrix;\n\n\t\tvarying vec2 vTextureCoord;\n\n\t\tvoid main() {\n\t\t\tvTextureCoord = aTextureCoord;\n\t\t\tvec2 wPosition = (aPosition * uScale) + uTileOffset;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t}\n\t\t",frag:"\n\t\tuniform float uOpacity;\n\t\tuniform sampler2D uTextureSampler;\n\n\t\tvarying vec2 vTextureCoord;\n\n\t\tfloat decodeRGBAToFloat(vec4 v) {\n\t\t\treturn\n\t\t\t\t(v.x * 255.0) +\n\t\t\t\t(v.y * 255.0 * 256.0) +\n\t\t\t\t(v.z * 255.0 * 65536.0) +\n\t\t\t\t(v.w * 255.0 * 16777216.0);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tvec4 enc = texture2D(uTextureSampler, vTextureCoord);\n\t\t\tfloat count = decodeRGBAToFloat(enc);\n\t\t\tif (count == 0.0) {\n\t\t\t\tdiscard;\n\t\t\t}\n\t\t\tvec4 color = colorRampLookup(count);\n\t\t\tgl_FragColor = vec4(color.rgb, color.a * uOpacity);\n\t\t}\n\t\t"},v=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this,e))).transform=c(e.transform,"log10"),t.range=c(e.range,[0,1]),t.colorRamp=c(e.colorRamp,"verdant"),t.quad=null,t.shader=null,t.array=null,t.ramp=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,h),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"onAdd",value:function(t){return a(u(n.prototype),"onAdd",this).call(this,t),this.quad=function(t,e,n){var r=new Float32Array(24);return r[0]=e,r[1]=e,r[2]=n,r[3]=e,r[4]=n,r[5]=n,r[6]=e,r[7]=e,r[8]=n,r[9]=n,r[10]=e,r[11]=n,r[12]=0,r[13]=0,r[14]=1,r[15]=0,r[16]=1,r[17]=1,r[18]=0,r[19]=0,r[20]=1,r[21]=1,r[22]=0,r[23]=1,new f.VertexBuffer(t,r,{0:{size:2,type:"FLOAT",byteOffset:0},1:{size:2,type:"FLOAT",byteOffset:48}},{count:6})}(this.gl,0,t.plot.tileSize),this.array=this.createTextureArray({chunkSize:t.resolution,onAdd:function(t,e){this.array.chunkSize!==this.layer.resolution&&(this.array.chunkSize=this.layer.resolution),t.set(e.coord.hash,new Uint8Array(e.data))}.bind(this),filter:"NEAREST"}),this.setTransform(this.transform),this.setColorRamp(this.colorRamp),this}},{key:"onRemove",value:function(t){return this.destroyTextureArray(this.array),this.quad=null,this.shader=null,this.array=null,a(u(n.prototype),"onRemove",this).call(this,t),this}},{key:"setTransform",value:function(t){this.transform=t,this.shader=this.createShader(y.addTransformDefine(d,this.transform)),this.plot&&this.layer.plot.setDirty()}},{key:"getTransform",value:function(){return this.transform}},{key:"setValueRange",value:function(t,e){this.range=[l(t,0,1),l(e,0,1)],this.plot&&this.layer.plot.setDirty()}},{key:"getValueRange",value:function(){return[this.range[0],this.range[1]]}},{key:"setColorRamp",value:function(t){this.colorRamp=t,this.ramp=y.createRampTexture(this.gl,this.colorRamp),this.plot&&this.layer.plot.setDirty()}},{key:"getColorRamp",value:function(){return this.colorRamp}},{key:"getColorRampFunc",value:function(){return p.getFunc(this.colorRamp)}},{key:"draw",value:function(){var t=this.gl,e=this.shader,n=this.array,r=this.quad,o=this.ramp,i=this.getRenderables(),a=this.getOrthoMatrix(),u=this.layer.getExtrema();e.use(),e.setUniform("uProjectionMatrix",a),e.setUniform("uTextureSampler",0),e.setUniform("uColorRampSampler",1),e.setUniform("uColorRampSize",o.width),e.setUniform("uOpacity",this.layer.getOpacity()),e.setUniform("uRangeMin",this.range[0]),e.setUniform("uRangeMax",this.range[1]),e.setUniform("uMin",u.min),e.setUniform("uMax",u.max),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),r.bind(),o.bind(1);for(var s=0;s<i.length;s++){var l=i[s];n.bind(l.hash,0),e.setUniform("uScale",l.scale),e.setUniform("uTileOffset",l.tileOffset),r.draw()}return r.unbind(),this}}]),n}();e.exports=v},{"../color/ColorRamp":232,"./WebGLRenderer":254,"./shader/ColorRamp":256,"lodash/clamp":158,"lodash/defaultTo":161,lumo:206}],249:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=t("lodash/defaultTo"),c=t("lumo"),f={common:t("./shader/BrightnessTransform").common,vert:"\n\t\tprecision highp float;\n\t\tattribute vec2 aPosition;\n\t\tattribute vec2 aTextureCoord;\n\t\tuniform vec4 uTextureCoordOffset;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform float uScale;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tvarying vec2 vTextureCoord;\n\t\tvoid main() {\n\t\t\tvTextureCoord = vec2(\n\t\t\t\tuTextureCoordOffset.x + (aTextureCoord.x * uTextureCoordOffset.z),\n\t\t\t\tuTextureCoordOffset.y + (aTextureCoord.y * uTextureCoordOffset.w));\n\t\t\tvec2 wPosition = (aPosition * uScale) + uTileOffset;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\t\tuniform sampler2D uTextureSampler;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vTextureCoord;\n\t\tvoid main() {\n\t\t\tvec4 color = texture2D(uTextureSampler, vec2(vTextureCoord.x, 1.0 - vTextureCoord.y));\n\t\t\tcolor = brightnessTransform(color);\n\t\t\tgl_FragColor = vec4(color.rgb, color.a * uOpacity);\n\t\t}\n\t\t"},h=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this,e))).brightness=l(e.brightness,1),t.quad=null,t.shader=null,t.array=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,c.WebGLTileRenderer),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"onAdd",value:function(t){return a(u(n.prototype),"onAdd",this).call(this,t),this.quad=function(t,e,n){var r=new Float32Array(24);return r[0]=e,r[1]=e,r[2]=n,r[3]=e,r[4]=n,r[5]=n,r[6]=e,r[7]=e,r[8]=n,r[9]=n,r[10]=e,r[11]=n,r[12]=0,r[13]=0,r[14]=1,r[15]=0,r[16]=1,r[17]=1,r[18]=0,r[19]=0,r[20]=1,r[21]=1,r[22]=0,r[23]=1,new c.VertexBuffer(t,r,{0:{size:2,type:"FLOAT",byteOffset:0},1:{size:2,type:"FLOAT",byteOffset:48}},{count:6})}(this.gl,0,t.plot.tileSize),this.shader=this.createShader(f),this.array=this.createTextureArray({chunkSize:t.plot.tileSize,onAdd:function(t,e){t.set(e.coord.hash,new Uint8Array(e.data))}.bind(this)}),this}},{key:"onRemove",value:function(t){return this.destroyTextureArray(this.array),this.array=null,this.quad=null,this.shader=null,a(u(n.prototype),"onRemove",this).call(this,t),this}},{key:"setBrightness",value:function(t){this.brightness=t,this.plot&&this.layer.plot.setDirty()}},{key:"draw",value:function(){var t=this.gl,e=this.shader,n=this.array,r=this.quad,o=this.getRenderablesLOD(),i=this.getOrthoMatrix();e.use(),e.setUniform("uProjectionMatrix",i),e.setUniform("uTextureSampler",0),e.setUniform("uOpacity",this.layer.opacity),e.setUniform("uBrightness",this.brightness),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),r.bind();for(var a=0;a<o.length;a++){var u=o[a];n.bind(u.hash,0),e.setUniform("uTextureCoordOffset",u.uvOffset),e.setUniform("uScale",u.scale),e.setUniform("uTileOffset",u.tileOffset),r.draw()}return r.unbind(),this}}]),n}();e.exports=h},{"./shader/BrightnessTransform":255,"lodash/defaultTo":161,lumo:206}],250:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=t("lodash/defaultTo"),c=t("./WebGLRenderer"),f=t("./shape/Point"),h=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this,e))).atlas=null,t.point=null,t.color=l(e.color,[1,.4,.1,.8]),t.outlineColor=l(e.outlineColor,[0,0,0,1]),t.outlineWidth=l(e.outlineWidth,2),t.radius=l(e.radius,2),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,c),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"onAdd",value:function(t){return a(u(n.prototype),"onAdd",this).call(this,t),this.point=new f(this),this.atlas=this.createVertexAtlas({chunkSize:this.layer.resolution*this.layer.resolution,attributePointers:{0:{size:2,type:"FLOAT"}},onAdd:function(t,e){var n=0<this.layer.lod?e.data.points:e.data;t.set(e.coord.hash,n,n.length/t.stride)}.bind(this)}),this}},{key:"onRemove",value:function(t){return this.destroyVertexAtlas(this.atlas),this.point=null,this.atlas=null,a(u(n.prototype),"onRemove",this).call(this,t),this}},{key:"draw",value:function(){var t=this.gl,e=this.layer,n=e.plot;return n.renderBuffer.bind(),n.renderBuffer.clear(),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE_MINUS_SRC_ALPHA),this.point.drawInstanced(this.atlas,this.radius,this.color,this.outlineWidth,this.outlineColor),n.renderBuffer.unbind(),n.renderBuffer.blitToScreen(e.getOpacity()),this}}]),n}();e.exports=h},{"./WebGLRenderer":254,"./shape/Point":258,"lodash/defaultTo":161}],251:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=t("lumo"),l=t("lodash/clamp"),c=t("lodash/defaultTo"),h=t("./WebGLRenderer"),p=t("./shape/Edge"),y=t("../color/ColorRamp"),d=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this,e))).edge=null,t.atlas=null,t.transform=c(e.transform,"log10"),t.range=c(e.range,[0,1]),t.colorRamp=c(e.colorRamp,"cool"),t.ext=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,h),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"onAdd",value:function(t){return a(u(n.prototype),"onAdd",this).call(this,t),this.ext=null,this.edge=new p(this,this.transform,this.colorRamp),this.atlas=this.createVertexAtlas({chunkSize:2*this.layer.hitsCount,attributePointers:{0:{size:2,type:"FLOAT"},1:{size:1,type:"FLOAT"}},onAdd:function(t,e){for(var n=0<this.layer.lod?e.data.edges:e.data,r=Math.pow(2,16),o=new f.Bounds(-r,r,-r,r),i=0;i<n.length;i+=6){var a=n[i],u=n[i+1],s=n[i+3],l=n[i+4],c=o.clipLine([{x:a,y:u},{x:s,y:l}]);n[i]=c[0].x,n[i+1]=c[0].y,n[i+3]=c[1].x,n[i+4]=c[1].y}t.set(e.coord.hash,n,n.length/t.stride)}.bind(this)}),this}},{key:"onRemove",value:function(t){return this.destroyVertexAtlas(this.atlas),this.atlas=null,this.edge=null,a(u(n.prototype),"onRemove",this).call(this,t),this}},{key:"setTransform",value:function(t){return this.transform=t,this.edge.setTransform(this.transform),this.layer.plot&&this.layer.plot.setDirty(),this}},{key:"getTransform",value:function(){return this.transform}},{key:"setValueRange",value:function(t,e){this.range=[l(t,0,1),l(e,0,1)],this.layer.plot&&this.layer.plot.setDirty()}},{key:"getValueRange",value:function(){return[this.range[0],this.range[1]]}},{key:"setColorRamp",value:function(t){this.colorRamp=t,this.edge.setColorRamp(t),this.layer.plot&&this.layer.plot.setDirty()}},{key:"getColorRamp",value:function(){return this.colorRamp}},{key:"getColorRampFunc",value:function(){return y.getFunc(this.colorRamp)}},{key:"draw",value:function(){var t=this.gl;return t.enable(t.BLEND),this.ext?(t.blendEquation(this.ext.MAX_EXT),t.blendFunc(t.SRC_ALPHA,t.DST_ALPHA)):t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),this.edge.drawInstanced(this.atlas,this.layer.getOpacity()),this.ext&&t.blendEquation(t.FUNC_ADD),this}}]),n}();e.exports=d},{"../color/ColorRamp":232,"./WebGLRenderer":254,"./shape/Edge":257,"lodash/clamp":158,"lodash/defaultTo":161,lumo:206}],252:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=t("lumo"),l=t("lodash/defaultTo"),c=t("./WebGLRenderer"),f=t("./shape/Point"),p=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this,e))).point=null,t.atlas=null,t.tree=null,t.color=l(e.color,[1,.4,.1,.8]),t.radius=l(e.radius,4),t.outlineColor=l(e.outlineColor,[0,0,0,1]),t.outlineWidth=l(e.outlineWidth,2),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,c),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"onAdd",value:function(t){return a(u(n.prototype),"onAdd",this).call(this,t),this.point=new f(this),this.atlas=this.createVertexAtlas({chunkSize:this.layer.hitsCount,attributePointers:{0:{size:2,type:"FLOAT"}},onAdd:function(t,e){var n=0<this.layer.lod?e.data.points:e.data;t.set(e.coord.hash,n,n.length/t.stride)}.bind(this)}),this.tree=this.createRTreePyramid({createCollidables:function(t,e,n){for(var r=t.data,o=r.points,i=r.hits,a=i?i.length:0,u=this.radius+this.outlineWidth,s=new Array(a),l=0;l<a;l++){var c=o[2*l],f=o[2*l+1];s[l]=new h.CircleCollidable(c,f,u,e,n,t,i[l])}return s}.bind(this)}),this}},{key:"onRemove",value:function(t){return this.destroyVertexAtlas(this.atlas),this.destroyRTreePyramid(this.tree),this.atlas=null,this.tree=null,this.point=null,a(u(n.prototype),"onRemove",this).call(this,t),this}},{key:"pick",value:function(t){return this.layer.plot.isZooming()?null:this.tree.searchPoint(t.x,t.y,this.layer.plot.zoom,this.layer.plot.getPixelExtent())}},{key:"draw",value:function(){var t=this.gl,e=this.layer,n=e.plot;n.renderBuffer.bind(),n.renderBuffer.clear(),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE_MINUS_SRC_ALPHA),this.point.drawInstanced(this.atlas,this.radius,this.color,this.outlineWidth,this.outlineColor);for(var r=e.getSelected(),o=0;o<r.length;o++){var i=r[o];this.point.drawIndividual(i,this.radius+8,this.color,this.outlineWidth,this.outlineColor)}return e.highlighted&&!e.isSelected(e.highlighted)&&this.point.drawIndividual(e.highlighted,this.radius+4,this.color,this.outlineWidth,this.outlineColor),n.renderBuffer.unbind(),n.renderBuffer.blitToScreen(this.layer.getOpacity()),this}}]),n}();e.exports=p},{"./WebGLRenderer":254,"./shape/Point":258,"lodash/defaultTo":161,lumo:206}],253:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=t("lumo"),c=Symbol(),f={vert:"\n\t\tprecision highp float;\n\t\tattribute vec2 aPosition;\n\t\tattribute vec2 aTextureCoord;\n\t\tuniform float uScale;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tvarying vec2 vTextureCoord;\n\t\tvoid main() {\n\t\t\tvTextureCoord = aTextureCoord;\n\t\t\tvec2 wPosition = (aPosition * uScale) + uTileOffset;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\t\tuniform sampler2D uTextureSampler;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vTextureCoord;\n\t\tvoid main() {\n\t\t\tvec4 color = texture2D(uTextureSampler, vec2(vTextureCoord.x, 1.0 - vTextureCoord.y));\n\t\t\tgl_FragColor = vec4(color.rgb, color.a * uOpacity);\n\t\t}\n\t\t"},h=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this,e))).quad=null,t.texture=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,l.WebGLTileRenderer),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"onAdd",value:function(t){var e=this;return a(u(n.prototype),"onAdd",this).call(this,t),this.quad=function(t,e,n){var r=new Float32Array(24);return r[0]=e,r[1]=e,r[2]=n,r[3]=e,r[4]=n,r[5]=n,r[6]=e,r[7]=e,r[8]=n,r[9]=n,r[10]=e,r[11]=n,r[12]=0,r[13]=0,r[14]=1,r[15]=0,r[16]=1,r[17]=1,r[18]=0,r[19]=0,r[20]=1,r[21]=1,r[22]=0,r[23]=1,new l.VertexBuffer(t,r,{0:{size:2,type:"FLOAT",byteOffset:0},1:{size:2,type:"FLOAT",byteOffset:48}},{count:6})}(this.gl,0,t.plot.tileSize),this.shader=this.createShader(f),this[c]=function(t){e.texture||(e.texture=new l.Texture(e.gl,t.tile.data))},this.layer.on(l.TILE_ADD,this[c]),this}},{key:"onRemove",value:function(t){return this.layer.removeListener(l.TILE_ADD,this[c]),this[c]=null,this.texture=null,this.quad=null,this.shader=null,a(u(n.prototype),"onRemove",this).call(this,t),this}},{key:"draw",value:function(){if(this.texture){var t=this.texture,e=this.gl,n=this.shader,r=this.quad,o=this.getOrthoMatrix(),i=this.layer.plot,a=i.getViewportPixelOffset();n.use(),n.setUniform("uProjectionMatrix",o),n.setUniform("uTextureSampler",0),n.setUniform("uOpacity",this.layer.getOpacity()),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),t.bind(0),r.bind();for(var u=i.getVisibleCoords(),s=0;s<u.length;s++){var l=u[s],c=Math.pow(2,i.zoom-l.z),f=[l.x*c*i.tileSize-a.x,l.y*c*i.tileSize-a.y];n.setUniform("uScale",c),n.setUniform("uTileOffset",f),r.draw()}r.unbind()}}}]),n}();e.exports=h},{lumo:206}],254:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=t("lodash/defaultTo"),c=t("lumo"),f=Symbol(),h=function(){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this,e))).brightness=l(e.brightness,1),t[f]=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,c.WebGLTileRenderer),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"onAdd",value:function(t){var e=this;return a(u(n.prototype),"onAdd",this).call(this,t),this[f]=function(){e.layer.clear()},this.layer.plot.on(c.ZOOM_START,this[f]),this}},{key:"onRemove",value:function(t){return this.layer.plot.removeListener(c.ZOOM_START,this[f]),this[f]=null,a(u(n.prototype),"onRemove",this).call(this,t),this}},{key:"setBrightness",value:function(t){this.brightness=t,this.plot&&this.layer.plot.setDirty()}}]),n}();e.exports=h},{"lodash/defaultTo":161,lumo:206}],255:[function(t,e,n){"use strict";e.exports={common:"\n\t\tprecision highp float;\n\t\tuniform float uBrightness;\n\t\tvec4 brightnessTransform(vec4 color) {\n\t\t\treturn vec4(\n\t\t\t\tcolor.r * uBrightness,\n\t\t\t\tcolor.g * uBrightness,\n\t\t\t\tcolor.b * uBrightness,\n\t\t\t\tcolor.a);\n\t\t}\n\t"}},{}],256:[function(t,e,n){"use strict";var i=t("lumo"),a=t("../../color/ColorRamp");e.exports={common:"\n\t\tprecision highp float;\n\n\t\tuniform float uRangeMin;\n\t\tuniform float uRangeMax;\n\t\tuniform float uMin;\n\t\tuniform float uMax;\n\t\tuniform float uColorRampSize;\n\t\tuniform sampler2D uColorRampSampler;\n\n\t\tfloat log10(float val) {\n\t\t\treturn log(val) / log(10.0);\n\t\t}\n\n\t\tfloat log10Transform(float val, float minVal, float maxVal) {\n\t\t\tif (minVal < 1.0) { minVal = 1.0; }\n\t\t\tif (maxVal < 1.0) { maxVal = 1.0; }\n\t\t\tif (val < 1.0) { val = 1.0; }\n\t\t\tfloat logMin = log10(minVal);\n\t\t\tfloat logMax = log10(maxVal);\n\t\t\tfloat logVal = log10(val);\n\t\t\tfloat range = logMax - logMin;\n\t\t\tif (range == 0.0) { range = 1.0; }\n\t\t\treturn (logVal - logMin) / range;\n\t\t}\n\n\t\tfloat sigmoidTransform(float val, float minVal, float maxVal) {\n\t\t\tminVal = abs(minVal);\n\t\t\tmaxVal = abs(maxVal);\n\t\t\tfloat dist = max(minVal, maxVal);\n\t\t\tfloat SIGMOID_SCALE = 0.15;\n\t\t\tfloat scaledVal = val / (SIGMOID_SCALE * dist);\n\t\t\treturn 1.0 / (1.0 + exp(-scaledVal));\n\t\t}\n\n\t\tfloat linearTransform(float val, float minVal, float maxVal) {\n\t\t\tfloat range = maxVal - minVal;\n\t\t\tif (range == 0.0) { range = 1.0; }\n\t\t\treturn (val - minVal) / range;\n\t\t}\n\n\t\tfloat transform(float val) {\n\t\t\tval = clamp(val, uMin, uMax);\n\t\t\t#ifdef LINEAR_TRANSFORM\n\t\t\t\treturn linearTransform(val, uMin, uMax);\n\t\t\t#else\n\t\t\t\t#ifdef SIGMOID_TRANSFORM\n\t\t\t\t\treturn sigmoidTransform(val, uMin, uMax);\n\t\t\t\t#else\n\t\t\t\t\treturn log10Transform(val, uMin, uMax);\n\t\t\t\t#endif\n\t\t\t#endif\n\t\t}\n\n\t\tfloat interpolateToRange(float nval) {\n\t\t\tfloat rval = (nval - uRangeMin) / (uRangeMax - uRangeMin);\n\t\t\treturn clamp(rval, 0.0, 1.0);\n\t\t}\n\n\t\tvec4 colorRampLookup(float val) {\n\t\t\tfloat nval = transform(val);\n\t\t\tfloat rval = interpolateToRange(nval);\n\t\t\tfloat maxIndex = uColorRampSize * uColorRampSize - 1.0;\n\t\t\tfloat lookup = rval * maxIndex;\n\t\t\tfloat x = mod(lookup, uColorRampSize);\n\t\t\tfloat y = floor(lookup / uColorRampSize);\n\t\t\tfloat pixel = 1.0 / uColorRampSize;\n\t\t\tfloat tx = (x / uColorRampSize) + (pixel * 0.5);\n\t\t\tfloat ty = (y / uColorRampSize) + (pixel * 0.5);\n\t\t\treturn texture2D(uColorRampSampler, vec2(tx, ty));\n\t\t}\n\t",addTransformDefine:function(t,e){var n=t.define||{};switch(e){case"linear":n.LINEAR_TRANSFORM=1;case"sigmoid":n.SIGMOID_TRANSFORM=1;default:n.LOG_TRANSFORM=1}return t.define=n,t},createRampTexture:function(t,e){var n=a.getTable(e),r=Math.sqrt(n.length/4),o=new i.Texture(t,null,{filter:"NEAREST"});return o.bufferData(n,r,r),o}}},{"../../color/ColorRamp":232,lumo:206}],257:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=t("lumo"),C=t("../../morton/Morton"),r=t("../shader/BrightnessTransform"),a=t("../shader/ColorRamp"),u={common:[r.common,a.common].join("\n"),vert:"\n\t\tattribute vec2 aPosition;\n\t\tattribute float aWeight;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform float uScale;\n\t\tuniform vec2 uLODOffset;\n\t\tuniform float uLODScale;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tuniform vec2 uViewport;\n\t\tuniform float uOpacity;\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tvec2 wPosition = (aPosition * uScale * uLODScale) + (uTileOffset + (uScale * uLODOffset));\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\n\t\t\tvec4 color;\n\t\t\tfloat x = wPosition[0];\n\t\t\tfloat y = wPosition[1];\n\t\t\tif (x >= 0.0 && x <= uViewport.x && y >= 0.0 && y <= uViewport.y) {\n\t\t\t\tcolor = brightnessTransform(colorRampLookup(aWeight));\n\t\t\t\tcolor.a = color.a * uOpacity;\n\t\t\t} else {\n\t\t\t\tcolor = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tvColor = color;\n\t\t}\n\t\t",frag:"\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vColor;\n\t\t}\n\t\t"},s={common:[r.common,a.common].join("\n"),vert:"\n\t\tattribute vec2 aPosition;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform float uScale;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tuniform vec2 uPointA;\n\t\tuniform vec2 uPointB;\n\t\tuniform vec2 uWeights;\n\t\tuniform float uOpacity;\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tvec2 wPosition;\n\t\t\tfloat wWeight;\n\t\t\tif (aPosition.x > 0.0) {\n\t\t\t\twPosition = (uPointA * uScale) + uTileOffset;\n\t\t\t\twWeight = uWeights.x;\n\t\t\t} else {\n\t\t\t\twPosition = (uPointB * uScale) + uTileOffset;\n\t\t\t\twWeight = uWeights.y;\n\t\t\t}\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t\tvec4 color = brightnessTransform(colorRampLookup(wWeight));\n\t\t\tvColor = vec4(color.rgb, color.a * uOpacity);\n\t\t}\n\t\t",frag:"\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vColor;\n\t\t}\n\t\t"},l=function(){function r(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.renderer=t,this.setTransform(e),this.setColorRamp(n),this.line=function(t){var e=new Float32Array(2);return e[0]=1,e[1]=1,e[2]=-1,e[3]=-1,new i.VertexBuffer(t,e,{0:{size:2,type:"FLOAT"}},{mode:"LINES",count:1})}(t.gl)}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(r,[{key:"setTransform",value:function(t){this.shader={instanced:this.renderer.createShader(a.addTransformDefine(u,t)),individual:this.renderer.createShader(a.addTransformDefine(s,t))}}},{key:"setColorRamp",value:function(t){this.ramp=a.createRampTexture(this.renderer.gl,t)}},{key:"drawInstanced",value:function(t,e){var n=this.shader.instanced,r=this.renderer,o=r.layer,i=o.plot,a=this.ramp,u=o.getExtrema(),s=r.getOrthoMatrix(),l=i.getViewportPixelSize();n.use(),a.bind(0),n.setUniform("uProjectionMatrix",s),n.setUniform("uBrightness",r.brightness),n.setUniform("uColorRampSampler",0),n.setUniform("uColorRampSize",a.width),n.setUniform("uOpacity",e),n.setUniform("uRangeMin",r.range[0]),n.setUniform("uRangeMax",r.range[1]),n.setUniform("uMin",u.min),n.setUniform("uMax",u.max),n.setUniform("uViewport",[l.width,l.height]),t.bind(),0<o.lod?function(t,e,n,r,o){for(var i,a,u,s,l,c,f,h=Math.round(n.zoom),p=0;p<o.length;p++){var y=o[p];if(!(r<Math.abs(y.tile.coord.z-h))){var d=y.uvOffset[0],v=y.uvOffset[1],m=y.uvOffset[3];t.setUniform("uScale",y.scale),t.setUniform("uTileOffset",y.tileOffset);var b=1/m,g=[-d*b*n.tileSize,-v*b*n.tileSize];t.setUniform("uLODScale",1/m),t.setUniform("uLODOffset",g);var _=k((i=d,a=v,u=m,s=r,void 0,l=Math.pow(2,s),c=u*l,[f=C(i*l,a*l),f+c*c]),2),x=_[0],w=_[1],O=y.tile.data.edges,S=y.tile.data.offsets,T=S[x],E=w===S.length?O.byteLength:S[w],P=T/(4*e.stride),j=(E-T)/(4*e.stride);0<j&&e.draw(y.hash,"LINES",P,j)}}}(n,t,i,o.lod,r.getRenderablesLOD()):function(t,e,n){for(var r=0;r<n.length;r++){var o=n[r];t.setUniform("uScale",o.scale),t.setUniform("uTileOffset",o.tileOffset),t.setUniform("uLODScale",1),t.setUniform("uLODOffset",[0,0]),e.draw(o.hash,"LINES")}}(n,t,r.getRenderables()),t.unbind()}},{key:"drawIndividual",value:function(t,e){var n=this.shader.individual,r=this.line,o=this.renderer,i=o.layer,a=i.plot,u=this.ramp,s=i.getExtrema(),l=o.getOrthoMatrix(),c=a.getViewportPixelOffset(),f=t.tile.coord,h=Math.pow(2,a.zoom-f.z),p=[f.x*h*a.tileSize-c.x,f.y*h*a.tileSize-c.y];n.use(),u.bind(0),n.setUniform("uProjectionMatrix",l),n.setUniform("uTileOffset",p),n.setUniform("uLODScale",1),n.setUniform("uLODOffset",[0,0]),n.setUniform("uPointA",[t.a.x,t.a.y]),n.setUniform("uPointB",[t.b.x,t.b.y]),n.setUniform("uWeights",[t.a.weight,t.b.weight]),n.setUniform("uScale",h),n.setUniform("uBrightness",o.brightness),n.setUniform("uColorRampSampler",0),n.setUniform("uColorRampSize",u.width),n.setUniform("uOpacity",e),n.setUniform("uRangeMin",o.range[0]),n.setUniform("uRangeMax",o.range[1]),n.setUniform("uMin",s.min),n.setUniform("uMax",s.max),r.bind(),r.draw(),r.unbind()}}]),r}();e.exports=l},{"../../morton/Morton":243,"../shader/BrightnessTransform":255,"../shader/ColorRamp":256,lumo:206}],258:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=t("lumo"),C=t("../../morton/Morton"),i={common:t("../shader/BrightnessTransform").common,vert:"\n\t\tattribute vec2 aPosition;\n\t\tuniform float uRadius;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform float uScale;\n\t\tuniform float uOutlineWidth;\n\t\tuniform vec2 uLODOffset;\n\t\tuniform float uLODScale;\n\t\tuniform float uPixelRatio;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tuniform vec4 uColor;\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tvec2 wPosition = (aPosition * uScale * uLODScale) + (uTileOffset + (uScale * uLODOffset));\n\t\t\tgl_PointSize = (uRadius + uOutlineWidth) * 2.0 * uPixelRatio;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t\tvColor = brightnessTransform(uColor);\n\t\t}\n\t\t",frag:"\n\t\t#ifdef GL_OES_standard_derivatives\n\t\t\t#extension GL_OES_standard_derivatives : enable\n\t\t#endif\n\t\tuniform float uRadius;\n\t\tuniform float uOutlineWidth;\n\t\tuniform vec4 uOutlineColor;\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tvec2 cxy = 2.0 * gl_PointCoord - 1.0;\n\t\t\tfloat radius = dot(cxy, cxy);\n\t\t\tfloat fullRadius = uRadius + uOutlineWidth;\n\t\t\t#ifdef GL_OES_standard_derivatives\n\t\t\t\tfloat delta = fwidth(radius);\n\t\t\t\tfloat alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, radius);\n\t\t\t\tfloat outlineRadius = radius + (uOutlineWidth / fullRadius);\n\t\t\t\tfloat outlineDelta = fwidth(outlineRadius);\n\t\t\t\tfloat outlineAlpha = smoothstep(1.0 - outlineDelta, 1.0 + outlineDelta, outlineRadius);\n\t\t\t\tvec4 color = vec4(\n\t\t\t\t\tvColor.r * (1.0 - outlineAlpha) + uOutlineColor.r * outlineAlpha,\n\t\t\t\t\tvColor.g * (1.0 - outlineAlpha) + uOutlineColor.g * outlineAlpha,\n\t\t\t\t\tvColor.b * (1.0 - outlineAlpha) + uOutlineColor.b * outlineAlpha,\n\t\t\t\t\tvColor.a * (1.0 - outlineAlpha) + uOutlineColor.a * outlineAlpha);\n\t\t\t#else\n\t\t\t\tif (radius > 1.0) {\n\t\t\t\t\tdiscard;\n\t\t\t\t}\n\t\t\t\tvec4 color;\n\t\t\t\tif ((radius * fullRadius) >= (fullRadius - uOutlineWidth)) {\n\t\t\t\t\t// outline\n\t\t\t\t\tcolor = uOutlineColor;\n\t\t\t\t} else {\n\t\t\t\t\t// fill\n\t\t\t\t\tcolor = vColor;\n\t\t\t\t}\n\t\t\t\tfloat alpha = 1.0;\n\t\t\t#endif\n\t\t\tgl_FragColor = vec4(color.rgb, color.a * alpha);\n\t\t}\n\t\t"},a=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,this.ext=t.gl.getExtension("OES_standard_derivatives"),this.point=function(t){var e=new Float32Array(2);return e[0]=0,e[1]=0,new o.VertexBuffer(t,e,{0:{size:2,type:"FLOAT"}},{mode:"POINTS",count:1})}(t.gl),this.shader=t.createShader(i)}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"drawInstanced",value:function(t,e,n,r,o){var i=this.shader,a=this.renderer,u=a.layer,s=u.plot,l=a.getOrthoMatrix();i.use(),i.setUniform("uProjectionMatrix",l),i.setUniform("uColor",n),i.setUniform("uRadius",e),i.setUniform("uOutlineWidth",r),i.setUniform("uOutlineColor",o),i.setUniform("uPixelRatio",s.pixelRatio),i.setUniform("uBrightness",a.brightness),t.bind(),0<u.lod?function(t,e,n,r,o){for(var i,a,u,s,l,c,f,h=Math.round(n.zoom),p=0;p<o.length;p++){var y=o[p];if(!(r<Math.abs(y.tile.coord.z-h))){var d=y.uvOffset[0],v=y.uvOffset[1],m=y.uvOffset[3];t.setUniform("uScale",y.scale),t.setUniform("uTileOffset",y.tileOffset);var b=1/m,g=[-d*b*n.tileSize,-v*b*n.tileSize];t.setUniform("uLODScale",1/m),t.setUniform("uLODOffset",g);var _=k((i=d,a=v,u=m,s=r,void 0,l=Math.pow(2,s),c=u*l,[f=C(i*l,a*l),f+c*c]),2),x=_[0],w=_[1],O=y.tile.data.points,S=y.tile.data.offsets,T=S[x],E=w===S.length?O.byteLength:S[w],P=T/(4*e.stride),j=(E-T)/(4*e.stride);0<j&&e.draw(y.hash,"POINTS",P,j)}}}(i,t,s,u.lod,a.getRenderablesLOD()):function(t,e,n){for(var r=0;r<n.length;r++){var o=n[r];t.setUniform("uScale",o.scale),t.setUniform("uTileOffset",o.tileOffset),t.setUniform("uLODScale",1),t.setUniform("uLODOffset",[0,0]),e.draw(o.hash,"POINTS")}}(i,t,a.getRenderables()),t.unbind()}},{key:"drawIndividual",value:function(t,e,n,r,o){var i=this.shader,a=this.point,u=this.renderer,s=u.layer.plot,l=u.getOrthoMatrix(),c=s.getViewportPixelOffset(),f=t.tile.coord,h=Math.pow(2,s.zoom-f.z),p=[f.x*h*s.tileSize+h*t.x-c.x,f.y*h*s.tileSize+h*t.y-c.y];i.use(),i.setUniform("uProjectionMatrix",l),i.setUniform("uTileOffset",p),i.setUniform("uLODScale",1),i.setUniform("uLODOffset",[0,0]),i.setUniform("uScale",h),i.setUniform("uColor",n),i.setUniform("uRadius",e),i.setUniform("uOutlineWidth",r),i.setUniform("uOutlineColor",o),i.setUniform("uPixelRatio",s.pixelRatio),i.setUniform("uBrightness",u.brightness),a.bind(),a.draw(),a.unbind()}}]),e}();e.exports=a},{"../../morton/Morton":243,"../shader/BrightnessTransform":255,lumo:206}],259:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=t("lumo"),o=t("../shader/BrightnessTransform"),u={common:o.common,vert:"\n\t\tattribute vec2 aPosition;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform vec2 uOffset;\n\t\tuniform float uScale;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tuniform vec4 uColor;\n\t\tuniform float uOpacity;\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tvec2 wPosition = (aPosition * uScale) + uTileOffset + uOffset;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t\tvColor = brightnessTransform(vec4(uColor.rgb, uColor.a * uOpacity));\n\t\t}\n\t\t",frag:"\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vColor;\n\t\t}\n\t\t"},s={common:o.common,vert:"\n\t\tattribute vec2 aPosition;\n\t\tattribute vec2 aOffset;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform vec2 uOffset;\n\t\tuniform float uScale;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tuniform vec4 uColor;\n\t\tuniform float uOpacity;\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tvec2 wPosition = ((aPosition + aOffset) * uScale) + uTileOffset + uOffset;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t\tvColor = brightnessTransform(vec4(uColor.rgb, uColor.a * uOpacity));\n\t\t}\n\t\t",frag:"\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vColor;\n\t\t}\n\t\t"},i=function(){function i(t,e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.renderer=t,this.quad=function(t,e,n,r,o){var i=new Float32Array([e,r,n,r,n,o,e,r,n,o,e,o]);return new a.VertexBuffer(t,i,{0:{size:2,type:"FLOAT"}},{count:6})}(t.gl,e,n,r,o),this.shaders={instanced:t.createShader(s),individual:t.createShader(u)}}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(i,[{key:"drawInstanced",value:function(t,e,n,r){var o=2<arguments.length&&void 0!==n?n:1,i=3<arguments.length&&void 0!==r?r:[0,0],a=this.shaders.instanced,u=this.ring,s=this.renderer,l=s.getOrthoMatrix(),c=s.getRenderables();a.use(),a.setUniform("uProjectionMatrix",l),a.setUniform("uOpacity",o),a.setUniform("uOffset",i),a.setUniform("uColor",e),a.setUniform("uBrightness",s.brightness),u.bind(),t.bindInstanced();for(var f=0;f<c.length;f++){var h=c[f];a.setUniform("uScale",h.scale),a.setUniform("uTileOffset",h.tileOffset),t.drawInstanced(h.hash,u.mode,u.count)}t.unbindInstanced(),u.unbind()}},{key:"drawIndividual",value:function(t,e,n,r){var o=2<arguments.length&&void 0!==n?n:1,i=3<arguments.length&&void 0!==r?r:[0,0],a=this.shaders.individual,u=this.ring,s=this.renderer,l=s.layer.plot,c=s.getOrthoMatrix(),f=l.getViewportPixelOffset(),h=t.tile.coord,p=Math.pow(2,l.zoom-h.z),y=[h.x*p*l.tileSize+p*t.x-f.x,h.y*p*l.tileSize+p*t.y-f.y];a.use(),a.setUniform("uProjectionMatrix",c),a.setUniform("uColor",e),a.setUniform("uOpacity",o),a.setUniform("uScale",p),a.setUniform("uTileOffset",y),a.setUniform("uOffset",i),a.setUniform("uBrightness",s.brightness),u.bind(),u.draw(),u.unbind()}}]),i}();e.exports=i},{"../shader/BrightnessTransform":255,lumo:206}],260:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=t("lumo"),u={common:t("../shader/BrightnessTransform").common,vert:"\n\t\tattribute vec2 aPosition;\n\t\tattribute vec2 aOffset;\n\t\tattribute float aRadius;\n\t\tuniform float uRotation;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform float uScale;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tuniform vec4 uColor;\n\t\tuniform float uOpacity;\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tfloat s = sin(uRotation);\n\t\t\tfloat c = cos(uRotation);\n\t\t\tmat2 rotation = mat2(c, -s, s, c);\n\t\t\tvec2 radiusOffset = aRadius * vec2(0.0, 1.0);\n\t\t\tvec2 wPosition = ((rotation * (aPosition + radiusOffset)) + aOffset) * uScale + uTileOffset;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t\tvColor = brightnessTransform(vec4(uColor.rgb, uColor.a * uOpacity));\n\t\t}\n\t\t",frag:"\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vColor;\n\t\t}\n\t\t"},o=function(){function i(t,e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.renderer=t,this.quad=function(t,e,n,r,o){var i=new Float32Array([e,r,n,r,n,o,e,r,n,o,e,o]);return new a.VertexBuffer(t,i,{0:{size:2,type:"FLOAT"}},{count:6})}(t.gl,e,n,r,o),this.shaders={instanced:t.createShader(u)}}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(i,[{key:"drawInstanced",value:function(t,e,n,r){var o=2<arguments.length&&void 0!==n?n:0,i=3<arguments.length&&void 0!==r?r:1,a=this.shaders.instanced,u=this.quad,s=this.renderer,l=s.getOrthoMatrix(),c=s.getRenderables();a.use(),a.setUniform("uProjectionMatrix",l),a.setUniform("uRotation",o),a.setUniform("uOpacity",i),a.setUniform("uColor",e),a.setUniform("uBrightness",s.brightness),u.bind(),t.bindInstanced();for(var f=0;f<c.length;f++){var h=c[f];a.setUniform("uScale",h.scale),a.setUniform("uTileOffset",h.tileOffset),t.drawInstanced(h.hash,u.mode,u.count)}t.unbindInstanced(),u.unbind()}},{key:"drawIndividual",value:function(t,e,n,r){var o=3<arguments.length&&void 0!==r?r:1,i=this.shaders.individual,a=this.quad,u=this.renderer,s=this.renderer.layer.plot,l=this.renderer.getOrthoMatrix(),c=s.getViewportPixelOffset(),f=t.tile.coord,h=Math.pow(2,s.zoom-f.z),p=[f.x*h*s.tileSize+h*t.x-c.x,f.y*h*s.tileSize+h*t.y-c.y];i.use(),i.setUniform("uProjectionMatrix",l),i.setUniform("uRotation",n),i.setUniform("uOpacity",o),i.setUniform("uColor",e),i.setUniform("uScale",h),i.setUniform("uTileOffset",p),i.setUniform("uBrightness",u.brightness),a.bind(),a.draw(),a.unbind()}}]),i}();e.exports=o},{"../shader/BrightnessTransform":255,lumo:206}],261:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y=t("lumo"),o=t("../shader/BrightnessTransform"),i={common:o.common,vert:"\n\t\tattribute vec2 aPosition;\n\t\tuniform float uRadius;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform float uScale;\n\t\tuniform float uRadiusOffset;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tuniform vec4 uColor;\n\t\tuniform float uOpacity;\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tvec2 radiusOffset = normalize(aPosition) * (uRadius - uRadiusOffset);\n\t\t\tvec2 wPosition = ((aPosition + radiusOffset) * uScale) + uTileOffset;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t\tvColor = brightnessTransform(vec4(uColor.rgb, uColor.a * uOpacity));\n\t\t}\n\t\t",frag:"\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vColor;\n\t\t}\n\t\t"},a={common:o.common,vert:"\n\t\tattribute vec2 aPosition;\n\t\tattribute vec2 aOffset;\n\t\tattribute float aRadius;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform float uScale;\n\t\tuniform float uRadiusOffset;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tuniform vec4 uColor;\n\t\tuniform float uOpacity;\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tvec2 radiusOffset = normalize(aPosition) * (aRadius - uRadiusOffset);\n\t\t\tvec2 wPosition = ((aPosition + radiusOffset + aOffset) * uScale) + uTileOffset;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t\tvColor = brightnessTransform(vec4(uColor.rgb, uColor.a * uOpacity));\n\t\t}\n\t\t",frag:"\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vColor;\n\t\t}\n\t\t"},u=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.renderer=t,this.ring=function(t,e,n,r){for(var o=2*Math.PI/e,i=Math.cos(o),a=Math.sin(o),u=0,s=n-r/2,l=0,c=n+r/2,f=new Float32Array(4*(e+1)),h=0;h<=e;h++){var p=f[4*h]=u;u=i*u-a*(f[4*h+1]=s),s=a*p+i*s,l=i*(p=f[4*h+2]=l)-a*(f[4*h+3]=c),c=a*p+i*c}return new y.VertexBuffer(t,f,{0:{size:2,type:"FLOAT"}},{mode:"TRIANGLE_STRIP",count:f.length/2})}(t.gl,64,64,e),this.shaders={instanced:t.createShader(a),individual:t.createShader(i)}}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(n,[{key:"drawInstanced",value:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:1,o=this.shaders.instanced,i=this.ring,a=this.renderer,u=a.getOrthoMatrix(),s=a.getRenderables();o.use(),o.setUniform("uProjectionMatrix",u),o.setUniform("uRadiusOffset",64),o.setUniform("uOpacity",r),o.setUniform("uColor",e),o.setUniform("uBrightness",a.brightness),i.bind(),t.bindInstanced();for(var l=0;l<s.length;l++){var c=s[l];o.setUniform("uScale",c.scale),o.setUniform("uTileOffset",c.tileOffset),t.drawInstanced(c.hash,i.mode,i.count)}t.unbindInstanced(),i.unbind()}},{key:"drawIndividual",value:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:1,o=this.shaders.individual,i=this.ring,a=this.renderer,u=a.layer.plot,s=a.getOrthoMatrix(),l=u.getViewportPixelOffset(),c=t.tile.coord,f=Math.pow(2,u.zoom-c.z),h=[c.x*f*u.tileSize+f*t.x-l.x,c.y*f*u.tileSize+f*t.y-l.y];o.use(),o.setUniform("uProjectionMatrix",s),o.setUniform("uColor",e),o.setUniform("uOpacity",r),o.setUniform("uRadius",t.radius),o.setUniform("uRadiusOffset",64),o.setUniform("uScale",f),o.setUniform("uTileOffset",h),o.setUniform("uBrightness",a.brightness),i.bind(),i.draw(),i.unbind()}}]),n}();e.exports=u},{"../shader/BrightnessTransform":255,lumo:206}],262:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y=t("lumo"),r=t("../shader/BrightnessTransform"),i={common:r.common,vert:"\n\t\tattribute vec3 aPosition;\n\t\tuniform float uPercentages[NUM_SEGMENTS];\n\t\tuniform vec4 uColors[NUM_SEGMENTS];\n\t\tuniform float uRadius;\n\t\tuniform vec2 uTileOffset;\n\t\tuniform float uScale;\n\t\tuniform float uRadiusOffset;\n\t\tuniform mat4 uProjectionMatrix;\n\t\tuniform vec4 uColor;\n\t\tuniform float uOpacity;\n\n\t\tvarying vec4 vColor;\n\n\t\tvoid main() {\n\t\t\tvec2 radiusOffset = normalize(aPosition.xy) * (uRadius - uRadiusOffset);\n\t\t\tvec2 wPosition = ((aPosition.xy + radiusOffset) * uScale) + uTileOffset;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\t\t\tfloat percentage = aPosition.z;\n\t\t\tfor (int i = 0; i<NUM_SEGMENTS; i++) {\n\t\t\t\tif (percentage <= uPercentages[i]) {\n\t\t\t\t\tvColor = brightnessTransform(vec4(uColors[i].rgb, uColors[i].a * uOpacity));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t",frag:"\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vColor;\n\t\t}\n\t\t"},a={common:r.common,vert:"\n\t\tattribute vec3 aPosition;\n\t\tattribute vec2 aOffset;\n\t\tattribute float aRadius;\n\t\tattribute vec4 aPercentagesA;\n\t\tattribute vec4 aPercentagesB;\n\t\tattribute vec4 aPercentagesC;\n\t\tattribute vec4 aPercentagesD;\n\n\t\tuniform vec4 uColors[NUM_SEGMENTS];\n\t\tuniform vec2 uTileOffset;\n\t\tuniform float uScale;\n\t\tuniform float uRadiusOffset;\n\t\tuniform mat4 uProjectionMatrix;\n\n\t\tvarying vec4 vColor;\n\n\t\tvoid main() {\n\t\t\tvec2 radiusOffset = normalize(aPosition.xy) * (aRadius - uRadiusOffset);\n\t\t\tvec2 wPosition = ((aPosition.xy + radiusOffset + aOffset) * uScale) + uTileOffset;\n\t\t\tgl_Position = uProjectionMatrix * vec4(wPosition, 0.0, 1.0);\n\n\t\t\tfloat percentage = aPosition.z;\n\t\t\tif (percentage <= aPercentagesA.x) {\n\t\t\t\tvColor = uColors[0];\n\t\t\t#if NUM_SEGMENTS > 1\n\t\t\t} else if (percentage <= aPercentagesA.y) {\n\t\t\t\t\tvColor = uColors[1];\n\t\t\t#endif\n\t\t\t#if NUM_SEGMENTS > 2\n\t\t\t\t} else if (percentage <= aPercentagesA.z) {\n\t\t\t\t\tvColor = uColors[2];\n\t\t\t#endif\n\t\t\t#if NUM_SEGMENTS > 3\n\t\t\t\t} else if (percentage <= aPercentagesA.w) {\n\t\t\t\t\tvColor = uColors[3];\n\t\t\t#endif\n\t\t\t#if NUM_SEGMENTS > 4\n\t\t\t\t} else if (percentage <= aPercentagesB.x) {\n\t\t\t\t\tvColor = uColors[4];\n\t\t\t#endif\n\t\t\t#if NUM_SEGMENTS > 5\n\t\t\t\t} else if (percentage <= aPercentagesB.y) {\n\t\t\t\t\tvColor = uColors[5];\n\t\t\t#endif\n\t\t\t#if NUM_SEGMENTS > 6\n\t\t\t\t} else if (percentage <= aPercentagesB.z) {\n\t\t\t\t\tvColor = uColors[6];\n\t\t\t#endif\n\t\t\t#if NUM_SEGMENTS > 7\n\t\t\t\t} else if (percentage <= aPercentagesB.w) {\n\t\t\t\t\tvColor = uColors[7];\n\t\t\t#endif\n\t\t\t#if NUM_SEGMENTS > 8\n\t\t\t\t} else if (percentage <= aPercentagesC.x) {\n\t\t\t\t\tvColor = uColors[8];\n\t\t\t#endif\n\t\t\t#if NUM_SEGMENTS > 9\n\t\t\t\t} else if (percentage <= aPercentagesC.y) {\n\t\t\t\t\tvColor = uColors[9];\n\t\t\t#endif\n\t\t\t#if NUM_SEGMENTS > 10\n\t\t\t\t} else if (percentage <= aPercentagesC.z) {\n\t\t\t\t\tvColor = uColors[10];\n\t\t\t#endif\n\t\t\t#if NUM_SEGMENTS > 11\n\t\t\t\t} else if (percentage <= aPercentagesC.w) {\n\t\t\t\t\tvColor = uColors[11];\n\t\t\t#endif\n\t\t\t#if NUM_SEGMENTS > 12\n\t\t\t\t} else if (percentage <= aPercentagesD.x) {\n\t\t\t\t\tvColor = uColors[12];\n\t\t\t#endif\n\t\t\t#if NUM_SEGMENTS > 13\n\t\t\t\t} else if (percentage <= aPercentagesD.y) {\n\t\t\t\t\tvColor = uColors[13];\n\t\t\t#endif\n\t\t\t#if NUM_SEGMENTS > 14\n\t\t\t\t} else if (percentage <= aPercentagesD.z) {\n\t\t\t\t\tvColor = uColors[14];\n\t\t\t#endif\n\t\t\t\t} else {\n\t\t\t\t\tvColor = uColors[NUM_SEGMENTS-1];\n\t\t\t\t}\n\t\t\t}\n\t\t",frag:"\n\t\tuniform float uOpacity;\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tvec4 color = brightnessTransform(vColor);\n\t\t\tgl_FragColor = vec4(color.rgb, color.a * uOpacity);\n\t\t}\n\t\t"},u=function(){function r(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.renderer=t,this.ring=function(t,e,n,r){for(var o=2*Math.PI/e,i=Math.cos(o),a=Math.sin(o),u=0,s=n-r/2,l=0,c=n+r/2,f=new Float32Array(6*(e+1)),h=0;h<=e;h++){f[6*h]=u,f[6*h+1]=s,f[6*h+2]=h/(e+1),f[6*h+3]=l,f[6*h+4]=c,f[6*h+5]=h/(e+1);var p=u;u=i*u-a*s,s=a*p+i*s,l=i*(p=l)-a*c,c=a*p+i*c}return new y.VertexBuffer(t,f,{0:{size:3,type:"FLOAT"}},{mode:"TRIANGLE_STRIP",count:f.length/3})}(t.gl,360,10,e),this.shaders={instanced:t.createShader({define:{NUM_SEGMENTS:n},common:a.common,vert:a.vert,frag:a.frag}),individual:t.createShader({define:{NUM_SEGMENTS:n},common:i.common,vert:i.vert,frag:i.frag})}}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(r,[{key:"drawInstanced",value:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:1,o=this.shaders.instanced,i=this.ring,a=this.renderer,u=a.getOrthoMatrix(),s=a.getRenderables();o.use(),o.setUniform("uProjectionMatrix",u),o.setUniform("uRadiusOffset",10),o.setUniform("uOpacity",r),o.setUniform("uColors",e),o.setUniform("uBrightness",a.brightness),i.bind(),t.bindInstanced();for(var l=0;l<s.length;l++){var c=s[l];o.setUniform("uScale",c.scale),o.setUniform("uTileOffset",c.tileOffset),t.drawInstanced(c.hash,i.mode,i.count)}t.unbindInstanced(),i.unbind()}},{key:"drawIndividual",value:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:1,o=this.shaders.individual,i=this.ring,a=this.renderer,u=a.layer.plot,s=a.getOrthoMatrix(),l=u.getViewportPixelOffset(),c=t.tile.coord,f=Math.pow(2,u.zoom-c.z),h=[c.x*f*u.tileSize+f*t.x-l.x,c.y*f*u.tileSize+f*t.y-l.y];o.use(),o.setUniform("uProjectionMatrix",s),o.setUniform("uColors",e),o.setUniform("uPercentages",t.percentages),o.setUniform("uOpacity",r),o.setUniform("uRadius",t.radius),o.setUniform("uRadiusOffset",10),o.setUniform("uScale",f),o.setUniform("uTileOffset",h),o.setUniform("uBrightness",a.brightness),i.bind(),i.draw(),i.unbind()}}]),r}();e.exports=u},{"../shader/BrightnessTransform":255,lumo:206}],263:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=t("lodash/cloneDeep"),o=t("lodash/forIn"),a=t("lodash/isArray"),u=t("lodash/isEmpty"),s=t("lodash/isObject"),l=t("lodash/isString"),c=t("lodash/pull"),f=t("lodash/startsWith"),h=t("json-stable-stringify"),p=5e3;function y(a,t){a.socket=new WebSocket(function(t){var e=window.location,n="https:"===e.protocol?"wss:":"ws:";return f(t.websocketURL,"//")?"".concat(n).concat(t.websocketURL):"".concat(n,"//").concat(e.host).concat(e.pathname).concat(t.websocketURL)}(a),a.wsAuthentication),a.socket.onopen=function(){a.isOpen=!0,console.log("WebSocket connection established on /".concat(a.websocketURL)),t(null,a)},a.socket.onmessage=function(t){var e=JSON.parse(t.data),n=e.success,r=e.error,o=a.getHash(e,!1);if(a.requests.has(o)){var i=a.requests.get(o);a.requests.delete(o),n?i.resolve(a.httpURL):i.reject(new Error(r))}else console.error("Unrecognized response: ",e,", discarding")},a.socket.onclose=function(){a.isOpen&&console.warn("WebSocket connection on /".concat(a.websocketURL," lost, attempting to reconnect in ").concat(p,"ms")),a.socket=null,a.isOpen=!1,a.requests.forEach(function(t){t.reject()}),a.requests=new Map,setTimeout(function(){y(a,function(){a.pending.forEach(function(t){a.requests.set(t.hash,t),a.socket.send(JSON.stringify(t.request))}),a.pending=new Map})},p)}}function d(n){return o(n,function(t,e){(void 0===t||null==t||l(t)&&u(t)||s(t)&&u(d(t)))&&delete n[e]}),a(n)&&c(n,void 0),n}function v(t,e){var n,r;return{hash:t,request:e,promise:new Promise(function(t,e){n=t,r=e}),resolve:n,reject:r}}function m(t){if(!t||!l(t))throw"Provided URL `".concat(t,"` is invalid");return f(t,"/")&&!f(t,"//")&&(t=t.substring(1,t.length)),t="/"===t[t.length-1]?t.substring(0,t.length-1):t}var b=function(){function o(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.websocketURL=m(t),this.httpURL=m(e),this.requests=new Map,this.pending=new Map,this.xhr=new Map,this.isOpen=!1,this.wsAuthentication=r.wsAuthentication||[],this.httpAuthentication=r.httpAuthentication,y(this,n)}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(o,[{key:"getHash",value:function(t){return t.error=void 0,t.success=void 0,h(function(t,e){return d(e?i(t):t)}(t))}},{key:"get",value:function(t){var e=this.getHash(t);if(!this.isOpen){var n=this.pending.get(e);return n||(n=v(e,t),this.pending.set(e,n)),n.promise}var r=this.requests.get(e);return r||(r=v(e,t),this.requests.set(e,r),this.socket.send(JSON.stringify(r.request))),r.promise}},{key:"abort",value:function(){this.xhr.forEach(function(t){try{t.abort()}catch(t){console.warn(t)}}),this.xhr.clear(),this.pending.forEach(function(t){t.reject()}),this.requests.forEach(function(t){t.reject()}),this.socket.onclose=null,this.socket.close(),this.isOpen=!1,this.socket=null}},{key:"close",value:function(){this.abort(),console.warn("WebSocket connection on /".concat(this.websocketURL," closed"))}}]),o}();e.exports=b},{"json-stable-stringify":3,"lodash/cloneDeep":159,"lodash/forIn":164,"lodash/isArray":169,"lodash/isEmpty":172,"lodash/isObject":178,"lodash/isString":181,"lodash/pull":194,"lodash/startsWith":197}]},{},[207])(207)});